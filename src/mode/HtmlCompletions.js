"use strict";
import TokenIterator from "../TokenIterator";
var commonAttributes = [
    "accesskey",
    "class",
    "contenteditable",
    "contextmenu",
    "dir",
    "draggable",
    "dropzone",
    "hidden",
    "id",
    "inert",
    "itemid",
    "itemprop",
    "itemref",
    "itemscope",
    "itemtype",
    "lang",
    "spellcheck",
    "style",
    "tabindex",
    "title",
    "translate"
];
var eventAttributes = [
    "onabort",
    "onblur",
    "oncancel",
    "oncanplay",
    "oncanplaythrough",
    "onchange",
    "onclick",
    "onclose",
    "oncontextmenu",
    "oncuechange",
    "ondblclick",
    "ondrag",
    "ondragend",
    "ondragenter",
    "ondragleave",
    "ondragover",
    "ondragstart",
    "ondrop",
    "ondurationchange",
    "onemptied",
    "onended",
    "onerror",
    "onfocus",
    "oninput",
    "oninvalid",
    "onkeydown",
    "onkeypress",
    "onkeyup",
    "onload",
    "onloadeddata",
    "onloadedmetadata",
    "onloadstart",
    "onmousedown",
    "onmousemove",
    "onmouseout",
    "onmouseover",
    "onmouseup",
    "onmousewheel",
    "onpause",
    "onplay",
    "onplaying",
    "onprogress",
    "onratechange",
    "onreset",
    "onscroll",
    "onseeked",
    "onseeking",
    "onselect",
    "onshow",
    "onstalled",
    "onsubmit",
    "onsuspend",
    "ontimeupdate",
    "onvolumechange",
    "onwaiting"
];
var globalAttributes = commonAttributes.concat(eventAttributes);
var attributeMap = {
    "html": ["manifest"],
    "head": [],
    "title": [],
    "base": ["href", "target"],
    "link": ["href", "hreflang", "rel", "media", "type", "sizes"],
    "meta": ["http-equiv", "name", "content", "charset"],
    "style": ["type", "media", "scoped"],
    "script": ["charset", "type", "src", "defer", "async"],
    "noscript": ["href"],
    "body": ["onafterprint", "onbeforeprint", "onbeforeunload", "onhashchange", "onmessage", "onoffline", "onpopstate", "onredo", "onresize", "onstorage", "onundo", "onunload"],
    "section": [],
    "nav": [],
    "article": ["pubdate"],
    "aside": [],
    "h1": [],
    "h2": [],
    "h3": [],
    "h4": [],
    "h5": [],
    "h6": [],
    "header": [],
    "footer": [],
    "address": [],
    "main": [],
    "p": [],
    "hr": [],
    "pre": [],
    "blockquote": ["cite"],
    "ol": ["start", "reversed"],
    "ul": [],
    "li": ["value"],
    "dl": [],
    "dt": [],
    "dd": [],
    "figure": [],
    "figcaption": [],
    "div": [],
    "a": ["href", "target", "ping", "rel", "media", "hreflang", "type"],
    "em": [],
    "strong": [],
    "small": [],
    "s": [],
    "cite": [],
    "q": ["cite"],
    "dfn": [],
    "abbr": [],
    "data": [],
    "time": ["datetime"],
    "code": [],
    "var": [],
    "samp": [],
    "kbd": [],
    "sub": [],
    "sup": [],
    "i": [],
    "b": [],
    "u": [],
    "mark": [],
    "ruby": [],
    "rt": [],
    "rp": [],
    "bdi": [],
    "bdo": [],
    "span": [],
    "br": [],
    "wbr": [],
    "ins": ["cite", "datetime"],
    "del": ["cite", "datetime"],
    "img": ["alt", "src", "height", "width", "usemap", "ismap"],
    "iframe": ["name", "src", "height", "width", "sandbox", "seamless"],
    "embed": ["src", "height", "width", "type"],
    "object": ["param", "data", "type", "height", "width", "usemap", "name", "form", "classid"],
    "param": ["name", "value"],
    "video": ["src", "autobuffer", "autoplay", "loop", "controls", "width", "height", "poster"],
    "audio": ["src", "autobuffer", "autoplay", "loop", "controls"],
    "source": ["src", "type", "media"],
    "track": ["kind", "src", "srclang", "label", "default"],
    "canvas": ["width", "height"],
    "map": ["name"],
    "area": ["shape", "coords", "href", "hreflang", "alt", "target", "media", "rel", "ping", "type"],
    "svg": [],
    "math": [],
    "table": ["summary"],
    "caption": [],
    "colgroup": ["span"],
    "col": ["span"],
    "tbody": [],
    "thead": [],
    "tfoot": [],
    "tr": [],
    "td": ["headers", "rowspan", "colspan"],
    "th": ["headers", "rowspan", "colspan", "scope"],
    "form": ["accept-charset", "action", "autocomplete", "enctype", "method", "name", "novalidate", "target"],
    "fieldset": ["disabled", "form", "name"],
    "legend": [],
    "label": ["form", "for"],
    "input": ["type", "accept", "alt", "autocomplete", "checked", "disabled", "form", "formaction", "formenctype", "formmethod", "formnovalidate", "formtarget", "height", "list", "max", "maxlength", "min", "multiple", "pattern", "placeholder", "readonly", "required", "size", "src", "step", "width", "files", "value"],
    "button": ["autofocus", "disabled", "form", "formaction", "formenctype", "formmethod", "formnovalidate", "formtarget", "name", "value", "type"],
    "select": ["autofocus", "disabled", "form", "multiple", "name", "size"],
    "datalist": [],
    "optgroup": ["disabled", "label"],
    "option": ["disabled", "selected", "label", "value"],
    "textarea": ["autofocus", "disabled", "form", "maxlength", "name", "placeholder", "readonly", "required", "rows", "cols", "wrap"],
    "keygen": ["autofocus", "challenge", "disabled", "form", "keytype", "name"],
    "output": ["for", "form", "name"],
    "progress": ["value", "max"],
    "meter": ["value", "min", "max", "low", "high", "optimum"],
    "details": ["open"],
    "summary": [],
    "command": ["type", "label", "icon", "disabled", "checked", "radiogroup", "command"],
    "menu": ["type", "label"],
    "dialog": ["open"]
};
var elements = Object.keys(attributeMap);
function is(token, type) {
    return token.type.lastIndexOf(type + ".xml") > -1;
}
function findTagName(session, pos) {
    var iterator = new TokenIterator(session, pos.row, pos.column);
    var token = iterator.getCurrentToken();
    while (token && !is(token, "tag-name")) {
        token = iterator.stepBackward();
    }
    if (token)
        return token.value;
}
export default class HtmlCompletions {
    constructor() {
    }
    getCompletions(state, session, pos, prefix) {
        var token = session.getTokenAt(pos.row, pos.column);
        if (!token)
            return [];
        if (is(token, "tag-name") || is(token, "tag-open") || is(token, "end-tag-open"))
            return this.getTagCompletions(state, session, pos, prefix);
        if (is(token, "tag-whitespace") || is(token, "attribute-name"))
            return this.getAttributeCompetions(state, session, pos, prefix);
        return [];
    }
    getTagCompletions(state, session, pos, prefix) {
        return elements.map(function (element) {
            return {
                value: element,
                meta: "tag",
                score: Number.MAX_VALUE
            };
        });
    }
    getAttributeCompetions(state, session, pos, prefix) {
        var tagName = findTagName(session, pos);
        if (!tagName)
            return [];
        var attributes = globalAttributes;
        if (tagName in attributeMap) {
            attributes = attributes.concat(attributeMap[tagName]);
        }
        return attributes.map(function (attribute) {
            return {
                caption: attribute,
                snippet: attribute + '="$0"',
                meta: "attribute",
                score: Number.MAX_VALUE
            };
        });
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSHRtbENvbXBsZXRpb25zLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiSHRtbENvbXBsZXRpb25zLnRzIl0sIm5hbWVzIjpbImlzIiwiZmluZFRhZ05hbWUiLCJIdG1sQ29tcGxldGlvbnMiLCJIdG1sQ29tcGxldGlvbnMuY29uc3RydWN0b3IiLCJIdG1sQ29tcGxldGlvbnMuZ2V0Q29tcGxldGlvbnMiLCJIdG1sQ29tcGxldGlvbnMuZ2V0VGFnQ29tcGxldGlvbnMiLCJIdG1sQ29tcGxldGlvbnMuZ2V0QXR0cmlidXRlQ29tcGV0aW9ucyJdLCJtYXBwaW5ncyI6IkFBb0RBLFlBQVksQ0FBQztPQU1OLGFBQWEsTUFBTSxrQkFBa0I7QUFFNUMsSUFBSSxnQkFBZ0IsR0FBRztJQUNuQixXQUFXO0lBQ1gsT0FBTztJQUNQLGlCQUFpQjtJQUNqQixhQUFhO0lBQ2IsS0FBSztJQUNMLFdBQVc7SUFDWCxVQUFVO0lBQ1YsUUFBUTtJQUNSLElBQUk7SUFDSixPQUFPO0lBQ1AsUUFBUTtJQUNSLFVBQVU7SUFDVixTQUFTO0lBQ1QsV0FBVztJQUNYLFVBQVU7SUFDVixNQUFNO0lBQ04sWUFBWTtJQUNaLE9BQU87SUFDUCxVQUFVO0lBQ1YsT0FBTztJQUNQLFdBQVc7Q0FDZCxDQUFDO0FBRUYsSUFBSSxlQUFlLEdBQUc7SUFDbEIsU0FBUztJQUNULFFBQVE7SUFDUixVQUFVO0lBQ1YsV0FBVztJQUNYLGtCQUFrQjtJQUNsQixVQUFVO0lBQ1YsU0FBUztJQUNULFNBQVM7SUFDVCxlQUFlO0lBQ2YsYUFBYTtJQUNiLFlBQVk7SUFDWixRQUFRO0lBQ1IsV0FBVztJQUNYLGFBQWE7SUFDYixhQUFhO0lBQ2IsWUFBWTtJQUNaLGFBQWE7SUFDYixRQUFRO0lBQ1Isa0JBQWtCO0lBQ2xCLFdBQVc7SUFDWCxTQUFTO0lBQ1QsU0FBUztJQUNULFNBQVM7SUFDVCxTQUFTO0lBQ1QsV0FBVztJQUNYLFdBQVc7SUFDWCxZQUFZO0lBQ1osU0FBUztJQUNULFFBQVE7SUFDUixjQUFjO0lBQ2Qsa0JBQWtCO0lBQ2xCLGFBQWE7SUFDYixhQUFhO0lBQ2IsYUFBYTtJQUNiLFlBQVk7SUFDWixhQUFhO0lBQ2IsV0FBVztJQUNYLGNBQWM7SUFDZCxTQUFTO0lBQ1QsUUFBUTtJQUNSLFdBQVc7SUFDWCxZQUFZO0lBQ1osY0FBYztJQUNkLFNBQVM7SUFDVCxVQUFVO0lBQ1YsVUFBVTtJQUNWLFdBQVc7SUFDWCxVQUFVO0lBQ1YsUUFBUTtJQUNSLFdBQVc7SUFDWCxVQUFVO0lBQ1YsV0FBVztJQUNYLGNBQWM7SUFDZCxnQkFBZ0I7SUFDaEIsV0FBVztDQUNkLENBQUM7QUFFRixJQUFJLGdCQUFnQixHQUFHLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxlQUFlLENBQUMsQ0FBQztBQUVoRSxJQUFJLFlBQVksR0FBRztJQUNmLE1BQU0sRUFBRSxDQUFDLFVBQVUsQ0FBQztJQUNwQixNQUFNLEVBQUUsRUFBRTtJQUNWLE9BQU8sRUFBRSxFQUFFO0lBQ1gsTUFBTSxFQUFFLENBQUMsTUFBTSxFQUFFLFFBQVEsQ0FBQztJQUMxQixNQUFNLEVBQUUsQ0FBQyxNQUFNLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLE9BQU8sQ0FBQztJQUM3RCxNQUFNLEVBQUUsQ0FBQyxZQUFZLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxTQUFTLENBQUM7SUFDcEQsT0FBTyxFQUFFLENBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxRQUFRLENBQUM7SUFDcEMsUUFBUSxFQUFFLENBQUMsU0FBUyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLE9BQU8sQ0FBQztJQUN0RCxVQUFVLEVBQUUsQ0FBQyxNQUFNLENBQUM7SUFDcEIsTUFBTSxFQUFFLENBQUMsY0FBYyxFQUFFLGVBQWUsRUFBRSxnQkFBZ0IsRUFBRSxjQUFjLEVBQUUsV0FBVyxFQUFFLFdBQVcsRUFBRSxZQUFZLEVBQUUsUUFBUSxFQUFFLFVBQVUsRUFBRSxXQUFXLEVBQUUsUUFBUSxFQUFFLFVBQVUsQ0FBQztJQUM1SyxTQUFTLEVBQUUsRUFBRTtJQUNiLEtBQUssRUFBRSxFQUFFO0lBQ1QsU0FBUyxFQUFFLENBQUMsU0FBUyxDQUFDO0lBQ3RCLE9BQU8sRUFBRSxFQUFFO0lBQ1gsSUFBSSxFQUFFLEVBQUU7SUFDUixJQUFJLEVBQUUsRUFBRTtJQUNSLElBQUksRUFBRSxFQUFFO0lBQ1IsSUFBSSxFQUFFLEVBQUU7SUFDUixJQUFJLEVBQUUsRUFBRTtJQUNSLElBQUksRUFBRSxFQUFFO0lBQ1IsUUFBUSxFQUFFLEVBQUU7SUFDWixRQUFRLEVBQUUsRUFBRTtJQUNaLFNBQVMsRUFBRSxFQUFFO0lBQ2IsTUFBTSxFQUFFLEVBQUU7SUFDVixHQUFHLEVBQUUsRUFBRTtJQUNQLElBQUksRUFBRSxFQUFFO0lBQ1IsS0FBSyxFQUFFLEVBQUU7SUFDVCxZQUFZLEVBQUUsQ0FBQyxNQUFNLENBQUM7SUFDdEIsSUFBSSxFQUFFLENBQUMsT0FBTyxFQUFFLFVBQVUsQ0FBQztJQUMzQixJQUFJLEVBQUUsRUFBRTtJQUNSLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQztJQUNmLElBQUksRUFBRSxFQUFFO0lBQ1IsSUFBSSxFQUFFLEVBQUU7SUFDUixJQUFJLEVBQUUsRUFBRTtJQUNSLFFBQVEsRUFBRSxFQUFFO0lBQ1osWUFBWSxFQUFFLEVBQUU7SUFDaEIsS0FBSyxFQUFFLEVBQUU7SUFDVCxHQUFHLEVBQUUsQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLENBQUM7SUFDbkUsSUFBSSxFQUFFLEVBQUU7SUFDUixRQUFRLEVBQUUsRUFBRTtJQUNaLE9BQU8sRUFBRSxFQUFFO0lBQ1gsR0FBRyxFQUFFLEVBQUU7SUFDUCxNQUFNLEVBQUUsRUFBRTtJQUNWLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQztJQUNiLEtBQUssRUFBRSxFQUFFO0lBQ1QsTUFBTSxFQUFFLEVBQUU7SUFDVixNQUFNLEVBQUUsRUFBRTtJQUNWLE1BQU0sRUFBRSxDQUFDLFVBQVUsQ0FBQztJQUNwQixNQUFNLEVBQUUsRUFBRTtJQUNWLEtBQUssRUFBRSxFQUFFO0lBQ1QsTUFBTSxFQUFFLEVBQUU7SUFDVixLQUFLLEVBQUUsRUFBRTtJQUNULEtBQUssRUFBRSxFQUFFO0lBQ1QsS0FBSyxFQUFFLEVBQUU7SUFDVCxHQUFHLEVBQUUsRUFBRTtJQUNQLEdBQUcsRUFBRSxFQUFFO0lBQ1AsR0FBRyxFQUFFLEVBQUU7SUFDUCxNQUFNLEVBQUUsRUFBRTtJQUNWLE1BQU0sRUFBRSxFQUFFO0lBQ1YsSUFBSSxFQUFFLEVBQUU7SUFDUixJQUFJLEVBQUUsRUFBRTtJQUNSLEtBQUssRUFBRSxFQUFFO0lBQ1QsS0FBSyxFQUFFLEVBQUU7SUFDVCxNQUFNLEVBQUUsRUFBRTtJQUNWLElBQUksRUFBRSxFQUFFO0lBQ1IsS0FBSyxFQUFFLEVBQUU7SUFDVCxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsVUFBVSxDQUFDO0lBQzNCLEtBQUssRUFBRSxDQUFDLE1BQU0sRUFBRSxVQUFVLENBQUM7SUFDM0IsS0FBSyxFQUFFLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxPQUFPLENBQUM7SUFDM0QsUUFBUSxFQUFFLENBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRSxVQUFVLENBQUM7SUFDbkUsT0FBTyxFQUFFLENBQUMsS0FBSyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsTUFBTSxDQUFDO0lBQzNDLFFBQVEsRUFBRSxDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsU0FBUyxDQUFDO0lBQzNGLE9BQU8sRUFBRSxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUM7SUFDMUIsT0FBTyxFQUFFLENBQUMsS0FBSyxFQUFFLFlBQVksRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLFFBQVEsQ0FBQztJQUMzRixPQUFPLEVBQUUsQ0FBQyxLQUFLLEVBQUUsWUFBWSxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUUsVUFBVSxDQUFDO0lBQzlELFFBQVEsRUFBRSxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsT0FBTyxDQUFDO0lBQ2xDLE9BQU8sRUFBRSxDQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLE9BQU8sRUFBRSxTQUFTLENBQUM7SUFDdkQsUUFBUSxFQUFFLENBQUMsT0FBTyxFQUFFLFFBQVEsQ0FBQztJQUM3QixLQUFLLEVBQUUsQ0FBQyxNQUFNLENBQUM7SUFDZixNQUFNLEVBQUUsQ0FBQyxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDaEcsS0FBSyxFQUFFLEVBQUU7SUFDVCxNQUFNLEVBQUUsRUFBRTtJQUNWLE9BQU8sRUFBRSxDQUFDLFNBQVMsQ0FBQztJQUNwQixTQUFTLEVBQUUsRUFBRTtJQUNiLFVBQVUsRUFBRSxDQUFDLE1BQU0sQ0FBQztJQUNwQixLQUFLLEVBQUUsQ0FBQyxNQUFNLENBQUM7SUFDZixPQUFPLEVBQUUsRUFBRTtJQUNYLE9BQU8sRUFBRSxFQUFFO0lBQ1gsT0FBTyxFQUFFLEVBQUU7SUFDWCxJQUFJLEVBQUUsRUFBRTtJQUNSLElBQUksRUFBRSxDQUFDLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxDQUFDO0lBQ3ZDLElBQUksRUFBRSxDQUFDLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLE9BQU8sQ0FBQztJQUNoRCxNQUFNLEVBQUUsQ0FBQyxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsY0FBYyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxRQUFRLENBQUM7SUFDekcsVUFBVSxFQUFFLENBQUMsVUFBVSxFQUFFLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDeEMsUUFBUSxFQUFFLEVBQUU7SUFDWixPQUFPLEVBQUUsQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDO0lBQ3hCLE9BQU8sRUFBRSxDQUFDLE1BQU0sRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLGNBQWMsRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsYUFBYSxFQUFFLFlBQVksRUFBRSxnQkFBZ0IsRUFBRSxZQUFZLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsV0FBVyxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLGFBQWEsRUFBRSxVQUFVLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsT0FBTyxDQUFDO0lBQ3pULFFBQVEsRUFBRSxDQUFDLFdBQVcsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxhQUFhLEVBQUUsWUFBWSxFQUFFLGdCQUFnQixFQUFFLFlBQVksRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLE1BQU0sQ0FBQztJQUMvSSxRQUFRLEVBQUUsQ0FBQyxXQUFXLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUN2RSxVQUFVLEVBQUUsRUFBRTtJQUNkLFVBQVUsRUFBRSxDQUFDLFVBQVUsRUFBRSxPQUFPLENBQUM7SUFDakMsUUFBUSxFQUFFLENBQUMsVUFBVSxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQUUsT0FBTyxDQUFDO0lBQ3BELFVBQVUsRUFBRSxDQUFDLFdBQVcsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLFdBQVcsRUFBRSxNQUFNLEVBQUUsYUFBYSxFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDakksUUFBUSxFQUFFLENBQUMsV0FBVyxFQUFFLFdBQVcsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxNQUFNLENBQUM7SUFDM0UsUUFBUSxFQUFFLENBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDakMsVUFBVSxFQUFFLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQztJQUM1QixPQUFPLEVBQUUsQ0FBQyxPQUFPLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFNBQVMsQ0FBQztJQUMxRCxTQUFTLEVBQUUsQ0FBQyxNQUFNLENBQUM7SUFDbkIsU0FBUyxFQUFFLEVBQUU7SUFDYixTQUFTLEVBQUUsQ0FBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxTQUFTLENBQUM7SUFDcEYsTUFBTSxFQUFFLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQztJQUN6QixRQUFRLEVBQUUsQ0FBQyxNQUFNLENBQUM7Q0FDckIsQ0FBQztBQUVGLElBQUksUUFBUSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7QUFFekMsWUFBWSxLQUFZLEVBQUUsSUFBWTtJQUNsQ0EsTUFBTUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsSUFBSUEsR0FBR0EsTUFBTUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7QUFDdERBLENBQUNBO0FBRUQscUJBQXFCLE9BQW9CLEVBQUUsR0FBYTtJQUNwREMsSUFBSUEsUUFBUUEsR0FBR0EsSUFBSUEsYUFBYUEsQ0FBQ0EsT0FBT0EsRUFBRUEsR0FBR0EsQ0FBQ0EsR0FBR0EsRUFBRUEsR0FBR0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0E7SUFDL0RBLElBQUlBLEtBQUtBLEdBQVVBLFFBQVFBLENBQUNBLGVBQWVBLEVBQUVBLENBQUNBO0lBQzlDQSxPQUFPQSxLQUFLQSxJQUFJQSxDQUFDQSxFQUFFQSxDQUFDQSxLQUFLQSxFQUFFQSxVQUFVQSxDQUFDQSxFQUFFQSxDQUFDQTtRQUNyQ0EsS0FBS0EsR0FBR0EsUUFBUUEsQ0FBQ0EsWUFBWUEsRUFBRUEsQ0FBQ0E7SUFDcENBLENBQUNBO0lBQ0RBLEVBQUVBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBO1FBQ05BLE1BQU1BLENBQUNBLEtBQUtBLENBQUNBLEtBQUtBLENBQUNBO0FBQzNCQSxDQUFDQTtBQUVEO0lBQ0lDO0lBRUFDLENBQUNBO0lBRURELGNBQWNBLENBQUNBLEtBQWFBLEVBQUVBLE9BQW9CQSxFQUFFQSxHQUFhQSxFQUFFQSxNQUFjQTtRQUM3RUUsSUFBSUEsS0FBS0EsR0FBR0EsT0FBT0EsQ0FBQ0EsVUFBVUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsR0FBR0EsRUFBRUEsR0FBR0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0E7UUFFcERBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBO1lBQ1BBLE1BQU1BLENBQUNBLEVBQUVBLENBQUNBO1FBR2RBLEVBQUVBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLEtBQUtBLEVBQUVBLFVBQVVBLENBQUNBLElBQUlBLEVBQUVBLENBQUNBLEtBQUtBLEVBQUVBLFVBQVVBLENBQUNBLElBQUlBLEVBQUVBLENBQUNBLEtBQUtBLEVBQUVBLGNBQWNBLENBQUNBLENBQUNBO1lBQzVFQSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxpQkFBaUJBLENBQUNBLEtBQUtBLEVBQUVBLE9BQU9BLEVBQUVBLEdBQUdBLEVBQUVBLE1BQU1BLENBQUNBLENBQUNBO1FBRy9EQSxFQUFFQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxLQUFLQSxFQUFFQSxnQkFBZ0JBLENBQUNBLElBQUlBLEVBQUVBLENBQUNBLEtBQUtBLEVBQUVBLGdCQUFnQkEsQ0FBQ0EsQ0FBQ0E7WUFDM0RBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLHNCQUFzQkEsQ0FBQ0EsS0FBS0EsRUFBRUEsT0FBT0EsRUFBRUEsR0FBR0EsRUFBRUEsTUFBTUEsQ0FBQ0EsQ0FBQ0E7UUFFcEVBLE1BQU1BLENBQUNBLEVBQUVBLENBQUNBO0lBQ2RBLENBQUNBO0lBRURGLGlCQUFpQkEsQ0FBQ0EsS0FBYUEsRUFBRUEsT0FBb0JBLEVBQUVBLEdBQWFBLEVBQUVBLE1BQWNBO1FBQ2hGRyxNQUFNQSxDQUFDQSxRQUFRQSxDQUFDQSxHQUFHQSxDQUFDQSxVQUFTQSxPQUFlQTtZQUN4QyxNQUFNLENBQUM7Z0JBQ0gsS0FBSyxFQUFFLE9BQU87Z0JBQ2QsSUFBSSxFQUFFLEtBQUs7Z0JBQ1gsS0FBSyxFQUFFLE1BQU0sQ0FBQyxTQUFTO2FBQzFCLENBQUM7UUFDTixDQUFDLENBQUNBLENBQUNBO0lBQ1BBLENBQUNBO0lBRURILHNCQUFzQkEsQ0FBQ0EsS0FBYUEsRUFBRUEsT0FBb0JBLEVBQUVBLEdBQWFBLEVBQUVBLE1BQWNBO1FBQ3JGSSxJQUFJQSxPQUFPQSxHQUFHQSxXQUFXQSxDQUFDQSxPQUFPQSxFQUFFQSxHQUFHQSxDQUFDQSxDQUFDQTtRQUN4Q0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsT0FBT0EsQ0FBQ0E7WUFDVEEsTUFBTUEsQ0FBQ0EsRUFBRUEsQ0FBQ0E7UUFDZEEsSUFBSUEsVUFBVUEsR0FBR0EsZ0JBQWdCQSxDQUFDQTtRQUNsQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsT0FBT0EsSUFBSUEsWUFBWUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDMUJBLFVBQVVBLEdBQUdBLFVBQVVBLENBQUNBLE1BQU1BLENBQUNBLFlBQVlBLENBQUNBLE9BQU9BLENBQUNBLENBQUNBLENBQUNBO1FBQzFEQSxDQUFDQTtRQUNEQSxNQUFNQSxDQUFDQSxVQUFVQSxDQUFDQSxHQUFHQSxDQUFDQSxVQUFTQSxTQUFTQTtZQUNwQyxNQUFNLENBQUM7Z0JBQ0gsT0FBTyxFQUFFLFNBQVM7Z0JBQ2xCLE9BQU8sRUFBRSxTQUFTLEdBQUcsT0FBTztnQkFDNUIsSUFBSSxFQUFFLFdBQVc7Z0JBQ2pCLEtBQUssRUFBRSxNQUFNLENBQUMsU0FBUzthQUMxQixDQUFDO1FBQ04sQ0FBQyxDQUFDQSxDQUFDQTtJQUNQQSxDQUFDQTtBQUNMSixDQUFDQTtBQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLyogKioqKiogQkVHSU4gTElDRU5TRSBCTE9DSyAqKioqKlxuICogVGhlIE1JVCBMaWNlbnNlIChNSVQpXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LTIwMTYgRGF2aWQgR2VvIEhvbG1lcyA8ZGF2aWQuZ2VvLmhvbG1lc0BnbWFpbC5jb20+XG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuICogb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuICogaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xuICogdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuICogY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4gKiBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluIGFsbFxuICogY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuICogQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbiAqIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFXG4gKiBTT0ZUV0FSRS5cbiAqICoqKioqIEVORCBMSUNFTlNFIEJMT0NLICoqKioqICovXG4vKiAqKioqKiBCRUdJTiBMSUNFTlNFIEJMT0NLICoqKioqXG4gKiBEaXN0cmlidXRlZCB1bmRlciB0aGUgQlNEIGxpY2Vuc2U6XG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDEwLCBBamF4Lm9yZyBCLlYuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogXG4gKiBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbiAqIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuICogICAgICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHRcbiAqICAgICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbiAqICAgICAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0XG4gKiAgICAgICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlXG4gKiAgICAgICBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuICogICAgICogTmVpdGhlciB0aGUgbmFtZSBvZiBBamF4Lm9yZyBCLlYuIG5vciB0aGVcbiAqICAgICAgIG5hbWVzIG9mIGl0cyBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzXG4gKiAgICAgICBkZXJpdmVkIGZyb20gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi5cbiAqIFxuICogVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCIgQU5EXG4gKiBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRFxuICogV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRVxuICogRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgQUpBWC5PUkcgQi5WLiBCRSBMSUFCTEUgRk9SIEFOWVxuICogRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVNcbiAqIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUztcbiAqIExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORFxuICogT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlRcbiAqIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTXG4gKiBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cbiAqXG4gKiAqKioqKiBFTkQgTElDRU5TRSBCTE9DSyAqKioqKiAqL1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCBDb21wbGV0aW9uIGZyb20gXCIuLi9Db21wbGV0aW9uXCI7XG5pbXBvcnQgRWRpdFNlc3Npb24gZnJvbSBcIi4uL0VkaXRTZXNzaW9uXCI7XG5pbXBvcnQgUG9zaXRpb24gZnJvbSBcIi4uL1Bvc2l0aW9uXCI7XG5pbXBvcnQgVG9rZW4gZnJvbSBcIi4uL1Rva2VuXCI7XG5pbXBvcnQgVG9rZW5JdGVyYXRvciBmcm9tIFwiLi4vVG9rZW5JdGVyYXRvclwiO1xuXG52YXIgY29tbW9uQXR0cmlidXRlcyA9IFtcbiAgICBcImFjY2Vzc2tleVwiLFxuICAgIFwiY2xhc3NcIixcbiAgICBcImNvbnRlbnRlZGl0YWJsZVwiLFxuICAgIFwiY29udGV4dG1lbnVcIixcbiAgICBcImRpclwiLFxuICAgIFwiZHJhZ2dhYmxlXCIsXG4gICAgXCJkcm9wem9uZVwiLFxuICAgIFwiaGlkZGVuXCIsXG4gICAgXCJpZFwiLFxuICAgIFwiaW5lcnRcIixcbiAgICBcIml0ZW1pZFwiLFxuICAgIFwiaXRlbXByb3BcIixcbiAgICBcIml0ZW1yZWZcIixcbiAgICBcIml0ZW1zY29wZVwiLFxuICAgIFwiaXRlbXR5cGVcIixcbiAgICBcImxhbmdcIixcbiAgICBcInNwZWxsY2hlY2tcIixcbiAgICBcInN0eWxlXCIsXG4gICAgXCJ0YWJpbmRleFwiLFxuICAgIFwidGl0bGVcIixcbiAgICBcInRyYW5zbGF0ZVwiXG5dO1xuXG52YXIgZXZlbnRBdHRyaWJ1dGVzID0gW1xuICAgIFwib25hYm9ydFwiLFxuICAgIFwib25ibHVyXCIsXG4gICAgXCJvbmNhbmNlbFwiLFxuICAgIFwib25jYW5wbGF5XCIsXG4gICAgXCJvbmNhbnBsYXl0aHJvdWdoXCIsXG4gICAgXCJvbmNoYW5nZVwiLFxuICAgIFwib25jbGlja1wiLFxuICAgIFwib25jbG9zZVwiLFxuICAgIFwib25jb250ZXh0bWVudVwiLFxuICAgIFwib25jdWVjaGFuZ2VcIixcbiAgICBcIm9uZGJsY2xpY2tcIixcbiAgICBcIm9uZHJhZ1wiLFxuICAgIFwib25kcmFnZW5kXCIsXG4gICAgXCJvbmRyYWdlbnRlclwiLFxuICAgIFwib25kcmFnbGVhdmVcIixcbiAgICBcIm9uZHJhZ292ZXJcIixcbiAgICBcIm9uZHJhZ3N0YXJ0XCIsXG4gICAgXCJvbmRyb3BcIixcbiAgICBcIm9uZHVyYXRpb25jaGFuZ2VcIixcbiAgICBcIm9uZW1wdGllZFwiLFxuICAgIFwib25lbmRlZFwiLFxuICAgIFwib25lcnJvclwiLFxuICAgIFwib25mb2N1c1wiLFxuICAgIFwib25pbnB1dFwiLFxuICAgIFwib25pbnZhbGlkXCIsXG4gICAgXCJvbmtleWRvd25cIixcbiAgICBcIm9ua2V5cHJlc3NcIixcbiAgICBcIm9ua2V5dXBcIixcbiAgICBcIm9ubG9hZFwiLFxuICAgIFwib25sb2FkZWRkYXRhXCIsXG4gICAgXCJvbmxvYWRlZG1ldGFkYXRhXCIsXG4gICAgXCJvbmxvYWRzdGFydFwiLFxuICAgIFwib25tb3VzZWRvd25cIixcbiAgICBcIm9ubW91c2Vtb3ZlXCIsXG4gICAgXCJvbm1vdXNlb3V0XCIsXG4gICAgXCJvbm1vdXNlb3ZlclwiLFxuICAgIFwib25tb3VzZXVwXCIsXG4gICAgXCJvbm1vdXNld2hlZWxcIixcbiAgICBcIm9ucGF1c2VcIixcbiAgICBcIm9ucGxheVwiLFxuICAgIFwib25wbGF5aW5nXCIsXG4gICAgXCJvbnByb2dyZXNzXCIsXG4gICAgXCJvbnJhdGVjaGFuZ2VcIixcbiAgICBcIm9ucmVzZXRcIixcbiAgICBcIm9uc2Nyb2xsXCIsXG4gICAgXCJvbnNlZWtlZFwiLFxuICAgIFwib25zZWVraW5nXCIsXG4gICAgXCJvbnNlbGVjdFwiLFxuICAgIFwib25zaG93XCIsXG4gICAgXCJvbnN0YWxsZWRcIixcbiAgICBcIm9uc3VibWl0XCIsXG4gICAgXCJvbnN1c3BlbmRcIixcbiAgICBcIm9udGltZXVwZGF0ZVwiLFxuICAgIFwib252b2x1bWVjaGFuZ2VcIixcbiAgICBcIm9ud2FpdGluZ1wiXG5dO1xuXG52YXIgZ2xvYmFsQXR0cmlidXRlcyA9IGNvbW1vbkF0dHJpYnV0ZXMuY29uY2F0KGV2ZW50QXR0cmlidXRlcyk7XG5cbnZhciBhdHRyaWJ1dGVNYXAgPSB7XG4gICAgXCJodG1sXCI6IFtcIm1hbmlmZXN0XCJdLFxuICAgIFwiaGVhZFwiOiBbXSxcbiAgICBcInRpdGxlXCI6IFtdLFxuICAgIFwiYmFzZVwiOiBbXCJocmVmXCIsIFwidGFyZ2V0XCJdLFxuICAgIFwibGlua1wiOiBbXCJocmVmXCIsIFwiaHJlZmxhbmdcIiwgXCJyZWxcIiwgXCJtZWRpYVwiLCBcInR5cGVcIiwgXCJzaXplc1wiXSxcbiAgICBcIm1ldGFcIjogW1wiaHR0cC1lcXVpdlwiLCBcIm5hbWVcIiwgXCJjb250ZW50XCIsIFwiY2hhcnNldFwiXSxcbiAgICBcInN0eWxlXCI6IFtcInR5cGVcIiwgXCJtZWRpYVwiLCBcInNjb3BlZFwiXSxcbiAgICBcInNjcmlwdFwiOiBbXCJjaGFyc2V0XCIsIFwidHlwZVwiLCBcInNyY1wiLCBcImRlZmVyXCIsIFwiYXN5bmNcIl0sXG4gICAgXCJub3NjcmlwdFwiOiBbXCJocmVmXCJdLFxuICAgIFwiYm9keVwiOiBbXCJvbmFmdGVycHJpbnRcIiwgXCJvbmJlZm9yZXByaW50XCIsIFwib25iZWZvcmV1bmxvYWRcIiwgXCJvbmhhc2hjaGFuZ2VcIiwgXCJvbm1lc3NhZ2VcIiwgXCJvbm9mZmxpbmVcIiwgXCJvbnBvcHN0YXRlXCIsIFwib25yZWRvXCIsIFwib25yZXNpemVcIiwgXCJvbnN0b3JhZ2VcIiwgXCJvbnVuZG9cIiwgXCJvbnVubG9hZFwiXSxcbiAgICBcInNlY3Rpb25cIjogW10sXG4gICAgXCJuYXZcIjogW10sXG4gICAgXCJhcnRpY2xlXCI6IFtcInB1YmRhdGVcIl0sXG4gICAgXCJhc2lkZVwiOiBbXSxcbiAgICBcImgxXCI6IFtdLFxuICAgIFwiaDJcIjogW10sXG4gICAgXCJoM1wiOiBbXSxcbiAgICBcImg0XCI6IFtdLFxuICAgIFwiaDVcIjogW10sXG4gICAgXCJoNlwiOiBbXSxcbiAgICBcImhlYWRlclwiOiBbXSxcbiAgICBcImZvb3RlclwiOiBbXSxcbiAgICBcImFkZHJlc3NcIjogW10sXG4gICAgXCJtYWluXCI6IFtdLFxuICAgIFwicFwiOiBbXSxcbiAgICBcImhyXCI6IFtdLFxuICAgIFwicHJlXCI6IFtdLFxuICAgIFwiYmxvY2txdW90ZVwiOiBbXCJjaXRlXCJdLFxuICAgIFwib2xcIjogW1wic3RhcnRcIiwgXCJyZXZlcnNlZFwiXSxcbiAgICBcInVsXCI6IFtdLFxuICAgIFwibGlcIjogW1widmFsdWVcIl0sXG4gICAgXCJkbFwiOiBbXSxcbiAgICBcImR0XCI6IFtdLFxuICAgIFwiZGRcIjogW10sXG4gICAgXCJmaWd1cmVcIjogW10sXG4gICAgXCJmaWdjYXB0aW9uXCI6IFtdLFxuICAgIFwiZGl2XCI6IFtdLFxuICAgIFwiYVwiOiBbXCJocmVmXCIsIFwidGFyZ2V0XCIsIFwicGluZ1wiLCBcInJlbFwiLCBcIm1lZGlhXCIsIFwiaHJlZmxhbmdcIiwgXCJ0eXBlXCJdLFxuICAgIFwiZW1cIjogW10sXG4gICAgXCJzdHJvbmdcIjogW10sXG4gICAgXCJzbWFsbFwiOiBbXSxcbiAgICBcInNcIjogW10sXG4gICAgXCJjaXRlXCI6IFtdLFxuICAgIFwicVwiOiBbXCJjaXRlXCJdLFxuICAgIFwiZGZuXCI6IFtdLFxuICAgIFwiYWJiclwiOiBbXSxcbiAgICBcImRhdGFcIjogW10sXG4gICAgXCJ0aW1lXCI6IFtcImRhdGV0aW1lXCJdLFxuICAgIFwiY29kZVwiOiBbXSxcbiAgICBcInZhclwiOiBbXSxcbiAgICBcInNhbXBcIjogW10sXG4gICAgXCJrYmRcIjogW10sXG4gICAgXCJzdWJcIjogW10sXG4gICAgXCJzdXBcIjogW10sXG4gICAgXCJpXCI6IFtdLFxuICAgIFwiYlwiOiBbXSxcbiAgICBcInVcIjogW10sXG4gICAgXCJtYXJrXCI6IFtdLFxuICAgIFwicnVieVwiOiBbXSxcbiAgICBcInJ0XCI6IFtdLFxuICAgIFwicnBcIjogW10sXG4gICAgXCJiZGlcIjogW10sXG4gICAgXCJiZG9cIjogW10sXG4gICAgXCJzcGFuXCI6IFtdLFxuICAgIFwiYnJcIjogW10sXG4gICAgXCJ3YnJcIjogW10sXG4gICAgXCJpbnNcIjogW1wiY2l0ZVwiLCBcImRhdGV0aW1lXCJdLFxuICAgIFwiZGVsXCI6IFtcImNpdGVcIiwgXCJkYXRldGltZVwiXSxcbiAgICBcImltZ1wiOiBbXCJhbHRcIiwgXCJzcmNcIiwgXCJoZWlnaHRcIiwgXCJ3aWR0aFwiLCBcInVzZW1hcFwiLCBcImlzbWFwXCJdLFxuICAgIFwiaWZyYW1lXCI6IFtcIm5hbWVcIiwgXCJzcmNcIiwgXCJoZWlnaHRcIiwgXCJ3aWR0aFwiLCBcInNhbmRib3hcIiwgXCJzZWFtbGVzc1wiXSxcbiAgICBcImVtYmVkXCI6IFtcInNyY1wiLCBcImhlaWdodFwiLCBcIndpZHRoXCIsIFwidHlwZVwiXSxcbiAgICBcIm9iamVjdFwiOiBbXCJwYXJhbVwiLCBcImRhdGFcIiwgXCJ0eXBlXCIsIFwiaGVpZ2h0XCIsIFwid2lkdGhcIiwgXCJ1c2VtYXBcIiwgXCJuYW1lXCIsIFwiZm9ybVwiLCBcImNsYXNzaWRcIl0sXG4gICAgXCJwYXJhbVwiOiBbXCJuYW1lXCIsIFwidmFsdWVcIl0sXG4gICAgXCJ2aWRlb1wiOiBbXCJzcmNcIiwgXCJhdXRvYnVmZmVyXCIsIFwiYXV0b3BsYXlcIiwgXCJsb29wXCIsIFwiY29udHJvbHNcIiwgXCJ3aWR0aFwiLCBcImhlaWdodFwiLCBcInBvc3RlclwiXSxcbiAgICBcImF1ZGlvXCI6IFtcInNyY1wiLCBcImF1dG9idWZmZXJcIiwgXCJhdXRvcGxheVwiLCBcImxvb3BcIiwgXCJjb250cm9sc1wiXSxcbiAgICBcInNvdXJjZVwiOiBbXCJzcmNcIiwgXCJ0eXBlXCIsIFwibWVkaWFcIl0sXG4gICAgXCJ0cmFja1wiOiBbXCJraW5kXCIsIFwic3JjXCIsIFwic3JjbGFuZ1wiLCBcImxhYmVsXCIsIFwiZGVmYXVsdFwiXSxcbiAgICBcImNhbnZhc1wiOiBbXCJ3aWR0aFwiLCBcImhlaWdodFwiXSxcbiAgICBcIm1hcFwiOiBbXCJuYW1lXCJdLFxuICAgIFwiYXJlYVwiOiBbXCJzaGFwZVwiLCBcImNvb3Jkc1wiLCBcImhyZWZcIiwgXCJocmVmbGFuZ1wiLCBcImFsdFwiLCBcInRhcmdldFwiLCBcIm1lZGlhXCIsIFwicmVsXCIsIFwicGluZ1wiLCBcInR5cGVcIl0sXG4gICAgXCJzdmdcIjogW10sXG4gICAgXCJtYXRoXCI6IFtdLFxuICAgIFwidGFibGVcIjogW1wic3VtbWFyeVwiXSxcbiAgICBcImNhcHRpb25cIjogW10sXG4gICAgXCJjb2xncm91cFwiOiBbXCJzcGFuXCJdLFxuICAgIFwiY29sXCI6IFtcInNwYW5cIl0sXG4gICAgXCJ0Ym9keVwiOiBbXSxcbiAgICBcInRoZWFkXCI6IFtdLFxuICAgIFwidGZvb3RcIjogW10sXG4gICAgXCJ0clwiOiBbXSxcbiAgICBcInRkXCI6IFtcImhlYWRlcnNcIiwgXCJyb3dzcGFuXCIsIFwiY29sc3BhblwiXSxcbiAgICBcInRoXCI6IFtcImhlYWRlcnNcIiwgXCJyb3dzcGFuXCIsIFwiY29sc3BhblwiLCBcInNjb3BlXCJdLFxuICAgIFwiZm9ybVwiOiBbXCJhY2NlcHQtY2hhcnNldFwiLCBcImFjdGlvblwiLCBcImF1dG9jb21wbGV0ZVwiLCBcImVuY3R5cGVcIiwgXCJtZXRob2RcIiwgXCJuYW1lXCIsIFwibm92YWxpZGF0ZVwiLCBcInRhcmdldFwiXSxcbiAgICBcImZpZWxkc2V0XCI6IFtcImRpc2FibGVkXCIsIFwiZm9ybVwiLCBcIm5hbWVcIl0sXG4gICAgXCJsZWdlbmRcIjogW10sXG4gICAgXCJsYWJlbFwiOiBbXCJmb3JtXCIsIFwiZm9yXCJdLFxuICAgIFwiaW5wdXRcIjogW1widHlwZVwiLCBcImFjY2VwdFwiLCBcImFsdFwiLCBcImF1dG9jb21wbGV0ZVwiLCBcImNoZWNrZWRcIiwgXCJkaXNhYmxlZFwiLCBcImZvcm1cIiwgXCJmb3JtYWN0aW9uXCIsIFwiZm9ybWVuY3R5cGVcIiwgXCJmb3JtbWV0aG9kXCIsIFwiZm9ybW5vdmFsaWRhdGVcIiwgXCJmb3JtdGFyZ2V0XCIsIFwiaGVpZ2h0XCIsIFwibGlzdFwiLCBcIm1heFwiLCBcIm1heGxlbmd0aFwiLCBcIm1pblwiLCBcIm11bHRpcGxlXCIsIFwicGF0dGVyblwiLCBcInBsYWNlaG9sZGVyXCIsIFwicmVhZG9ubHlcIiwgXCJyZXF1aXJlZFwiLCBcInNpemVcIiwgXCJzcmNcIiwgXCJzdGVwXCIsIFwid2lkdGhcIiwgXCJmaWxlc1wiLCBcInZhbHVlXCJdLFxuICAgIFwiYnV0dG9uXCI6IFtcImF1dG9mb2N1c1wiLCBcImRpc2FibGVkXCIsIFwiZm9ybVwiLCBcImZvcm1hY3Rpb25cIiwgXCJmb3JtZW5jdHlwZVwiLCBcImZvcm1tZXRob2RcIiwgXCJmb3Jtbm92YWxpZGF0ZVwiLCBcImZvcm10YXJnZXRcIiwgXCJuYW1lXCIsIFwidmFsdWVcIiwgXCJ0eXBlXCJdLFxuICAgIFwic2VsZWN0XCI6IFtcImF1dG9mb2N1c1wiLCBcImRpc2FibGVkXCIsIFwiZm9ybVwiLCBcIm11bHRpcGxlXCIsIFwibmFtZVwiLCBcInNpemVcIl0sXG4gICAgXCJkYXRhbGlzdFwiOiBbXSxcbiAgICBcIm9wdGdyb3VwXCI6IFtcImRpc2FibGVkXCIsIFwibGFiZWxcIl0sXG4gICAgXCJvcHRpb25cIjogW1wiZGlzYWJsZWRcIiwgXCJzZWxlY3RlZFwiLCBcImxhYmVsXCIsIFwidmFsdWVcIl0sXG4gICAgXCJ0ZXh0YXJlYVwiOiBbXCJhdXRvZm9jdXNcIiwgXCJkaXNhYmxlZFwiLCBcImZvcm1cIiwgXCJtYXhsZW5ndGhcIiwgXCJuYW1lXCIsIFwicGxhY2Vob2xkZXJcIiwgXCJyZWFkb25seVwiLCBcInJlcXVpcmVkXCIsIFwicm93c1wiLCBcImNvbHNcIiwgXCJ3cmFwXCJdLFxuICAgIFwia2V5Z2VuXCI6IFtcImF1dG9mb2N1c1wiLCBcImNoYWxsZW5nZVwiLCBcImRpc2FibGVkXCIsIFwiZm9ybVwiLCBcImtleXR5cGVcIiwgXCJuYW1lXCJdLFxuICAgIFwib3V0cHV0XCI6IFtcImZvclwiLCBcImZvcm1cIiwgXCJuYW1lXCJdLFxuICAgIFwicHJvZ3Jlc3NcIjogW1widmFsdWVcIiwgXCJtYXhcIl0sXG4gICAgXCJtZXRlclwiOiBbXCJ2YWx1ZVwiLCBcIm1pblwiLCBcIm1heFwiLCBcImxvd1wiLCBcImhpZ2hcIiwgXCJvcHRpbXVtXCJdLFxuICAgIFwiZGV0YWlsc1wiOiBbXCJvcGVuXCJdLFxuICAgIFwic3VtbWFyeVwiOiBbXSxcbiAgICBcImNvbW1hbmRcIjogW1widHlwZVwiLCBcImxhYmVsXCIsIFwiaWNvblwiLCBcImRpc2FibGVkXCIsIFwiY2hlY2tlZFwiLCBcInJhZGlvZ3JvdXBcIiwgXCJjb21tYW5kXCJdLFxuICAgIFwibWVudVwiOiBbXCJ0eXBlXCIsIFwibGFiZWxcIl0sXG4gICAgXCJkaWFsb2dcIjogW1wib3BlblwiXVxufTtcblxudmFyIGVsZW1lbnRzID0gT2JqZWN0LmtleXMoYXR0cmlidXRlTWFwKTtcblxuZnVuY3Rpb24gaXModG9rZW46IFRva2VuLCB0eXBlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdG9rZW4udHlwZS5sYXN0SW5kZXhPZih0eXBlICsgXCIueG1sXCIpID4gLTE7XG59XG5cbmZ1bmN0aW9uIGZpbmRUYWdOYW1lKHNlc3Npb246IEVkaXRTZXNzaW9uLCBwb3M6IFBvc2l0aW9uKTogc3RyaW5nIHtcbiAgICB2YXIgaXRlcmF0b3IgPSBuZXcgVG9rZW5JdGVyYXRvcihzZXNzaW9uLCBwb3Mucm93LCBwb3MuY29sdW1uKTtcbiAgICB2YXIgdG9rZW46IFRva2VuID0gaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuKCk7XG4gICAgd2hpbGUgKHRva2VuICYmICFpcyh0b2tlbiwgXCJ0YWctbmFtZVwiKSkge1xuICAgICAgICB0b2tlbiA9IGl0ZXJhdG9yLnN0ZXBCYWNrd2FyZCgpO1xuICAgIH1cbiAgICBpZiAodG9rZW4pXG4gICAgICAgIHJldHVybiB0b2tlbi52YWx1ZTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSHRtbENvbXBsZXRpb25zIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcblxuICAgIH1cblxuICAgIGdldENvbXBsZXRpb25zKHN0YXRlOiBzdHJpbmcsIHNlc3Npb246IEVkaXRTZXNzaW9uLCBwb3M6IFBvc2l0aW9uLCBwcmVmaXg6IHN0cmluZyk6IENvbXBsZXRpb25bXSB7XG4gICAgICAgIHZhciB0b2tlbiA9IHNlc3Npb24uZ2V0VG9rZW5BdChwb3Mucm93LCBwb3MuY29sdW1uKTtcblxuICAgICAgICBpZiAoIXRva2VuKVxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuXG4gICAgICAgIC8vIHRhZyBuYW1lXG4gICAgICAgIGlmIChpcyh0b2tlbiwgXCJ0YWctbmFtZVwiKSB8fCBpcyh0b2tlbiwgXCJ0YWctb3BlblwiKSB8fCBpcyh0b2tlbiwgXCJlbmQtdGFnLW9wZW5cIikpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUYWdDb21wbGV0aW9ucyhzdGF0ZSwgc2Vzc2lvbiwgcG9zLCBwcmVmaXgpO1xuXG4gICAgICAgIC8vIHRhZyBhdHRyaWJ1dGVcbiAgICAgICAgaWYgKGlzKHRva2VuLCBcInRhZy13aGl0ZXNwYWNlXCIpIHx8IGlzKHRva2VuLCBcImF0dHJpYnV0ZS1uYW1lXCIpKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlQ29tcGV0aW9ucyhzdGF0ZSwgc2Vzc2lvbiwgcG9zLCBwcmVmaXgpO1xuXG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBnZXRUYWdDb21wbGV0aW9ucyhzdGF0ZTogc3RyaW5nLCBzZXNzaW9uOiBFZGl0U2Vzc2lvbiwgcG9zOiBQb3NpdGlvbiwgcHJlZml4OiBzdHJpbmcpOiBDb21wbGV0aW9uW10ge1xuICAgICAgICByZXR1cm4gZWxlbWVudHMubWFwKGZ1bmN0aW9uKGVsZW1lbnQ6IHN0cmluZykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogZWxlbWVudCxcbiAgICAgICAgICAgICAgICBtZXRhOiBcInRhZ1wiLFxuICAgICAgICAgICAgICAgIHNjb3JlOiBOdW1iZXIuTUFYX1ZBTFVFXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRBdHRyaWJ1dGVDb21wZXRpb25zKHN0YXRlOiBzdHJpbmcsIHNlc3Npb246IEVkaXRTZXNzaW9uLCBwb3M6IFBvc2l0aW9uLCBwcmVmaXg6IHN0cmluZyk6IENvbXBsZXRpb25bXSB7XG4gICAgICAgIHZhciB0YWdOYW1lID0gZmluZFRhZ05hbWUoc2Vzc2lvbiwgcG9zKTtcbiAgICAgICAgaWYgKCF0YWdOYW1lKVxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB2YXIgYXR0cmlidXRlcyA9IGdsb2JhbEF0dHJpYnV0ZXM7XG4gICAgICAgIGlmICh0YWdOYW1lIGluIGF0dHJpYnV0ZU1hcCkge1xuICAgICAgICAgICAgYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXMuY29uY2F0KGF0dHJpYnV0ZU1hcFt0YWdOYW1lXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZXMubWFwKGZ1bmN0aW9uKGF0dHJpYnV0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBjYXB0aW9uOiBhdHRyaWJ1dGUsXG4gICAgICAgICAgICAgICAgc25pcHBldDogYXR0cmlidXRlICsgJz1cIiQwXCInLFxuICAgICAgICAgICAgICAgIG1ldGE6IFwiYXR0cmlidXRlXCIsXG4gICAgICAgICAgICAgICAgc2NvcmU6IE51bWJlci5NQVhfVkFMVUVcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiJdfQ==