"use strict";
import Range from '../Range';
export default class EditorPosition {
    constructor(editor) {
        this.editor = editor;
    }
    getPositionChars(pos) {
        var doc = this.editor.getSession().getDocument();
        return EditorPosition.getChars(doc, pos);
    }
    getPositionFromChars(chars) {
        var doc = this.editor.getSession().getDocument();
        return EditorPosition.getPosition(doc, chars);
    }
    getCurrentPositionChars() {
        return this.getPositionChars(this.editor.getCursorPosition());
    }
    getCurrentLeftChar() {
        return this.getPositionLeftChar(this.editor.getCursorPosition());
    }
    getTextAtCursorPosition(cursor) {
        var range = new Range(cursor.row, cursor.column, cursor.row, cursor.column + 1);
        return this.editor.getSession().getDocument().getTextRange(range);
    }
    getPositionLeftChar(cursor) {
        var range = new Range(cursor.row, cursor.column, cursor.row, cursor.column - 1);
        return this.editor.getSession().getDocument().getTextRange(range);
    }
    static getPosition(doc, chars) {
        var i;
        var line;
        var lines = doc.getAllLines();
        var count = 0;
        var row = 0;
        for (i in lines) {
            line = lines[i];
            if (chars < (count + (line.length + 1))) {
                return { row: row, column: chars - count };
            }
            count += line.length + 1;
            row += 1;
        }
        return { row: row, column: chars - count };
    }
    static getChars(doc, pos) {
        return EditorPosition.getLinesChars(doc.getLines(0, pos.row - 1)) + pos.column;
    }
    static getLinesChars(lines) {
        var count = 0;
        lines.forEach(function (line) {
            return count += line.length + 1;
        });
        return count;
    }
    static getPositionChars(editor, pos) {
        var doc = editor.getSession().getDocument();
        return EditorPosition.getChars(doc, pos);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRWRpdG9yUG9zaXRpb24uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJFZGl0b3JQb3NpdGlvbi50cyJdLCJuYW1lcyI6WyJFZGl0b3JQb3NpdGlvbiIsIkVkaXRvclBvc2l0aW9uLmNvbnN0cnVjdG9yIiwiRWRpdG9yUG9zaXRpb24uZ2V0UG9zaXRpb25DaGFycyIsIkVkaXRvclBvc2l0aW9uLmdldFBvc2l0aW9uRnJvbUNoYXJzIiwiRWRpdG9yUG9zaXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uQ2hhcnMiLCJFZGl0b3JQb3NpdGlvbi5nZXRDdXJyZW50TGVmdENoYXIiLCJFZGl0b3JQb3NpdGlvbi5nZXRUZXh0QXRDdXJzb3JQb3NpdGlvbiIsIkVkaXRvclBvc2l0aW9uLmdldFBvc2l0aW9uTGVmdENoYXIiLCJFZGl0b3JQb3NpdGlvbi5nZXRQb3NpdGlvbiIsIkVkaXRvclBvc2l0aW9uLmdldENoYXJzIiwiRWRpdG9yUG9zaXRpb24uZ2V0TGluZXNDaGFycyJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDO09BS04sS0FBSyxNQUFNLFVBQVU7QUFPNUI7SUFFSUEsWUFBWUEsTUFBY0E7UUFDdEJDLElBQUlBLENBQUNBLE1BQU1BLEdBQUdBLE1BQU1BLENBQUNBO0lBQ3pCQSxDQUFDQTtJQUNERCxnQkFBZ0JBLENBQUNBLEdBQWFBO1FBQzFCRSxJQUFJQSxHQUFHQSxHQUFHQSxJQUFJQSxDQUFDQSxNQUFNQSxDQUFDQSxVQUFVQSxFQUFFQSxDQUFDQSxXQUFXQSxFQUFFQSxDQUFDQTtRQUNqREEsTUFBTUEsQ0FBQ0EsY0FBY0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsR0FBR0EsRUFBRUEsR0FBR0EsQ0FBQ0EsQ0FBQ0E7SUFDN0NBLENBQUNBO0lBQ0RGLG9CQUFvQkEsQ0FBQ0EsS0FBYUE7UUFDOUJHLElBQUlBLEdBQUdBLEdBQUdBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBLFVBQVVBLEVBQUVBLENBQUNBLFdBQVdBLEVBQUVBLENBQUNBO1FBQ2pEQSxN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LEVBQUVBLEdBQUdBLENBQUNBLEdBQUdBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEdBQUdBLEdBQUdBLENBQUNBLE1BQU1BLENBQUNBO0lBQ25GQSxDQUFDQTtJQUVEVCxPQUFPQSxhQUFhQSxDQUFDQSxLQUFlQTtRQUNoQ1UsSUFBSUEsS0FBS0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7UUFDZEEsS0FBS0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsVUFBU0EsSUFBSUE7WUFFdkIsTUFBTSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztRQUNwQyxDQUFDLENBQUNBLENBQUNBO1FBQ0hBLE1BQU1BLENBQUNBLEtBQUtBLENBQUNBO0lBQ2pCQSxDQUFDQTtJQUNEVixPQUFPQSxnQkFBZ0JBLENBQUNBLE1BQWNBLEVBQUVBLEdBQWFBO1FBQ2pERSxJQUFJQSxHQUFHQSxHQUFHQSxNQUFNQSxDQUFDQSxVQUFVQSxFQUFFQSxDQUFDQSxXQUFXQSxFQUFFQSxDQUFDQTtRQUM1Q0EsTUFBTUEsQ0FBQ0EsY0FBY0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsR0FBR0EsRUFBRUEsR0FBR0EsQ0FBQ0EsQ0FBQ0E7SUFDN0NBLENBQUNBO0FBRUxGLENBQUNBO0FBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IERvY3VtZW50IGZyb20gJy4uL0RvY3VtZW50JztcbmltcG9ydCBFZGl0b3IgZnJvbSAnLi4vRWRpdG9yJztcbmltcG9ydCBQb3NpdGlvbiBmcm9tICcuLi9Qb3NpdGlvbic7XG5pbXBvcnQgUmFuZ2UgZnJvbSAnLi4vUmFuZ2UnO1xuXG4vKipcbiAqIEEgd3JhcHBlciBhcm91bmQgYW4gRWRpdG9yIHRvIHBlcmZvcm0gY29udmVyc2lvbnMgYmV0d2VlbiBsaW5lYXIgY2hhcmFjdGVyLCB7cm93O2NvbHVtbn0gYW5kIFRleHRSYW5nZSByZXByZXNlbnRhdGlvbnMuXG4gKiBcbiAqIFRoZSBlZGl0b3IgaXMgaW50ZWdyYWwgdG8gdGhlIGNvbnZlcnNpb24gYmVjYXVzZSBpdCBrbm93cyB0aGUgbGVuZ3RocyBvZiBlYWNoIGxpbmUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVkaXRvclBvc2l0aW9uIHtcbiAgICBwcml2YXRlIGVkaXRvcjogRWRpdG9yO1xuICAgIGNvbnN0cnVjdG9yKGVkaXRvcjogRWRpdG9yKSB7XG4gICAgICAgIHRoaXMuZWRpdG9yID0gZWRpdG9yO1xuICAgIH1cbiAgICBnZXRQb3NpdGlvbkNoYXJzKHBvczogUG9zaXRpb24pOiBudW1iZXIge1xuICAgICAgICB2YXIgZG9jID0gdGhpcy5lZGl0b3IuZ2V0U2Vzc2lvbigpLmdldERvY3VtZW50KCk7XG4gICAgICAgIHJldHVybiBFZGl0b3JQb3NpdGlvbi5nZXRDaGFycyhkb2MsIHBvcyk7XG4gICAgfVxuICAgIGdldFBvc2l0aW9uRnJvbUNoYXJzKGNoYXJzOiBudW1iZXIpOiBQb3NpdGlvbiB7XG4gICAgICAgIHZhciBkb2MgPSB0aGlzLmVkaXRvci5nZXRTZXNzaW9uKCkuZ2V0RG9jdW1lbnQoKTtcbiAgICAgICAgcmV0dXJuIEVkaXRvclBvc2l0aW9uLmdldFBvc2l0aW9uKGRvYywgY2hhcnMpO1xuICAgIH1cbiAgICBnZXRDdXJyZW50UG9zaXRpb25DaGFycygpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRQb3NpdGlvbkNoYXJzKHRoaXMuZWRpdG9yLmdldEN1cnNvclBvc2l0aW9uKCkpO1xuICAgIH1cbiAgICBnZXRDdXJyZW50TGVmdENoYXIoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UG9zaXRpb25MZWZ0Q2hhcih0aGlzLmVkaXRvci5nZXRDdXJzb3JQb3NpdGlvbigpKTtcbiAgICB9XG4gICAgZ2V0VGV4dEF0Q3Vyc29yUG9zaXRpb24oY3Vyc29yOiBQb3NpdGlvbik6IHN0cmluZyB7XG4gICAgICAgIHZhciByYW5nZSA9IG5ldyBSYW5nZShjdXJzb3Iucm93LCBjdXJzb3IuY29sdW1uLCBjdXJzb3Iucm93LCBjdXJzb3IuY29sdW1uICsgMSk7XG4gICAgICAgIC8vIFRoZSBmaW5hbCBmdW5jdGlvbiB3b3VsZCBwcm9iYWJseSBoYXZlIGJlZW4gYmV0dGVyIG5hbWVkICdnZXRUZXh0SW5SYW5nZScuXG4gICAgICAgIHJldHVybiB0aGlzLmVkaXRvci5nZXRTZXNzaW9uKCkuZ2V0RG9jdW1lbnQoKS5nZXRUZXh0UmFuZ2UocmFuZ2UpO1xuICAgIH1cbiAgICBnZXRQb3NpdGlvbkxlZnRDaGFyKGN1cnNvcjogUG9zaXRpb24pOiBzdHJpbmcge1xuICAgICAgICB2YXIgcmFuZ2UgPSBuZXcgUmFuZ2UoY3Vyc29yLnJvdywgY3Vyc29yLmNvbHVtbiwgY3Vyc29yLnJvdywgY3Vyc29yLmNvbHVtbiAtIDEpO1xuICAgICAgICByZXR1cm4gdGhpcy5lZGl0b3IuZ2V0U2Vzc2lvbigpLmdldERvY3VtZW50KCkuZ2V0VGV4dFJhbmdlKHJhbmdlKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0UG9zaXRpb24oZG9jOiBEb2N1bWVudCwgY2hhcnM6IG51bWJlcik6IFBvc2l0aW9uIHtcbiAgICAgICAgdmFyIGk7XG4gICAgICAgIHZhciBsaW5lOiBzdHJpbmc7XG4gICAgICAgIHZhciBsaW5lczogc3RyaW5nW10gPSBkb2MuZ2V0QWxsTGluZXMoKTtcbiAgICAgICAgdmFyIGNvdW50ID0gMDtcbiAgICAgICAgdmFyIHJvdyA9IDA7XG4gICAgICAgIC8vIEZJWE1FOiBQcm9iYWJseSBiZXR0ZXIgdG8gaW5zaXN0IHRoYXQgJ2knIGlzIGEgbnVtYmVyIGFuZCB1c2UgdGhlIGxpbmVzLmxlbmd0aFxuICAgICAgICBmb3IgKGkgaW4gbGluZXMpIHtcbiAgICAgICAgICAgIGxpbmUgPSBsaW5lc1tpXTtcbiAgICAgICAgICAgIGlmIChjaGFycyA8IChjb3VudCArIChsaW5lLmxlbmd0aCArIDEpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHJvdzogcm93LCBjb2x1bW46IGNoYXJzIC0gY291bnQgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvdW50ICs9IGxpbmUubGVuZ3RoICsgMTtcbiAgICAgICAgICAgIHJvdyArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHJvdzogcm93LCBjb2x1bW46IGNoYXJzIC0gY291bnQgfTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0Q2hhcnMoZG9jOiBEb2N1bWVudCwgcG9zOiBQb3NpdGlvbik6IG51bWJlciB7XG4gICAgICAgIHJldHVybiBFZGl0b3JQb3NpdGlvbi5nZXRMaW5lc0NoYXJzKGRvYy5nZXRMaW5lcygwLCBwb3Mucm93IC0gMSkpICsgcG9zLmNvbHVtbjtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0TGluZXNDaGFycyhsaW5lczogc3RyaW5nW10pOiBudW1iZXIge1xuICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICBsaW5lcy5mb3JFYWNoKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgICAgIC8vIEkgYXNzdW1lIHdlIGFyZSBhZGRpbmcgMSBmb3IgdGhlIGltcGxpY2l0IG5ld2xpbmUgY2hhcmFjdGVyLlxuICAgICAgICAgICAgcmV0dXJuIGNvdW50ICs9IGxpbmUubGVuZ3RoICsgMTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBjb3VudDtcbiAgICB9XG4gICAgc3RhdGljIGdldFBvc2l0aW9uQ2hhcnMoZWRpdG9yOiBFZGl0b3IsIHBvczogUG9zaXRpb24pOiBudW1iZXIge1xuICAgICAgICB2YXIgZG9jID0gZWRpdG9yLmdldFNlc3Npb24oKS5nZXREb2N1bWVudCgpO1xuICAgICAgICByZXR1cm4gRWRpdG9yUG9zaXRpb24uZ2V0Q2hhcnMoZG9jLCBwb3MpO1xuICAgIH1cblxufVxuIl19