import { getInnerText } from "./lib/dom";
import { addListener, removeListener } from "./lib/event";
import { wrap } from './triton';
import Editor from "./Editor";
import VirtualRenderer from "./VirtualRenderer";
import { workspace } from "./workspace/workspace";
export function edit(source, workspace) {
    var element;
    if (typeof source === 'string') {
        var id = source;
        element = document.getElementById(id);
        if (!element) {
            throw new Error("edit can't find div #" + id);
        }
    }
    else {
        element = source;
    }
    if (element && element['env'] && element['env'].editor instanceof Editor) {
        return element['env'].editor;
    }
    var value = "";
    if (element && /input|textarea/i.test(element.tagName)) {
        var oldNode = element;
        value = oldNode.value;
        element = document.createElement("pre");
        oldNode.parentNode.replaceChild(element, oldNode);
    }
    else {
        value = getInnerText(element);
        element.innerHTML = '';
    }
    var editSession = createEditSession(value);
    var editor = new Editor(new VirtualRenderer(element), editSession);
    editor.setSession(editSession);
    var env = {
        document: editSession,
        editor: editor,
        onResize: editor.resize.bind(editor, null)
    };
    if (oldNode)
        env['textarea'] = oldNode;
    addListener(window, "resize", env.onResize);
    editor.on("destroy", function () {
        removeListener(window, "resize", env.onResize);
        env.editor.container['env'] = null;
    });
    editor.container['env'] = editor['env'] = env;
    return wrap(editor, element, workspace, document);
}
;
export function workspace() {
    return workspace();
}
;
export function createEditSession(text, mode) {
    var doc = new EditSession(text, mode);
    doc.setUndoManager(new UndoManager());
    return doc;
}
;
export var EditSession = EditSession;
export var UndoManager = UndoManager;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2FjZS50cyJdLCJuYW1lcyI6WyJlZGl0Iiwid29ya3NwYWNlIiwiY3JlYXRlRWRpdFNlc3Npb24iXSwibWFwcGluZ3MiOiJPQXNDTyxFQUFDLFlBQVksRUFBQyxNQUFNLFdBQVc7T0FDL0IsRUFBQyxXQUFXLEVBQUUsY0FBYyxFQUFDLE1BQU0sYUFBYTtPQUVoRCxFQUFDLElBQUksRUFBQyxNQUFNLFVBQVU7T0FDdEIsTUFBTSxNQUFNLFVBQVU7T0FHdEIsZUFBZSxNQUFNLG1CQUFtQjtPQUN4QyxFQUFDLFNBQVMsRUFBWSxNQUFNLHVCQUF1QjtBQTBCMUQscUJBQXFCLE1BQVcsRUFBRSxTQUFvQjtJQUNsREEsSUFBSUEsT0FBb0JBLENBQUNBO0lBQ3pCQSxFQUFFQSxDQUFDQSxDQUFDQSxPQUFPQSxNQUFNQSxLQUFLQSxRQUFRQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUM3QkEsSUFBSUEsRUFBRUEsR0FBV0EsTUFBTUEsQ0FBQ0E7UUFDeEJBLE9BQU9BLEdBQUdBLFFBQVFBLENBQUNBLGNBQWNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBO1FBQ3RDQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNYQSxNQUFNQSxJQUFJQSxLQUFLQSxDQUFDQSx1QkFBdUJBLEdBQUdBLEVBQUVBLENBQUNBLENBQUNBO1FBQ2xEQSxDQUFDQTtJQUNMQSxDQUFDQTtJQUNEQSxJQUFJQSxDQUFDQSxDQUFDQTtRQUNGQSxPQUFPQSxHQUFHQSxNQUFNQSxDQUFDQTtJQUNyQkEsQ0FBQ0E7SUFFREEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsT0FBT0EsSUFBSUEsT0FBT0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsSUFBSUEsT0FBT0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0EsTUFBTUEsWUFBWUEsTUFBTUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDdkVBLE1BQU1BLENBQUNBLE9BQU9B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Y2VzQ29udGVudCI6WyIvKiAqKioqKiBCRUdJTiBMSUNFTlNFIEJMT0NLICoqKioqXG4gKiBEaXN0cmlidXRlZCB1bmRlciB0aGUgQlNEIGxpY2Vuc2U6XG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDEwLCBBamF4Lm9yZyBCLlYuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogXG4gKiBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbiAqIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuICogICAgICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHRcbiAqICAgICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbiAqICAgICAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0XG4gKiAgICAgICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlXG4gKiAgICAgICBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuICogICAgICogTmVpdGhlciB0aGUgbmFtZSBvZiBBamF4Lm9yZyBCLlYuIG5vciB0aGVcbiAqICAgICAgIG5hbWVzIG9mIGl0cyBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzXG4gKiAgICAgICBkZXJpdmVkIGZyb20gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi5cbiAqIFxuICogVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCIgQU5EXG4gKiBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRFxuICogV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRVxuICogRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgQUpBWC5PUkcgQi5WLiBCRSBMSUFCTEUgRk9SIEFOWVxuICogRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVNcbiAqIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUztcbiAqIExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORFxuICogT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlRcbiAqIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTXG4gKiBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cbiAqXG4gKiAqKioqKiBFTkQgTElDRU5TRSBCTE9DSyAqKioqKiAqL1xuXG4vKipcbiAqIFRoZSBtYWluIGNsYXNzIHJlcXVpcmVkIHRvIHNldCB1cCBhbiBBY2UgaW5zdGFuY2UgaW4gdGhlIGJyb3dzZXIuXG4gKlxuICogQGNsYXNzIEFjZVxuICoqL1xuXG4vL3JlcXVpcmUoXCIuL2xpYi9maXhvbGRicm93c2Vyc1wiKTtcblxuaW1wb3J0IHtnZXRJbm5lclRleHR9IGZyb20gXCIuL2xpYi9kb21cIjtcbmltcG9ydCB7YWRkTGlzdGVuZXIsIHJlbW92ZUxpc3RlbmVyfSBmcm9tIFwiLi9saWIvZXZlbnRcIjtcblxuaW1wb3J0IHt3cmFwfSBmcm9tICcuL3RyaXRvbic7XG5pbXBvcnQgRWRpdG9yIGZyb20gXCIuL0VkaXRvclwiO1xuaW1wb3J0IHt9IGZyb20gXCIuL2VkaXRfc2Vzc2lvblwiO1xuaW1wb3J0IHt9IGZyb20gXCIuL3VuZG9tYW5hZ2VyXCI7XG5pbXBvcnQgVmlydHVhbFJlbmRlcmVyIGZyb20gXCIuL1ZpcnR1YWxSZW5kZXJlclwiO1xuaW1wb3J0IHt3b3Jrc3BhY2UsIFdvcmtzcGFjZX0gZnJvbSBcIi4vd29ya3NwYWNlL3dvcmtzcGFjZVwiO1xuaW1wb3J0IHt9IGZyb20gJy4vY29uZmlnJztcblxuLy8gVGhlIGZvbGxvd2luZyByZXF1aXJlKClzIGFyZSBmb3IgaW5jbHVzaW9uIGluIHRoZSBidWlsdCBhY2UgZmlsZVxuLy9yZXF1aXJlKFwiLi93b3JrZXIvd29ya2VyX2NsaWVudFwiKTtcbi8vcmVxdWlyZShcIi4va2V5Ym9hcmQvaGFzaF9oYW5kbGVyXCIpO1xuLy9yZXF1aXJlKFwiLi9wbGFjZWhvbGRlclwiKTtcbi8vcmVxdWlyZShcIi4vbXVsdGlfc2VsZWN0XCIpO1xuLy9yZXF1aXJlKFwiLi9tb2RlL2ZvbGRpbmcvZm9sZF9tb2RlXCIpO1xuLy9yZXF1aXJlKFwiLi90aGVtZS90ZXh0bWF0ZVwiKTtcbi8vcmVxdWlyZShcIi4vZXh0L2Vycm9yX21hcmtlclwiKTtcblxuLy8gZXhwb3J0IHZhciBjb25maWcgPSBjZmc7XG5cbi8qKlxuICogUHJvdmlkZXMgYWNjZXNzIHRvIHJlcXVpcmUgaW4gcGFja2VkIG5vY29uZmxpY3QgbW9kZVxuICogQHBhcmFtIHtTdHJpbmd9IG1vZHVsZU5hbWVcbiAqIEByZXR1cm5zIHtPYmplY3R9XG4gKiovXG4vLyBGSVhNRTogVHJ5aW5nIHRvIGV4cG9ydCB0aGlzIGluIHRoZSBBQ0UgbmFtZXNwYWNlIGlzIHByb2JsZW1hdGljIGluIFR5cGVTY3JpcHQuXG4vLyBleHBvcnQgdmFyIHJlcXVpcmUgPSByZXF1aXJlO1xuXG4vKipcbiAqIEVtYmVkcyB0aGUgQWNlIGVkaXRvciBpbnRvIHRoZSBET00sIGF0IHRoZSBlbGVtZW50IHByb3ZpZGVkIGJ5IGBlbGAuXG4gKiBAcGFyYW0ge1N0cmluZyB8IERPTUVsZW1lbnR9IGVsIEVpdGhlciB0aGUgaWQgb2YgYW4gZWxlbWVudCwgb3IgdGhlIGVsZW1lbnQgaXRzZWxmXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlZGl0KHNvdXJjZTogYW55LCB3b3Jrc3BhY2U6IFdvcmtzcGFjZSkge1xuICAgIHZhciBlbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgICBpZiAodHlwZW9mIHNvdXJjZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdmFyIGlkOiBzdHJpbmcgPSBzb3VyY2U7XG4gICAgICAgIGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gICAgICAgIGlmICghZWxlbWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiZWRpdCBjYW4ndCBmaW5kIGRpdiAjXCIgKyBpZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGVsZW1lbnQgPSBzb3VyY2U7XG4gICAgfVxuXG4gICAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudFsnZW52J10gJiYgZWxlbWVudFsnZW52J10uZWRpdG9yIGluc3RhbmNlb2YgRWRpdG9yKSB7XG4gICAgICAgIHJldHVybiBlbGVtZW50WydlbnYnXS5lZGl0b3I7XG4gICAgfVxuXG4gICAgdmFyIHZhbHVlID0gXCJcIjtcbiAgICBpZiAoZWxlbWVudCAmJiAvaW5wdXR8dGV4dGFyZWEvaS50ZXN0KGVsZW1lbnQudGFnTmFtZSkpIHtcbiAgICAgICAgdmFyIG9sZE5vZGU6IGFueSA9IGVsZW1lbnQ7XG4gICAgICAgIHZhbHVlID0gb2xkTm9kZS52YWx1ZTtcbiAgICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwcmVcIik7XG4gICAgICAgIG9sZE5vZGUucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoZWxlbWVudCwgb2xkTm9kZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YWx1ZSA9IGdldElubmVyVGV4dChlbGVtZW50KTtcbiAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSAnJztcbiAgICB9XG5cbiAgICB2YXIgZWRpdFNlc3Npb24gPSBjcmVhdGVFZGl0U2Vzc2lvbih2YWx1ZSk7XG5cbiAgICB2YXIgZWRpdG9yID0gbmV3IEVkaXRvcihuZXcgVmlydHVhbFJlbmRlcmVyKGVsZW1lbnQpLCBlZGl0U2Vzc2lvbik7XG4gICAgZWRpdG9yLnNldFNlc3Npb24oZWRpdFNlc3Npb24pO1xuXG4gICAgLy8gRklYTUU6IFRoZSBmaXJzdCBwcm9wZXJ0eSBpcyBpbmNvcnJlY3RseSBuYW1lZC5cbiAgICB2YXIgZW52ID0ge1xuICAgICAgICBkb2N1bWVudDogZWRpdFNlc3Npb24sXG4gICAgICAgIGVkaXRvcjogZWRpdG9yLFxuICAgICAgICBvblJlc2l6ZTogZWRpdG9yLnJlc2l6ZS5iaW5kKGVkaXRvciwgbnVsbClcbiAgICB9O1xuXG4gICAgaWYgKG9sZE5vZGUpIGVudlsndGV4dGFyZWEnXSA9IG9sZE5vZGU7XG4gICAgYWRkTGlzdGVuZXIod2luZG93LCBcInJlc2l6ZVwiLCBlbnYub25SZXNpemUpO1xuICAgIGVkaXRvci5vbihcImRlc3Ryb3lcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlbW92ZUxpc3RlbmVyKHdpbmRvdywgXCJyZXNpemVcIiwgZW52Lm9uUmVzaXplKTtcbiAgICAgICAgZW52LmVkaXRvci5jb250YWluZXJbJ2VudiddID0gbnVsbDsgLy8gcHJldmVudCBtZW1vcnkgbGVhayBvbiBvbGQgaWVcbiAgICB9KTtcbiAgICBlZGl0b3IuY29udGFpbmVyWydlbnYnXSA9IGVkaXRvclsnZW52J10gPSBlbnY7XG4gICAgcmV0dXJuIHdyYXAoZWRpdG9yLCBlbGVtZW50LCB3b3Jrc3BhY2UsIGRvY3VtZW50KTtcbn07XG5cbi8qKlxuICogRnVuY3Rpb25hbCBjb25zdHJ1Y3RvciBmb3IgY3JlYXRpbmcgYSBuZXcgV29ya3NwYWNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gd29ya3NwYWNlKCkge1xuICAgIHJldHVybiB3b3Jrc3BhY2UoKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBbW0VkaXRTZXNzaW9uXV0sIGFuZCByZXR1cm5zIHRoZSBhc3NvY2lhdGVkIFtbRG9jdW1lbnRdXS5cbiAqIEBwYXJhbSB7RG9jdW1lbnQgfCBTdHJpbmd9IHRleHQgezp0ZXh0UGFyYW19XG4gKiBAcGFyYW0ge1RleHRNb2RlfSBtb2RlIHs6bW9kZVBhcmFtfVxuICogXG4gKiovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRWRpdFNlc3Npb24odGV4dCwgbW9kZT8pIHtcbiAgICB2YXIgZG9jID0gbmV3IEVkaXRTZXNzaW9uKHRleHQsIG1vZGUpO1xuICAgIGRvYy5zZXRVbmRvTWFuYWdlcihuZXcgVW5kb01hbmFnZXIoKSk7XG4gICAgcmV0dXJuIGRvYztcbn07XG5cbmV4cG9ydCB2YXIgRWRpdFNlc3Npb24gPSBFZGl0U2Vzc2lvbjtcblxuZXhwb3J0IHZhciBVbmRvTWFuYWdlciA9IFVuZG9NYW5hZ2VyO1xuIl19