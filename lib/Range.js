export default class Range {
    constructor(startRow, startColumn, endRow, endColumn) {
        this.start = {
            row: startRow,
            column: startColumn
        };
        this.end = {
            row: endRow,
            column: endColumn
        };
    }
    isEqual(range) {
        return this.start.row === range.start.row &&
            this.end.row === range.end.row &&
            this.start.column === range.start.column &&
            this.end.column === range.end.column;
    }
    toString() {
        return ("Range: [" + this.start.row + "/" + this.start.column +
            "] -> [" + this.end.row + "/" + this.end.column + "]");
    }
    contains(row, column) {
        return this.compare(row, column) === 0;
    }
    compareRange(range) {
        var cmp;
        var end = range.end;
        var start = range.start;
        cmp = this.compare(end.row, end.column);
        if (cmp === 1) {
            cmp = this.compare(start.row, start.column);
            if (cmp === 1) {
                return 2;
            }
            else if (cmp === 0) {
                return 1;
            }
            else {
                return 0;
            }
        }
        else if (cmp === -1) {
            return -2;
        }
        else {
            cmp = this.compare(start.row, start.column);
            if (cmp === -1) {
                return -1;
            }
            else if (cmp === 1) {
                return 42;
            }
            else {
                return 0;
            }
        }
    }
    comparePoint(p) {
        return this.compare(p.row, p.column);
    }
    containsRange(range) {
        return this.comparePoint(range.start) === 0 && this.comparePoint(range.end) === 0;
    }
    intersects(range) {
        var cmp = this.compareRange(range);
        return (cmp === -1 || cmp === 0 || cmp === 1);
    }
    isEnd(row, column) {
        return this.end.row === row && this.end.column === column;
    }
    isStart(row, column) {
        return this.start.row === row && this.start.column === column;
    }
    setStart(row, column) {
        if (typeof row === "object") {
            this.start.column = row['column'];
            this.start.row = row['row'];
        }
        else {
            this.start.row = row;
            this.start.column = column;
        }
    }
    setEnd(row, column) {
        if (typeof row === "object") {
            this.end.column = row['column'];
            this.end.row = row['row'];
        }
        else {
            this.end.row = row;
            this.end.column = column;
        }
    }
    inside(row, column) {
        if (this.compare(row, column) === 0) {
            if (this.isEnd(row, column) || this.isStart(row, column)) {
                return false;
            }
            else {
                return true;
            }
        }
        return false;
    }
    insideStart(row, column) {
        if (this.compare(row, column) === 0) {
            if (this.isEnd(row, column)) {
                return false;
            }
            else {
                return true;
            }
        }
        return false;
    }
    insideEnd(row, column) {
        if (this.compare(row, column) === 0) {
            if (this.isStart(row, column)) {
                return false;
            }
            else {
                return true;
            }
        }
        return false;
    }
    compare(row, column) {
        if (!this.isMultiLine()) {
            if (row === this.start.row) {
                return column < this.start.column ? -1 : (column > this.end.column ? 1 : 0);
            }
        }
        if (row < this.start.row)
            return -1;
        if (row > this.end.row)
            return 1;
        if (this.start.row === row)
            return column >= this.start.column ? 0 : -1;
        if (this.end.row === row)
            return column <= this.end.column ? 0 : 1;
        return 0;
    }
    compareStart(row, column) {
        if (this.start.row === row && this.start.column === column) {
            return -1;
        }
        else {
            return this.compare(row, column);
        }
    }
    compareEnd(row, column) {
        if (this.end.row === row && this.end.column === column) {
            return 1;
        }
        else {
            return this.compare(row, column);
        }
    }
    compareInside(row, column) {
        if (this.end.row === row && this.end.column === column) {
            return 1;
        }
        else if (this.start.row === row && this.start.column === column) {
            return -1;
        }
        else {
            return this.compare(row, column);
        }
    }
    clipRows(firstRow, lastRow) {
        var start;
        var end;
        if (this.end.row > lastRow)
            end = { row: lastRow + 1, column: 0 };
        else if (this.end.row < firstRow)
            end = { row: firstRow, column: 0 };
        if (this.start.row > lastRow)
            start = { row: lastRow + 1, column: 0 };
        else if (this.start.row < firstRow)
            start = { row: firstRow, column: 0 };
        return Range.fromPoints(start || this.start, end || this.end);
    }
    extend(row, column) {
        var cmp = this.compare(row, column);
        if (cmp === 0) {
            return this;
        }
        else if (cmp === -1) {
            var start = { row: row, column: column };
        }
        else {
            var end = { row: row, column: column };
        }
        return Range.fromPoints(start || this.start, end || this.end);
    }
    isEmpty() {
        return (this.start.row === this.end.row && this.start.column === this.end.column);
    }
    isMultiLine() {
        return (this.start.row !== this.end.row);
    }
    clone() {
        return Range.fromPoints(this.start, this.end);
    }
    collapseRows() {
        if (this.end.column === 0)
            return new Range(this.start.row, 0, Math.max(this.start.row, this.end.row - 1), 0);
        else
            return new Range(this.start.row, 0, this.end.row, 0);
    }
    moveBy(row, column) {
        this.start.row += row;
        this.start.column += column;
        this.end.row += row;
        this.end.column += column;
    }
    static fromPoints(start, end) {
        return new Range(start.row, start.column, end.row, end.column);
    }
    static comparePoints(p1, p2) {
        return p1.row - p2.row || p1.column - p2.column;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmFuZ2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvUmFuZ2UudHMiXSwibmFtZXMiOlsiUmFuZ2UiLCJSYW5nZS5jb25zdHJ1Y3RvciIsIlJhbmdlLmlzRXF1YWwiLCJSYW5nZS50b1N0cmluZyIsIlJhbmdlLmNvbnRhaW5zIiwiUmFuZ2UuY29tcGFyZVJhbmdlIiwiUmFuZ2UuY29tcGFyZVBvaW50IiwiUmFuZ2UuY29udGFpbnNSYW5nZSIsIlJhbmdlLmludGVyc2VjdHMiLCJSYW5nZS5pc0VuZCIsIlJhbmdlLmlzU3RhcnQiLCJSYW5nZS5zZXRTdGFydCIsIlJhbmdlLnNldEVuZCIsIlJhbmdlLmluc2lkZSIsIlJhbmdlLmluc2lkZVN0YXJ0IiwiUmFuZ2UuaW5zaWRlRW5kIiwiUmFuZ2UuY29tcGFyZSIsIlJhbmdlLmNvbXBhcmVTdGFydCIsIlJhbmdlLmNvbXBhcmVFbmQiLCJSYW5nZS5jb21wYXJlSW5zaWRlIiwiUmFuZ2UuY2xpcFJvd3MiLCJSYW5nZS5leHRlbmQiLCJSYW5nZS5pc0VtcHR5IiwiUmFuZ2UuaXNNdWx0aUxpbmUiLCJSYW5nZS5jbG9uZSIsIlJhbmdlLmNvbGxhcHNlUm93cyIsIlJhbmdlLm1vdmVCeSIsIlJhbmdlLmZyb21Qb2ludHMiLCJSYW5nZS5jb21wYXJlUG9pbnRzIl0sIm1hcHBpbmdzIjoiQUE2Q0E7SUFjSUEsWUFBWUEsUUFBZ0JBLEVBQUVBLFdBQW1CQSxFQUFFQSxNQUFjQSxFQUFFQSxTQUFpQkE7UUFDaEZDLElBQUlBLENBQUNBLEtBQUtBLEdBQUdBO1lBQ1RBLEdBQUdBLEVBQUVBLFFBQVFBO1lBQ2JBLE1BQU1BLEVBQUVBLFdBQVdBO1NBQ3RCQSxDQUFDQTtRQUVGQSxJQUFJQSxDQUFDQSxHQUFHQSxHQUFHQTtZQUNQQSxHQUFHQSxFQUFFQSxNQUFNQTtZQUNYQSxNQUFNQSxFQUFFQSxTQUFTQTtTQUNwQkEsQ0FBQ0E7SUFDTkEsQ0FBQ0E7SUFRREQsT0FBT0EsQ0FBQ0EsS0FBdUZBO1FBQzNGRSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxHQUFHQSxLQUFLQSxLQUFLQSxDQUFDQSxLQUFLQSxDQUFDQSxHQUFHQTtZQUNyQ0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsR0FBR0EsS0FBS0EsS0FBS0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsR0FBR0E7WUFDOUJBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLE1BQU1BLEtBQUtBLEtBQUtBLENBQUNBLEtBQUtBLENBQUNBLE1BQU1BO1lBQ3hDQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxNQUFNQSxLQUFLQSxLQUFLQSxDQUFDQSxHQUFHQSxDQUFDQSxNQUFNQSxDQUFDQTtJQUM3Q0EsQ0FBQ0E7SUFVREYsUUFBUUE7UUFDSkcsTUFBTUEsQ0FBQ0EsQ0FBQ0EsVUFBVUEsR0FBR0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsR0FBR0EsR0FBR0EsR0FBR0EsR0FBR0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsTUFBTUE7WUFDekRBLFFBQVFBLEdBQUdBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLEdBQUdBLEdBQUdBLEdBQUdBLEdBQUdBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLE1BQU1BLEdBQUdBLEdBQUdBLENBQUNBLENBQUNBO0lBQy9EQSxDQUFDQTtJQWVESCxRQUFRQSxDQUFDQSxHQUFXQSxFQUFFQSxNQUFjQTtRQUNoQ0ksTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsR0FBR0EsRUFBRUEsTUFBTUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0E7SUFDM0NBLENBQUNBO0lBZ0JESixZQUFZQSxDQUFDQSxLQUFZQTtRQUNyQkssSUFBSUEsR0FBV0EsQ0FBQUE7UUFDZkEsSUFBSUEsR0FBR0EsR0FBR0EsS0FBS0EsQ0FBQ0EsR0FBR0EsQ0FBQ0E7UUFDcEJBLElBQUlBLEtBQUtBLEdBQUdBLEtBQUtBLENBQUNBLEtBQUtBLENBQUNBO1FBRXhCQSxHQUFHQSxHQUFHQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSxHQUFHQSxFQUFFQSxHQUFHQSxDQUFDQSxNQUFNQSxDQUFDQSxDQUFDQTtRQUN4Q0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsR0FBR0EsS0FBS0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDWkEsR0FBR0EsR0FBR0EsSUFBSUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsR0FBR0EsRUFBRUEsS0FBS0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0E7WUFDNUNBLEVBQUVBLENBQUNBLENBQUNBLEdBQUdBLEtBQUtBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO2dCQUNaQSxNQUFNQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNiQSxDQUFDQTtZQUNEQSxJQUFJQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxHQUFHQSxLQUFLQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtnQkFDakJBLE1BQU1BLENBQUNBLENBQUNBLENBQUNBO1lBQ2JBLENBQUNBO1lBQ0RBLElBQUlBLENBQUNBLENBQUNBO2dCQUNGQSxNQUFNQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNiQSxDQUFDQTtRQUNMQSxDQUFDQTtRQUNEQSxJQUFJQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxHQUFHQSxLQUFLQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNsQkEsTUFBTUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDZEEsQ0FBQ0E7UUFDREEsSUFBSUEsQ0FBQ0EsQ0FBQ0E7WUFDRkEsR0FBR0EsR0FBR0EsSUFBSUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsR0FBR0EsRUFBRUEsS0FBS0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0E7WUFDNUNBLEVBQUVBLENBQUNBLENBQUNBLEdBQUdBLEtBQUtBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO2dCQUNiQSxNQUFNQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNkQSxDQUFDQTtZQUNEQSxJQUFJQSxDQUFDQSxFQUFFQSxD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a0IsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsR0FBR0EsS0FBS0EsR0FBR0EsSUFBSUEsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsTUFBTUEsS0FBS0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDckRBLE1BQU1BLENBQUNBLENBQUNBLENBQUNBO1FBQ2JBLENBQUNBO1FBQ0RBLElBQUlBLENBQUNBLENBQUNBO1lBQ0ZBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBLEdBQUdBLEVBQUVBLE1BQU1BLENBQUNBLENBQUNBO1FBQ3JDQSxDQUFDQTtJQUNMQSxDQUFDQTtJQWVEbEIsYUFBYUEsQ0FBQ0EsR0FBV0EsRUFBRUEsTUFBY0E7UUFDckNtQixFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxHQUFHQSxLQUFLQSxHQUFHQSxJQUFJQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxNQUFNQSxLQUFLQSxNQUFNQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNyREEsTUFBTUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDYkEsQ0FBQ0E7UUFDREEsSUFBSUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsR0FBR0EsS0FBS0EsR0FBR0EsSUFBSUEsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsTUFBTUEsS0FBS0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDOURBLE1BQU1BLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1FBQ2RBLENBQUNBO1FBQ0RBLElBQUlBLENBQUNBLENBQUNBO1lBQ0ZBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBLEdBQUdBLEVBQUVBLE1BQU1BLENBQUNBLENBQUNBO1FBQ3JDQSxDQUFDQTtJQUNMQSxDQUFDQTtJQVFEbkIsUUFBUUEsQ0FBQ0EsUUFBZ0JBLEVBQUVBLE9BQWVBO1FBQ3RDb0IsSUFBSUEsS0FBc0NBLENBQUNBO1FBQzNDQSxJQUFJQSxHQUFvQ0EsQ0FBQ0E7UUFDekNBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLEdBQUdBLEdBQUdBLE9BQU9BLENBQUNBO1lBQ3ZCQSxHQUFHQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxPQUFPQSxHQUFHQSxDQUFDQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxDQUFDQTtRQUMxQ0EsSUFBSUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsR0FBR0EsR0FBR0EsUUFBUUEsQ0FBQ0E7WUFDN0JBLEdBQUdBLEdBQUdBLEVBQUVBLEdBQUdBLEVBQUVBLFFBQVFBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLENBQUNBO1FBRXZDQSxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxHQUFHQSxHQUFHQSxPQUFPQSxDQUFDQTtZQUN6QkEsS0FBS0EsR0FBR0EsRUFBRUEsR0FBR0EsRUFBRUEsT0FBT0EsR0FBR0EsQ0FBQ0EsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsQ0FBQ0E7UUFDNUNBLElBQUlBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLEdBQUdBLEdBQUdBLFFBQVFBLENBQUNBO1lBQy9CQSxLQUFLQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxRQUFRQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxDQUFDQTtRQUV6Q0EsTUFBTUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsVUFBVUEsQ0FBQ0EsS0FBS0EsSUFBSUEsSUFBSUEsQ0FBQ0EsS0FBS0EsRUFBRUEsR0FBR0EsSUFBSUEsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7SUFDbEVBLENBQUNBO0lBUURwQixNQUFNQSxDQUFDQSxHQUFXQSxFQUFFQSxNQUFjQTtRQUM5QnFCLElBQUlBLEdBQUdBLEdBQUdBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBLEdBQUdBLEVBQUVBLE1BQU1BLENBQUNBLENBQUNBO1FBRXBDQSxFQUFFQSxDQUFDQSxDQUFDQSxHQUFHQSxLQUFLQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNaQSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQTtRQUNoQkEsQ0FBQ0E7UUFDREEsSUFBSUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsR0FBR0EsS0FBS0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDbEJBLElBQUlBLEtBQUtBLEdBQUdBLEVBQUVBLEdBQUdBLEVBQUVBLEdBQUdBLEVBQUVBLE1BQU1BLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBO1FBQzdDQSxDQUFDQTtRQUNEQSxJQUFJQSxDQUFDQSxDQUFDQTtZQUNGQSxJQUFJQSxHQUFHQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxNQUFNQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQTtRQUMzQ0EsQ0FBQ0E7UUFDREEsTUFBTUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsVUFBVUEsQ0FBQ0EsS0FBS0EsSUFBSUEsSUFBSUEsQ0FBQ0EsS0FBS0EsRUFBRUEsR0FBR0EsSUFBSUEsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7SUFDbEVBLENBQUNBO0lBRURyQixPQUFPQTtRQUNIc0IsTUFBTUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsR0FBR0EsS0FBS0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsR0FBR0EsSUFBSUEsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsTUFBTUEsS0FBS0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0E7SUFDdEZBLENBQUNBO0lBTUR0QixXQUFXQTtRQUNQdUIsTUFBTUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsR0FBR0EsS0FBS0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7SUFDN0NBLENBQUNBO0lBT0R2QixLQUFLQTtRQUNEd0IsTUFBTUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsVUFBVUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsS0FBS0EsRUFBRUEsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7SUFDbERBLENBQUNBO0lBT0R4QixZQUFZQTtRQUNSeUIsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsTUFBTUEsS0FBS0EsQ0FBQ0EsQ0FBQ0E7WUFDdEJBLE1BQU1BLENBQUNBLElBQUlBLEtBQUtBLENBQUNBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLEdBQUdBLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLEdBQUdBLEVBQUVBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLEdBQUdBLEdBQUdBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUFBO1FBQ3RGQSxJQUFJQTtZQUNBQSxNQUFNQSxDQUFDQSxJQUFJQSxLQUFLQSxDQUFDQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxHQUFHQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxHQUFHQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFBQTtJQUM1REEsQ0FBQ0E7SUFHRHpCLE1BQU1BLENBQUNBLEdBQVdBLEVBQUVBLE1BQWNBO1FBQzlCMEIsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsR0FBR0EsSUFBSUEsR0FBR0EsQ0FBQ0E7UUFDdEJBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLE1BQU1BLElBQUlBLE1BQU1BLENBQUNBO1FBQzVCQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxHQUFHQSxJQUFJQSxHQUFHQSxDQUFDQTtRQUNwQkEsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsTUFBTUEsSUFBSUEsTUFBTUEsQ0FBQ0E7SUFDOUJBLENBQUNBO0lBU0QxQixPQUFjQSxVQUFVQSxDQUFDQSxLQUFzQ0EsRUFBRUEsR0FBb0NBO1FBQ2pHMkIsTUFBTUEsQ0FBQ0EsSUFBSUEsS0FBS0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsR0FBR0EsRUFBRUEsS0FBS0EsQ0FBQ0EsTUFBTUEsRUFBRUEsR0FBR0EsQ0FBQ0EsR0FBR0EsRUFBRUEsR0FBR0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0E7SUFDbkVBLENBQUNBO0lBRUQzQixPQUFjQSxhQUFhQSxDQUFDQSxFQUFtQ0EsRUFBRUEsRUFBbUNBO1FBQ2hHNEIsTUFBTUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsR0FBR0EsR0FBR0EsRUFBRUEsQ0FBQ0EsR0FBR0EsSUFBSUEsRUFBRUEsQ0FBQ0EsTUFBTUEsR0FBR0EsRUFBRUEsQ0FBQ0EsTUFBTUEsQ0FBQ0E7SUFDcERBLENBQUNBO0FBQ0w1QixDQUFDQTtBQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLyogKioqKiogQkVHSU4gTElDRU5TRSBCTE9DSyAqKioqKlxuICogRGlzdHJpYnV0ZWQgdW5kZXIgdGhlIEJTRCBsaWNlbnNlOlxuICpcbiAqIENvcHlyaWdodCAoYykgMjAxMCwgQWpheC5vcmcgQi5WLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbiAqIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuICogICAgICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHRcbiAqICAgICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbiAqICAgICAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0XG4gKiAgICAgICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlXG4gKiAgICAgICBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuICogICAgICogTmVpdGhlciB0aGUgbmFtZSBvZiBBamF4Lm9yZyBCLlYuIG5vciB0aGVcbiAqICAgICAgIG5hbWVzIG9mIGl0cyBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzXG4gKiAgICAgICBkZXJpdmVkIGZyb20gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi5cbiAqXG4gKiBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTIFwiQVMgSVNcIiBBTkRcbiAqIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRSBJTVBMSUVEXG4gKiBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFXG4gKiBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBBSkFYLk9SRyBCLlYuIEJFIExJQUJMRSBGT1IgQU5ZXG4gKiBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFU1xuICogKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTO1xuICogTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EXG4gKiBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVFxuICogKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVNcbiAqIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuICpcbiAqICoqKioqIEVORCBMSUNFTlNFIEJMT0NLICoqKioqICovXG4vKipcbiAqIFRoaXMgb2JqZWN0IGlzIHVzZWQgaW4gdmFyaW91cyBwbGFjZXMgdG8gaW5kaWNhdGUgYSByZWdpb24gd2l0aGluIHRoZSBlZGl0b3IuXG4gKiBUbyBiZXR0ZXIgdmlzdWFsaXplIGhvdyB0aGlzIHdvcmtzLCBpbWFnaW5lIGEgcmVjdGFuZ2xlLlxuICogRWFjaCBxdWFkcmFudCBvZiB0aGUgcmVjdGFuZ2xlIGlzIGFuYWxvZ3VzIHRvIGEgcmFuZ2UsIGFzIHJhbmdlcyBjb250YWluIGEgc3RhcnRpbmcgcm93IGFuZCBzdGFydGluZyBjb2x1bW4sIGFuZCBhbiBlbmRpbmcgcm93LCBhbmQgZW5kaW5nIGNvbHVtbi5cbiAqIEBjbGFzcyBSYW5nZVxuICovXG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBgRWRpdG9yUmFuZ2VgIG9iamVjdCB3aXRoIHRoZSBnaXZlbiBzdGFydGluZyBhbmQgZW5kaW5nIHJvdyBhbmQgY29sdW1uIHBvaW50cy5cbiAqIEBwYXJhbSB7TnVtYmVyfSBzdGFydFJvdyBUaGUgc3RhcnRpbmcgcm93XG4gKiBAcGFyYW0ge051bWJlcn0gc3RhcnRDb2x1bW4gVGhlIHN0YXJ0aW5nIGNvbHVtblxuICogQHBhcmFtIHtOdW1iZXJ9IGVuZFJvdyBUaGUgZW5kaW5nIHJvd1xuICogQHBhcmFtIHtOdW1iZXJ9IGVuZENvbHVtbiBUaGUgZW5kaW5nIGNvbHVtblxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICoqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmFuZ2Uge1xuICAgIHB1YmxpYyBzdGFydDogeyByb3c6IG51bWJlcjsgY29sdW1uOiBudW1iZXIgfTtcbiAgICBwdWJsaWMgZW5kOiB7IHJvdzogbnVtYmVyOyBjb2x1bW46IG51bWJlciB9O1xuICAgIC8qKlxuICAgICAqIEEgbWFya2VyIGlkIHRoYXQgaXMgYmVpbmcgc25lYWtlZCBvbnRvIHRoZSBSYW5nZS5cbiAgICAgKi9cbiAgICBwdWJsaWMgbWFya2VySWQ6IG51bWJlcjtcbiAgICBwdWJsaWMgY29sbGFwc2VDaGlsZHJlbjogbnVtYmVyO1xuICAgIC8vICBwdWJsaWMgY3Vyc29yOiBSYW5nZTtcbiAgICAvLyAgcHVibGljIGlzQmFja3dhcmRzOiBib29sZWFuO1xuICAgIC8qKlxuICAgICAqIEBjbGFzcyBSYW5nZVxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHN0YXJ0Um93OiBudW1iZXIsIHN0YXJ0Q29sdW1uOiBudW1iZXIsIGVuZFJvdzogbnVtYmVyLCBlbmRDb2x1bW46IG51bWJlcikge1xuICAgICAgICB0aGlzLnN0YXJ0ID0ge1xuICAgICAgICAgICAgcm93OiBzdGFydFJvdyxcbiAgICAgICAgICAgIGNvbHVtbjogc3RhcnRDb2x1bW5cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmVuZCA9IHtcbiAgICAgICAgICAgIHJvdzogZW5kUm93LFxuICAgICAgICAgICAgY29sdW1uOiBlbmRDb2x1bW5cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiBhbmQgb25seSBpZiB0aGUgc3RhcnRpbmcgcm93IGFuZCBjb2x1bW4sIGFuZCBlbmRpbmcgcm93IGFuZCBjb2x1bW4sIGFyZSBlcXVpdmFsZW50IHRvIHRob3NlIGdpdmVuIGJ5IGByYW5nZWAuXG4gICAgICogQHBhcmFtIHtFZGl0b3JSYW5nZX0gcmFuZ2UgQSByYW5nZSB0byBjaGVjayBhZ2FpbnN0XG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqKi9cbiAgICBpc0VxdWFsKHJhbmdlOiB7IHN0YXJ0OiB7IHJvdzogbnVtYmVyOyBjb2x1bW46IG51bWJlciB9OyBlbmQ6IHsgcm93OiBudW1iZXI7IGNvbHVtbjogbnVtYmVyIH0gfSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGFydC5yb3cgPT09IHJhbmdlLnN0YXJ0LnJvdyAmJlxuICAgICAgICAgICAgdGhpcy5lbmQucm93ID09PSByYW5nZS5lbmQucm93ICYmXG4gICAgICAgICAgICB0aGlzLnN0YXJ0LmNvbHVtbiA9PT0gcmFuZ2Uuc3RhcnQuY29sdW1uICYmXG4gICAgICAgICAgICB0aGlzLmVuZC5jb2x1bW4gPT09IHJhbmdlLmVuZC5jb2x1bW47XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIGNvbnRhaW5pbmcgdGhlIHJhbmdlJ3Mgcm93IGFuZCBjb2x1bW4gaW5mb3JtYXRpb24sIGdpdmVuIGxpa2UgdGhpczpcbiAgICAgKiBgYGBcbiAgICAgKiAgICBbc3RhcnQucm93L3N0YXJ0LmNvbHVtbl0gLT4gW2VuZC5yb3cvZW5kLmNvbHVtbl1cbiAgICAgKiBgYGBcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAgICoqL1xuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gKFwiUmFuZ2U6IFtcIiArIHRoaXMuc3RhcnQucm93ICsgXCIvXCIgKyB0aGlzLnN0YXJ0LmNvbHVtbiArXG4gICAgICAgICAgICBcIl0gLT4gW1wiICsgdGhpcy5lbmQucm93ICsgXCIvXCIgKyB0aGlzLmVuZC5jb2x1bW4gKyBcIl1cIik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHJvd2AgYW5kIGBjb2x1bW5gIHByb3ZpZGVkIGFyZSB3aXRoaW4gdGhlIGdpdmVuIHJhbmdlLiBUaGlzIGNhbiBiZXR0ZXIgYmUgZXhwcmVzc2VkIGFzIHJldHVybmluZyBgdHJ1ZWAgaWY6XG4gICAgICogYGBgamF2YXNjcmlwdFxuICAgICAqICAgIHRoaXMuc3RhcnQucm93IDw9IHJvdyA8PSB0aGlzLmVuZC5yb3cgJiZcbiAgICAgKiAgICB0aGlzLnN0YXJ0LmNvbHVtbiA8PSBjb2x1bW4gPD0gdGhpcy5lbmQuY29sdW1uXG4gICAgICogYGBgXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHJvdyBBIHJvdyB0byBjaGVjayBmb3JcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gY29sdW1uIEEgY29sdW1uIHRvIGNoZWNrIGZvclxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICAqIEByZWxhdGVkIEVkaXRvclJhbmdlLmNvbXBhcmVcbiAgICAgKiovXG5cbiAgICBjb250YWlucyhyb3c6IG51bWJlciwgY29sdW1uOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZShyb3csIGNvbHVtbikgPT09IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29tcGFyZXMgYHRoaXNgIHJhbmdlIChBKSB3aXRoIGFub3RoZXIgcmFuZ2UgKEIpLlxuICAgICAqIEBwYXJhbSB7RWRpdG9yUmFuZ2V9IHJhbmdlIEEgcmFuZ2UgdG8gY29tcGFyZSB3aXRoXG4gICAgICpcbiAgICAgKiBAcmVsYXRlZCBFZGl0b3JSYW5nZS5jb21wYXJlXG4gICAgICogQHJldHVybnMge051bWJlcn0gVGhpcyBtZXRob2QgcmV0dXJucyBvbmUgb2YgdGhlIGZvbGxvd2luZyBudW1iZXJzOjxici8+XG4gICAgICogPGJyLz5cbiAgICAgKiAqIGAtMmA6IChCKSBpcyBpbiBmcm9udCBvZiAoQSksIGFuZCBkb2Vzbid0IGludGVyc2VjdCB3aXRoIChBKTxici8+XG4gICAgICogKiBgLTFgOiAoQikgYmVnaW5zIGJlZm9yZSAoQSkgYnV0IGVuZHMgaW5zaWRlIG9mIChBKTxici8+XG4gICAgICogKiBgMGA6IChCKSBpcyBjb21wbGV0ZWx5IGluc2lkZSBvZiAoQSkgT1IgKEEpIGlzIGNvbXBsZXRlbHkgaW5zaWRlIG9mIChCKTxici8+XG4gICAgICogKiBgKzFgOiAoQikgYmVnaW5zIGluc2lkZSBvZiAoQSkgYnV0IGVuZHMgb3V0c2lkZSBvZiAoQSk8YnIvPlxuICAgICAqICogYCsyYDogKEIpIGlzIGFmdGVyIChBKSBhbmQgZG9lc24ndCBpbnRlcnNlY3Qgd2l0aCAoQSk8YnIvPlxuICAgICAqICogYDQyYDogRlRXIHN0YXRlOiAoQikgZW5kcyBpbiAoQSkgYnV0IHN0YXJ0cyBvdXRzaWRlIG9mIChBKVxuICAgICAqKi9cbiAgICBjb21wYXJlUmFuZ2UocmFuZ2U6IFJhbmdlKTogbnVtYmVyIHtcbiAgICAgICAgdmFyIGNtcDogbnVtYmVyXG4gICAgICAgIHZhciBlbmQgPSByYW5nZS5lbmQ7XG4gICAgICAgIHZhciBzdGFydCA9IHJhbmdlLnN0YXJ0O1xuXG4gICAgICAgIGNtcCA9IHRoaXMuY29tcGFyZShlbmQucm93LCBlbmQuY29sdW1uKTtcbiAgICAgICAgaWYgKGNtcCA9PT0gMSkge1xuICAgICAgICAgICAgY21wID0gdGhpcy5jb21wYXJlKHN0YXJ0LnJvdywgc3RhcnQuY29sdW1uKTtcbiAgICAgICAgICAgIGlmIChjbXAgPT09IDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY21wID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIC0yO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY21wID0gdGhpcy5jb21wYXJlKHN0YXJ0LnJvdywgc3RhcnQuY29sdW1uKTtcbiAgICAgICAgICAgIGlmIChjbXAgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY21wID09PSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDQyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgdGhlIHJvdyBhbmQgY29sdW1uIHBvaW50cyBvZiBgcGAgd2l0aCB0aGUgcm93IGFuZCBjb2x1bW4gcG9pbnRzIG9mIHRoZSBjYWxsaW5nIHJhbmdlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFZGl0b3JSYW5nZX0gcCBBIHBvaW50IHRvIGNvbXBhcmUgd2l0aFxuICAgICAqXG4gICAgICogQHJlbGF0ZWQgRWRpdG9yUmFuZ2UuY29tcGFyZVxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoaXMgbWV0aG9kIHJldHVybnMgb25lIG9mIHRoZSBmb2xsb3dpbmcgbnVtYmVyczo8YnIvPlxuICAgICAqICogYDBgIGlmIHRoZSB0d28gcG9pbnRzIGFyZSBleGFjdGx5IGVxdWFsPGJyLz5cbiAgICAgKiAqIGAtMWAgaWYgYHAucm93YCBpcyBsZXNzIHRoZW4gdGhlIGNhbGxpbmcgcmFuZ2U8YnIvPlxuICAgICAqICogYDFgIGlmIGBwLnJvd2AgaXMgZ3JlYXRlciB0aGFuIHRoZSBjYWxsaW5nIHJhbmdlPGJyLz5cbiAgICAgKiA8YnIvPlxuICAgICAqIElmIHRoZSBzdGFydGluZyByb3cgb2YgdGhlIGNhbGxpbmcgcmFuZ2UgaXMgZXF1YWwgdG8gYHAucm93YCwgYW5kOjxici8+XG4gICAgICogKiBgcC5jb2x1bW5gIGlzIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB0aGUgY2FsbGluZyByYW5nZSdzIHN0YXJ0aW5nIGNvbHVtbiwgdGhpcyByZXR1cm5zIGAwYDxici8+XG4gICAgICogKiBPdGhlcndpc2UsIGl0IHJldHVybnMgLTE8YnIvPlxuICAgICAqPGJyLz5cbiAgICAgKiBJZiB0aGUgZW5kaW5nIHJvdyBvZiB0aGUgY2FsbGluZyByYW5nZSBpcyBlcXVhbCB0byBgcC5yb3dgLCBhbmQ6PGJyLz5cbiAgICAgKiAqIGBwLmNvbHVtbmAgaXMgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHRoZSBjYWxsaW5nIHJhbmdlJ3MgZW5kaW5nIGNvbHVtbiwgdGhpcyByZXR1cm5zIGAwYDxici8+XG4gICAgICogKiBPdGhlcndpc2UsIGl0IHJldHVybnMgMTxici8+XG4gICAgICoqL1xuICAgIGNvbXBhcmVQb2ludChwOiB7IHJvdzogbnVtYmVyOyBjb2x1bW46IG51bWJlciB9KTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZShwLnJvdywgcC5jb2x1bW4pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyB0aGUgc3RhcnQgYW5kIGVuZCBwb2ludHMgb2YgYHJhbmdlYCBhbmQgY29tcGFyZXMgdGhlbSB0byB0aGUgY2FsbGluZyByYW5nZS4gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGByYW5nZWAgaXMgY29udGFpbmVkIHdpdGhpbiB0aGUgY2FsbGVyJ3MgcmFuZ2UuXG4gICAgICogQHBhcmFtIHtFZGl0b3JSYW5nZX0gcmFuZ2UgQSByYW5nZSB0byBjb21wYXJlIHdpdGhcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICAqIEByZWxhdGVkIEVkaXRvclJhbmdlLmNvbXBhcmVQb2ludFxuICAgICAqKi9cbiAgICBjb250YWluc1JhbmdlKHJhbmdlOiB7IHN0YXJ0OiB7IHJvdzogbnVtYmVyOyBjb2x1bW46IG51bWJlciB9OyBlbmQ6IHsgcm93OiBudW1iZXI7IGNvbHVtbjogbnVtYmVyIH0gfSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21wYXJlUG9pbnQocmFuZ2Uuc3RhcnQpID09PSAwICYmIHRoaXMuY29tcGFyZVBvaW50KHJhbmdlLmVuZCkgPT09IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgcGFzc2VkIGluIGByYW5nZWAgaW50ZXJzZWN0cyB3aXRoIHRoZSBvbmUgY2FsbGluZyB0aGlzIG1ldGhvZC5cbiAgICAgKiBAcGFyYW0ge0VkaXRvclJhbmdlfSByYW5nZSBBIHJhbmdlIHRvIGNvbXBhcmUgd2l0aFxuICAgICAqXG4gICAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAgICoqL1xuICAgIGludGVyc2VjdHMocmFuZ2U6IFJhbmdlKSB7XG4gICAgICAgIHZhciBjbXAgPSB0aGlzLmNvbXBhcmVSYW5nZShyYW5nZSk7XG4gICAgICAgIHJldHVybiAoY21wID09PSAtMSB8fCBjbXAgPT09IDAgfHwgY21wID09PSAxKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgY2FsbGVyJ3MgZW5kaW5nIHJvdyBwb2ludCBpcyB0aGUgc2FtZSBhcyBgcm93YCwgYW5kIGlmIHRoZSBjYWxsZXIncyBlbmRpbmcgY29sdW1uIGlzIHRoZSBzYW1lIGFzIGBjb2x1bW5gLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSByb3cgQSByb3cgcG9pbnQgdG8gY29tcGFyZSB3aXRoXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGNvbHVtbiBBIGNvbHVtbiBwb2ludCB0byBjb21wYXJlIHdpdGhcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICAqKi9cbiAgICBpc0VuZChyb3c6IG51bWJlciwgY29sdW1uOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5kLnJvdyA9PT0gcm93ICYmIHRoaXMuZW5kLmNvbHVtbiA9PT0gY29sdW1uO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBjYWxsZXIncyBzdGFydGluZyByb3cgcG9pbnQgaXMgdGhlIHNhbWUgYXMgYHJvd2AsIGFuZCBpZiB0aGUgY2FsbGVyJ3Mgc3RhcnRpbmcgY29sdW1uIGlzIHRoZSBzYW1lIGFzIGBjb2x1bW5gLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSByb3cgQSByb3cgcG9pbnQgdG8gY29tcGFyZSB3aXRoXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGNvbHVtbiBBIGNvbHVtbiBwb2ludCB0byBjb21wYXJlIHdpdGhcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICAqKi9cbiAgICBpc1N0YXJ0KHJvdzogbnVtYmVyLCBjb2x1bW46IG51bWJlcik6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGFydC5yb3cgPT09IHJvdyAmJiB0aGlzLnN0YXJ0LmNvbHVtbiA9PT0gY29sdW1uO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHN0YXJ0aW5nIHJvdyBhbmQgY29sdW1uIGZvciB0aGUgcmFuZ2UuXG4gICAgICogQHBhcmFtIHJvdyB7bnVtYmVyfSBBIHJvdyBwb2ludCB0byBzZXRcbiAgICAgKiBAcGFyYW0gY29sdW1uIHtudW1iZXJ9IEEgY29sdW1uIHBvaW50IHRvIHNldFxuICAgICAqXG4gICAgICoqL1xuICAgIHNldFN0YXJ0KHJvdzogbnVtYmVyLCBjb2x1bW46IG51bWJlcik6IHZvaWQge1xuICAgICAgICBpZiAodHlwZW9mIHJvdyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgLy8gRmFsbGJhY2sgdW50aWwgY29kZSBpcyBjb21wbGV0ZWx5IHR5cGVkLlxuICAgICAgICAgICAgdGhpcy5zdGFydC5jb2x1bW4gPSByb3dbJ2NvbHVtbiddO1xuICAgICAgICAgICAgdGhpcy5zdGFydC5yb3cgPSByb3dbJ3JvdyddO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGFydC5yb3cgPSByb3c7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0LmNvbHVtbiA9IGNvbHVtbjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHN0YXJ0aW5nIHJvdyBhbmQgY29sdW1uIGZvciB0aGUgcmFuZ2UuXG4gICAgICogQHBhcmFtIHJvdyB7bnVtYmVyfSBBIHJvdyBwb2ludCB0byBzZXRcbiAgICAgKiBAcGFyYW0gY29sdW1uIHtudW1iZXJ9IEEgY29sdW1uIHBvaW50IHRvIHNldFxuICAgICAqXG4gICAgICoqL1xuICAgIHNldEVuZChyb3c6IG51bWJlciwgY29sdW1uOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgaWYgKHR5cGVvZiByb3cgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIC8vIEZhbGxiYWNrIHVudGlsIGNvZGUgaXMgY29tcGxldGVseSB0eXBlZC5cbiAgICAgICAgICAgIHRoaXMuZW5kLmNvbHVtbiA9IHJvd1snY29sdW1uJ107XG4gICAgICAgICAgICB0aGlzLmVuZC5yb3cgPSByb3dbJ3JvdyddO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lbmQucm93ID0gcm93O1xuICAgICAgICAgICAgdGhpcy5lbmQuY29sdW1uID0gY29sdW1uO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGByb3dgIGFuZCBgY29sdW1uYCBhcmUgd2l0aGluIHRoZSBnaXZlbiByYW5nZS5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcm93IEEgcm93IHBvaW50IHRvIGNvbXBhcmUgd2l0aFxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBjb2x1bW4gQSBjb2x1bW4gcG9pbnQgdG8gY29tcGFyZSB3aXRoXG4gICAgICpcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICAqIEByZWxhdGVkIEVkaXRvclJhbmdlLmNvbXBhcmVcbiAgICAgKiovXG4gICAgaW5zaWRlKHJvdzogbnVtYmVyLCBjb2x1bW46IG51bWJlcik6IGJvb2xlYW4ge1xuICAgICAgICBpZiAodGhpcy5jb21wYXJlKHJvdywgY29sdW1uKSA9PT0gMCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNFbmQocm93LCBjb2x1bW4pIHx8IHRoaXMuaXNTdGFydChyb3csIGNvbHVtbikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGByb3dgIGFuZCBgY29sdW1uYCBhcmUgd2l0aGluIHRoZSBnaXZlbiByYW5nZSdzIHN0YXJ0aW5nIHBvaW50cy5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcm93IEEgcm93IHBvaW50IHRvIGNvbXBhcmUgd2l0aFxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBjb2x1bW4gQSBjb2x1bW4gcG9pbnQgdG8gY29tcGFyZSB3aXRoXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAgICAgKiBAcmVsYXRlZCBFZGl0b3JSYW5nZS5jb21wYXJlXG4gICAgICoqL1xuICAgIGluc2lkZVN0YXJ0KHJvdzogbnVtYmVyLCBjb2x1bW46IG51bWJlcik6IGJvb2xlYW4ge1xuICAgICAgICBpZiAodGhpcy5jb21wYXJlKHJvdywgY29sdW1uKSA9PT0gMCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNFbmQocm93LCBjb2x1bW4pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBgcm93YCBhbmQgYGNvbHVtbmAgYXJlIHdpdGhpbiB0aGUgZ2l2ZW4gcmFuZ2UncyBlbmRpbmcgcG9pbnRzLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSByb3cgQSByb3cgcG9pbnQgdG8gY29tcGFyZSB3aXRoXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGNvbHVtbiBBIGNvbHVtbiBwb2ludCB0byBjb21wYXJlIHdpdGhcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICAqIEByZWxhdGVkIEVkaXRvclJhbmdlLmNvbXBhcmVcbiAgICAgKlxuICAgICAqKi9cbiAgICBpbnNpZGVFbmQocm93OiBudW1iZXIsIGNvbHVtbjogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICh0aGlzLmNvbXBhcmUocm93LCBjb2x1bW4pID09PSAwKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1N0YXJ0KHJvdywgY29sdW1uKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgdGhlIHJvdyBhbmQgY29sdW1uIHBvaW50cyB3aXRoIHRoZSByb3cgYW5kIGNvbHVtbiBwb2ludHMgb2YgdGhlIGNhbGxpbmcgcmFuZ2UuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHJvdyBBIHJvdyBwb2ludCB0byBjb21wYXJlIHdpdGhcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gY29sdW1uIEEgY29sdW1uIHBvaW50IHRvIGNvbXBhcmUgd2l0aFxuICAgICAqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfSBUaGlzIG1ldGhvZCByZXR1cm5zIG9uZSBvZiB0aGUgZm9sbG93aW5nIG51bWJlcnM6PGJyLz5cbiAgICAgKiBgMGAgaWYgdGhlIHR3byBwb2ludHMgYXJlIGV4YWN0bHkgZXF1YWwgPGJyLz5cbiAgICAgKiBgLTFgIGlmIGBwLnJvd2AgaXMgbGVzcyB0aGVuIHRoZSBjYWxsaW5nIHJhbmdlIDxici8+XG4gICAgICogYDFgIGlmIGBwLnJvd2AgaXMgZ3JlYXRlciB0aGFuIHRoZSBjYWxsaW5nIHJhbmdlIDxici8+XG4gICAgICogIDxici8+XG4gICAgICogSWYgdGhlIHN0YXJ0aW5nIHJvdyBvZiB0aGUgY2FsbGluZyByYW5nZSBpcyBlcXVhbCB0byBgcC5yb3dgLCBhbmQ6IDxici8+XG4gICAgICogYHAuY29sdW1uYCBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIGNhbGxpbmcgcmFuZ2UncyBzdGFydGluZyBjb2x1bW4sIHRoaXMgcmV0dXJucyBgMGA8YnIvPlxuICAgICAqIE90aGVyd2lzZSwgaXQgcmV0dXJucyAtMTxici8+XG4gICAgICogPGJyLz5cbiAgICAgKiBJZiB0aGUgZW5kaW5nIHJvdyBvZiB0aGUgY2FsbGluZyByYW5nZSBpcyBlcXVhbCB0byBgcC5yb3dgLCBhbmQ6IDxici8+XG4gICAgICogYHAuY29sdW1uYCBpcyBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIGNhbGxpbmcgcmFuZ2UncyBlbmRpbmcgY29sdW1uLCB0aGlzIHJldHVybnMgYDBgIDxici8+XG4gICAgICogT3RoZXJ3aXNlLCBpdCByZXR1cm5zIDFcbiAgICAgKiovXG4gICAgY29tcGFyZShyb3c6IG51bWJlciwgY29sdW1uOiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICBpZiAoIXRoaXMuaXNNdWx0aUxpbmUoKSkge1xuICAgICAgICAgICAgaWYgKHJvdyA9PT0gdGhpcy5zdGFydC5yb3cpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29sdW1uIDwgdGhpcy5zdGFydC5jb2x1bW4gPyAtMSA6IChjb2x1bW4gPiB0aGlzLmVuZC5jb2x1bW4gPyAxIDogMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocm93IDwgdGhpcy5zdGFydC5yb3cpXG4gICAgICAgICAgICByZXR1cm4gLTE7XG5cbiAgICAgICAgaWYgKHJvdyA+IHRoaXMuZW5kLnJvdylcbiAgICAgICAgICAgIHJldHVybiAxO1xuXG4gICAgICAgIGlmICh0aGlzLnN0YXJ0LnJvdyA9PT0gcm93KVxuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbiA+PSB0aGlzLnN0YXJ0LmNvbHVtbiA/IDAgOiAtMTtcblxuICAgICAgICBpZiAodGhpcy5lbmQucm93ID09PSByb3cpXG4gICAgICAgICAgICByZXR1cm4gY29sdW1uIDw9IHRoaXMuZW5kLmNvbHVtbiA/IDAgOiAxO1xuXG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyB0aGUgcm93IGFuZCBjb2x1bW4gcG9pbnRzIHdpdGggdGhlIHJvdyBhbmQgY29sdW1uIHBvaW50cyBvZiB0aGUgY2FsbGluZyByYW5nZS5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcm93IEEgcm93IHBvaW50IHRvIGNvbXBhcmUgd2l0aFxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBjb2x1bW4gQSBjb2x1bW4gcG9pbnQgdG8gY29tcGFyZSB3aXRoXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfSBUaGlzIG1ldGhvZCByZXR1cm5zIG9uZSBvZiB0aGUgZm9sbG93aW5nIG51bWJlcnM6PGJyLz5cbiAgICAgKiA8YnIvPlxuICAgICAqIGAwYCBpZiB0aGUgdHdvIHBvaW50cyBhcmUgZXhhY3RseSBlcXVhbDxici8+XG4gICAgICogYC0xYCBpZiBgcC5yb3dgIGlzIGxlc3MgdGhlbiB0aGUgY2FsbGluZyByYW5nZTxici8+XG4gICAgICogYDFgIGlmIGBwLnJvd2AgaXMgZ3JlYXRlciB0aGFuIHRoZSBjYWxsaW5nIHJhbmdlLCBvciBpZiBgaXNTdGFydGAgaXMgYHRydWVgLjxici8+XG4gICAgICogPGJyLz5cbiAgICAgKiBJZiB0aGUgc3RhcnRpbmcgcm93IG9mIHRoZSBjYWxsaW5nIHJhbmdlIGlzIGVxdWFsIHRvIGBwLnJvd2AsIGFuZDo8YnIvPlxuICAgICAqIGBwLmNvbHVtbmAgaXMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHRoZSBjYWxsaW5nIHJhbmdlJ3Mgc3RhcnRpbmcgY29sdW1uLCB0aGlzIHJldHVybnMgYDBgPGJyLz5cbiAgICAgKiBPdGhlcndpc2UsIGl0IHJldHVybnMgLTE8YnIvPlxuICAgICAqIDxici8+XG4gICAgICogSWYgdGhlIGVuZGluZyByb3cgb2YgdGhlIGNhbGxpbmcgcmFuZ2UgaXMgZXF1YWwgdG8gYHAucm93YCwgYW5kOjxici8+XG4gICAgICogYHAuY29sdW1uYCBpcyBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIGNhbGxpbmcgcmFuZ2UncyBlbmRpbmcgY29sdW1uLCB0aGlzIHJldHVybnMgYDBgPGJyLz5cbiAgICAgKiBPdGhlcndpc2UsIGl0IHJldHVybnMgMVxuICAgICAqXG4gICAgICoqL1xuICAgIGNvbXBhcmVTdGFydChyb3c6IG51bWJlciwgY29sdW1uOiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICBpZiAodGhpcy5zdGFydC5yb3cgPT09IHJvdyAmJiB0aGlzLnN0YXJ0LmNvbHVtbiA9PT0gY29sdW1uKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb21wYXJlKHJvdywgY29sdW1uKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyB0aGUgcm93IGFuZCBjb2x1bW4gcG9pbnRzIHdpdGggdGhlIHJvdyBhbmQgY29sdW1uIHBvaW50cyBvZiB0aGUgY2FsbGluZyByYW5nZS5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcm93IEEgcm93IHBvaW50IHRvIGNvbXBhcmUgd2l0aFxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBjb2x1bW4gQSBjb2x1bW4gcG9pbnQgdG8gY29tcGFyZSB3aXRoXG4gICAgICpcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoaXMgbWV0aG9kIHJldHVybnMgb25lIG9mIHRoZSBmb2xsb3dpbmcgbnVtYmVyczo8YnIvPlxuICAgICAqIGAwYCBpZiB0aGUgdHdvIHBvaW50cyBhcmUgZXhhY3RseSBlcXVhbDxici8+XG4gICAgICogYC0xYCBpZiBgcC5yb3dgIGlzIGxlc3MgdGhlbiB0aGUgY2FsbGluZyByYW5nZTxici8+XG4gICAgICogYDFgIGlmIGBwLnJvd2AgaXMgZ3JlYXRlciB0aGFuIHRoZSBjYWxsaW5nIHJhbmdlLCBvciBpZiBgaXNFbmRgIGlzIGB0cnVlLjxici8+XG4gICAgICogPGJyLz5cbiAgICAgKiBJZiB0aGUgc3RhcnRpbmcgcm93IG9mIHRoZSBjYWxsaW5nIHJhbmdlIGlzIGVxdWFsIHRvIGBwLnJvd2AsIGFuZDo8YnIvPlxuICAgICAqIGBwLmNvbHVtbmAgaXMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHRoZSBjYWxsaW5nIHJhbmdlJ3Mgc3RhcnRpbmcgY29sdW1uLCB0aGlzIHJldHVybnMgYDBgPGJyLz5cbiAgICAgKiBPdGhlcndpc2UsIGl0IHJldHVybnMgLTE8YnIvPlxuICAgICAqPGJyLz5cbiAgICAgKiBJZiB0aGUgZW5kaW5nIHJvdyBvZiB0aGUgY2FsbGluZyByYW5nZSBpcyBlcXVhbCB0byBgcC5yb3dgLCBhbmQ6PGJyLz5cbiAgICAgKiBgcC5jb2x1bW5gIGlzIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgY2FsbGluZyByYW5nZSdzIGVuZGluZyBjb2x1bW4sIHRoaXMgcmV0dXJucyBgMGA8YnIvPlxuICAgICAqIE90aGVyd2lzZSwgaXQgcmV0dXJucyAxXG4gICAgICovXG4gICAgY29tcGFyZUVuZChyb3c6IG51bWJlciwgY29sdW1uOiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICBpZiAodGhpcy5lbmQucm93ID09PSByb3cgJiYgdGhpcy5lbmQuY29sdW1uID09PSBjb2x1bW4pIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZShyb3csIGNvbHVtbik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgdGhlIHJvdyBhbmQgY29sdW1uIHBvaW50cyB3aXRoIHRoZSByb3cgYW5kIGNvbHVtbiBwb2ludHMgb2YgdGhlIGNhbGxpbmcgcmFuZ2UuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHJvdyBBIHJvdyBwb2ludCB0byBjb21wYXJlIHdpdGhcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gY29sdW1uIEEgY29sdW1uIHBvaW50IHRvIGNvbXBhcmUgd2l0aFxuICAgICAqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfSBUaGlzIG1ldGhvZCByZXR1cm5zIG9uZSBvZiB0aGUgZm9sbG93aW5nIG51bWJlcnM6PGJyLz5cbiAgICAgKiAqIGAxYCBpZiB0aGUgZW5kaW5nIHJvdyBvZiB0aGUgY2FsbGluZyByYW5nZSBpcyBlcXVhbCB0byBgcm93YCwgYW5kIHRoZSBlbmRpbmcgY29sdW1uIG9mIHRoZSBjYWxsaW5nIHJhbmdlIGlzIGVxdWFsIHRvIGBjb2x1bW5gPGJyLz5cbiAgICAgKiAqIGAtMWAgaWYgdGhlIHN0YXJ0aW5nIHJvdyBvZiB0aGUgY2FsbGluZyByYW5nZSBpcyBlcXVhbCB0byBgcm93YCwgYW5kIHRoZSBzdGFydGluZyBjb2x1bW4gb2YgdGhlIGNhbGxpbmcgcmFuZ2UgaXMgZXF1YWwgdG8gYGNvbHVtbmA8YnIvPlxuICAgICAqIDxici8+XG4gICAgICogT3RoZXJ3aXNlLCBpdCByZXR1cm5zIHRoZSB2YWx1ZSBhZnRlciBjYWxsaW5nIFtbRWRpdG9yUmFuZ2UuY29tcGFyZSBgY29tcGFyZSgpYF1dLlxuICAgICAqXG4gICAgICoqL1xuICAgIGNvbXBhcmVJbnNpZGUocm93OiBudW1iZXIsIGNvbHVtbjogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgaWYgKHRoaXMuZW5kLnJvdyA9PT0gcm93ICYmIHRoaXMuZW5kLmNvbHVtbiA9PT0gY29sdW1uKSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnN0YXJ0LnJvdyA9PT0gcm93ICYmIHRoaXMuc3RhcnQuY29sdW1uID09PSBjb2x1bW4pIHtcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBhcmUocm93LCBjb2x1bW4pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgcGFydCBvZiB0aGUgY3VycmVudCBgRWRpdG9yUmFuZ2VgIHRoYXQgb2NjdXJzIHdpdGhpbiB0aGUgYm91bmRhcmllcyBvZiBgZmlyc3RSb3dgIGFuZCBgbGFzdFJvd2AgYXMgYSBuZXcgYEVkaXRvclJhbmdlYCBvYmplY3QuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGZpcnN0Um93IFRoZSBzdGFydGluZyByb3dcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gbGFzdFJvdyBUaGUgZW5kaW5nIHJvd1xuICAgICAqIEByZXR1cm5zIHtFZGl0b3JSYW5nZX1cbiAgICAqKi9cbiAgICBjbGlwUm93cyhmaXJzdFJvdzogbnVtYmVyLCBsYXN0Um93OiBudW1iZXIpOiBSYW5nZSB7XG4gICAgICAgIHZhciBzdGFydDogeyByb3c6IG51bWJlcjsgY29sdW1uOiBudW1iZXIgfTtcbiAgICAgICAgdmFyIGVuZDogeyByb3c6IG51bWJlcjsgY29sdW1uOiBudW1iZXIgfTtcbiAgICAgICAgaWYgKHRoaXMuZW5kLnJvdyA+IGxhc3RSb3cpXG4gICAgICAgICAgICBlbmQgPSB7IHJvdzogbGFzdFJvdyArIDEsIGNvbHVtbjogMCB9O1xuICAgICAgICBlbHNlIGlmICh0aGlzLmVuZC5yb3cgPCBmaXJzdFJvdylcbiAgICAgICAgICAgIGVuZCA9IHsgcm93OiBmaXJzdFJvdywgY29sdW1uOiAwIH07XG5cbiAgICAgICAgaWYgKHRoaXMuc3RhcnQucm93ID4gbGFzdFJvdylcbiAgICAgICAgICAgIHN0YXJ0ID0geyByb3c6IGxhc3RSb3cgKyAxLCBjb2x1bW46IDAgfTtcbiAgICAgICAgZWxzZSBpZiAodGhpcy5zdGFydC5yb3cgPCBmaXJzdFJvdylcbiAgICAgICAgICAgIHN0YXJ0ID0geyByb3c6IGZpcnN0Um93LCBjb2x1bW46IDAgfTtcblxuICAgICAgICByZXR1cm4gUmFuZ2UuZnJvbVBvaW50cyhzdGFydCB8fCB0aGlzLnN0YXJ0LCBlbmQgfHwgdGhpcy5lbmQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdGhlIHJvdyBhbmQgY29sdW1uIHBvaW50cyBmb3IgdGhlIGNhbGxpbmcgcmFuZ2UgZm9yIGJvdGggdGhlIHN0YXJ0aW5nIGFuZCBlbmRpbmcgcG9pbnRzLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSByb3cgQSBuZXcgcm93IHRvIGV4dGVuZCB0b1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBjb2x1bW4gQSBuZXcgY29sdW1uIHRvIGV4dGVuZCB0b1xuICAgICAqIEByZXR1cm5zIHtFZGl0b3JSYW5nZX0gVGhlIG9yaWdpbmFsIHJhbmdlIHdpdGggdGhlIG5ldyByb3dcbiAgICAqKi9cbiAgICBleHRlbmQocm93OiBudW1iZXIsIGNvbHVtbjogbnVtYmVyKTogUmFuZ2Uge1xuICAgICAgICB2YXIgY21wID0gdGhpcy5jb21wYXJlKHJvdywgY29sdW1uKTtcblxuICAgICAgICBpZiAoY21wID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjbXAgPT09IC0xKSB7XG4gICAgICAgICAgICB2YXIgc3RhcnQgPSB7IHJvdzogcm93LCBjb2x1bW46IGNvbHVtbiB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIGVuZCA9IHsgcm93OiByb3csIGNvbHVtbjogY29sdW1uIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFJhbmdlLmZyb21Qb2ludHMoc3RhcnQgfHwgdGhpcy5zdGFydCwgZW5kIHx8IHRoaXMuZW5kKTtcbiAgICB9XG5cbiAgICBpc0VtcHR5KCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gKHRoaXMuc3RhcnQucm93ID09PSB0aGlzLmVuZC5yb3cgJiYgdGhpcy5zdGFydC5jb2x1bW4gPT09IHRoaXMuZW5kLmNvbHVtbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHJhbmdlIHNwYW5zIGFjcm9zcyBtdWx0aXBsZSBsaW5lcy5cbiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAgICAgKi9cbiAgICBpc011bHRpTGluZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLnN0YXJ0LnJvdyAhPT0gdGhpcy5lbmQucm93KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFJldHVybnMgYSBkdXBsaWNhdGUgb2YgdGhlIGNhbGxpbmcgcmFuZ2UuXG4gICAgICogQHJldHVybnMge0VkaXRvclJhbmdlfVxuICAgICoqL1xuICAgIGNsb25lKCkge1xuICAgICAgICByZXR1cm4gUmFuZ2UuZnJvbVBvaW50cyh0aGlzLnN0YXJ0LCB0aGlzLmVuZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIGEgcmFuZ2UgY29udGFpbmluZyB0aGUgc3RhcnRpbmcgYW5kIGVuZGluZyByb3dzIG9mIHRoZSBvcmlnaW5hbCByYW5nZSwgYnV0IHdpdGggYSBjb2x1bW4gdmFsdWUgb2YgYDBgLlxuICAgICAqIEByZXR1cm5zIHtFZGl0b3JSYW5nZX1cbiAgICAqKi9cbiAgICBjb2xsYXBzZVJvd3MoKSB7XG4gICAgICAgIGlmICh0aGlzLmVuZC5jb2x1bW4gPT09IDApXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJhbmdlKHRoaXMuc3RhcnQucm93LCAwLCBNYXRoLm1heCh0aGlzLnN0YXJ0LnJvdywgdGhpcy5lbmQucm93IC0gMSksIDApXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmFuZ2UodGhpcy5zdGFydC5yb3csIDAsIHRoaXMuZW5kLnJvdywgMClcbiAgICB9XG5cbiAgICAvKiBleHBlcmltZW50YWwgKi9cbiAgICBtb3ZlQnkocm93OiBudW1iZXIsIGNvbHVtbjogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuc3RhcnQucm93ICs9IHJvdztcbiAgICAgICAgdGhpcy5zdGFydC5jb2x1bW4gKz0gY29sdW1uO1xuICAgICAgICB0aGlzLmVuZC5yb3cgKz0gcm93O1xuICAgICAgICB0aGlzLmVuZC5jb2x1bW4gKz0gY29sdW1uO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBuZXcgYEVkaXRvclJhbmdlYCBiYXNlZCBvbiB0aGUgcm93IGFuZCBjb2x1bW4gb2YgdGhlIGdpdmVuIHBhcmFtZXRlcnMuXG4gICAgICogQHBhcmFtIHtFZGl0b3JSYW5nZX0gc3RhcnQgQSBzdGFydGluZyBwb2ludCB0byB1c2VcbiAgICAgKiBAcGFyYW0ge0VkaXRvclJhbmdlfSBlbmQgQW4gZW5kaW5nIHBvaW50IHRvIHVzZVxuICAgICAqXG4gICAgICogQHJldHVybnMge0VkaXRvclJhbmdlfVxuICAgICoqL1xuICAgIHB1YmxpYyBzdGF0aWMgZnJvbVBvaW50cyhzdGFydDogeyByb3c6IG51bWJlcjsgY29sdW1uOiBudW1iZXIgfSwgZW5kOiB7IHJvdzogbnVtYmVyOyBjb2x1bW46IG51bWJlciB9KSB7XG4gICAgICAgIHJldHVybiBuZXcgUmFuZ2Uoc3RhcnQucm93LCBzdGFydC5jb2x1bW4sIGVuZC5yb3csIGVuZC5jb2x1bW4pO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgY29tcGFyZVBvaW50cyhwMTogeyByb3c6IG51bWJlcjsgY29sdW1uOiBudW1iZXIgfSwgcDI6IHsgcm93OiBudW1iZXI7IGNvbHVtbjogbnVtYmVyIH0pIHtcbiAgICAgICAgcmV0dXJuIHAxLnJvdyAtIHAyLnJvdyB8fCBwMS5jb2x1bW4gLSBwMi5jb2x1bW47XG4gICAgfVxufVxuIl19