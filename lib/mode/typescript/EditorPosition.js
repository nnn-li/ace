var EditorPosition = (function () {
    function EditorPosition(editor) {
        this.editor = editor;
    }
    EditorPosition.prototype.getPositionChars = function (pos) {
        var doc = this.editor.getSession().getDocument();
        return this.getChars(doc, pos);
    };
    EditorPosition.prototype.getPositionFromChars = function (chars) {
        var doc = this.editor.getSession().getDocument();
        return this.getPosition(doc, chars);
    };
    EditorPosition.prototype.getCurrentPositionChars = function () {
        return this.getPositionChars(this.editor.getCursorPosition());
    };
    EditorPosition.prototype.getCurrentLeftChar = function () {
        return this.getPositionLeftChar(this.editor.getCursorPosition());
    };
    EditorPosition.prototype.getTextAtCursorPosition = function (cursor) {
        var range;
        range = {
            start: {
                row: cursor.row,
                column: cursor.column
            },
            end: {
                row: cursor.row,
                column: cursor.column + 1
            }
        };
        return this.editor.getSession().getDocument().getTextRange(range);
    };
    EditorPosition.prototype.getPositionLeftChar = function (cursor) {
        var range;
        range = {
            start: {
                row: cursor.row,
                column: cursor.column
            },
            end: {
                row: cursor.row,
                column: cursor.column - 1
            }
        };
        return this.editor.getSession().getDocument().getTextRange(range);
    };
    EditorPosition.prototype.getLinesChars = function (lines) {
        var count = 0;
        lines.forEach(function (line) {
            return count += line.length + 1;
        });
        return count;
    };
    EditorPosition.prototype.getChars = function (doc, pos) {
        return this.getLinesChars(doc.getLines(0, pos.row - 1)) + pos.column;
    };
    EditorPosition.prototype.getPosition = function (doc, chars) {
        var i;
        var line;
        var lines = doc.getAllLines();
        var count = 0;
        var row = 0;
        for (i in lines) {
            line = lines[i];
            if (chars < (count + (line.length + 1))) {
                return {
                    row: row,
                    column: chars - count
                };
            }
            count += line.length + 1;
            row += 1;
        }
        return {
            row: row,
            column: chars - count
        };
    };
    return EditorPosition;
})();
module.exports = EditorPosition;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRWRpdG9yUG9zaXRpb24uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvbW9kZS90eXBlc2NyaXB0L0VkaXRvclBvc2l0aW9uLnRzIl0sIm5hbWVzIjpbIkVkaXRvclBvc2l0aW9uIiwiRWRpdG9yUG9zaXRpb24uY29uc3RydWN0b3IiLCJFZGl0b3JQb3NpdGlvbi5nZXRQb3NpdGlvbkNoYXJzIiwiRWRpdG9yUG9zaXRpb24uZ2V0UG9zaXRpb25Gcm9tQ2hhcnMiLCJFZGl0b3JQb3NpdGlvbi5nZXRDdXJyZW50UG9zaXRpb25DaGFycyIsIkVkaXRvclBvc2l0aW9uLmdldEN1cnJlbnRMZWZ0Q2hhciIsIkVkaXRvclBvc2l0aW9uLmdldFRleHRBdEN1cnNvclBvc2l0aW9uIiwiRWRpdG9yUG9zaXRpb24uZ2V0UG9zaXRpb25MZWZ0Q2hhciIsIkVkaXRvclBvc2l0aW9uLmdldExpbmVzQ2hhcnMiLCJFZGl0b3JQb3NpdGlvbi5nZXRDaGFycyIsIkVkaXRvclBvc2l0aW9uLmdldFBvc2l0aW9uIl0sIm1hcHBpbmdzIjoiQUFTQTtJQUVJQSx3QkFBWUEsTUFBY0E7UUFDdEJDLElBQUlBLENBQUNBLE1BQU1BLEdBQUdBLE1BQU1BLENBQUNBO0lBQ3pCQSxDQUFDQTtJQUNERCx5Q0FBZ0JBLEdBQWhCQSxVQUFpQkEsR0FBb0NBO1FBQ2pERSxJQUFJQSxHQUFHQSxHQUFHQSxJQUFJQSxDQUFDQSxNQUFNQSxDQUFDQSxVQUFVQSxFQUFFQSxDQUFDQSxXQUFXQSxFQUFFQSxDQUFDQTtRQUNqREEsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsR0FBR0EsRUFBRUEsR0FBR0EsQ0FBQ0EsQ0FBQ0E7SUFDbkNBLENBQUNBO0lBQ0RGLDZDQUFvQkEsR0FBcEJBLFVBQXFCQSxLQUFhQTtRQUM5QkcsSUFBSUEsR0FBR0EsR0FBR0EsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsVUFBVUEsRUFBRUEsQ0FBQ0EsV0FBV0EsRUFBRUEsQ0FB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QUFHQSxDQUFDQSxDQUFDQTtRQUNkQSxJQUFJQSxHQUFHQSxHQUFHQSxDQUFDQSxDQUFDQTtRQUVaQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxJQUFJQSxLQUFLQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNkQSxJQUFJQSxHQUFHQSxLQUFLQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNoQkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsS0FBS0EsR0FBR0EsQ0FBQ0EsS0FBS0EsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsTUFBTUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7Z0JBQ3RDQSxNQUFNQSxDQUFDQTtvQkFDSEEsR0FBR0EsRUFBRUEsR0FBR0E7b0JBQ1JBLE1BQU1BLEVBQUVBLEtBQUtBLEdBQUdBLEtBQUtBO2lCQUN4QkEsQ0FBQ0E7WUFDTkEsQ0FBQ0E7WUFDREEsS0FBS0EsSUFBSUEsSUFBSUEsQ0FBQ0EsTUFBTUEsR0FBR0EsQ0FBQ0EsQ0FBQ0E7WUFDekJBLEdBQUdBLElBQUlBLENBQUNBLENBQUNBO1FBQ2JBLENBQUNBO1FBQ0RBLE1BQU1BLENBQUNBO1lBQ0hBLEdBQUdBLEVBQUVBLEdBQUdBO1lBQ1JBLE1BQU1BLEVBQUVBLEtBQUtBLEdBQUdBLEtBQUtBO1NBQ3hCQSxDQUFDQTtJQUNOQSxDQUFDQTtJQUNMVixxQkFBQ0E7QUFBREEsQ0FBQ0EsQUFuRkQsSUFtRkM7QUFDRCxpQkFBUyxjQUFjLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ3Vyc29yUG9zaXRpb24gPSByZXF1aXJlKCcuLi8uLi9DdXJzb3JQb3NpdGlvbicpO1xuaW1wb3J0IEN1cnNvclJhbmdlID0gcmVxdWlyZSgnLi4vLi4vQ3Vyc29yUmFuZ2UnKTtcbmltcG9ydCBkY20gPSByZXF1aXJlKCcuLi8uLi9kb2N1bWVudCcpO1xuaW1wb3J0IEVkaXRvciA9IHJlcXVpcmUoJy4uLy4uL0VkaXRvcicpO1xuLyoqXG4gKiBBIHdyYXBwZXIgYXJvdW5kIGFuIEVkaXRvciB0byBwZXJmb3JtIGNvbnZlcnNpb25zIGJldHdlZW4gbGluZWFyIGNoYXJhY3Rlciwge3Jvdztjb2x1bW59IGFuZCBUZXh0UmFuZ2UgcmVwcmVzZW50YXRpb25zLlxuICogXG4gKiBUaGUgZWRpdG9yIGlzIGludGVncmFsIHRvIHRoZSBjb252ZXJzaW9uIGJlY2F1c2UgaXQga25vd3MgdGhlIGxlbmd0aHMgb2YgZWFjaCBsaW5lLlxuICovXG5jbGFzcyBFZGl0b3JQb3NpdGlvbiB7XG4gICAgcHJpdmF0ZSBlZGl0b3I6IEVkaXRvcjtcbiAgICBjb25zdHJ1Y3RvcihlZGl0b3I6IEVkaXRvcikge1xuICAgICAgICB0aGlzLmVkaXRvciA9IGVkaXRvcjtcbiAgICB9XG4gICAgZ2V0UG9zaXRpb25DaGFycyhwb3M6IHsgcm93OiBudW1iZXI7IGNvbHVtbjogbnVtYmVyIH0pOiBudW1iZXIge1xuICAgICAgICB2YXIgZG9jID0gdGhpcy5lZGl0b3IuZ2V0U2Vzc2lvbigpLmdldERvY3VtZW50KCk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldENoYXJzKGRvYywgcG9zKTtcbiAgICB9XG4gICAgZ2V0UG9zaXRpb25Gcm9tQ2hhcnMoY2hhcnM6IG51bWJlcik6IHsgcm93OiBudW1iZXI7IGNvbHVtbjogbnVtYmVyIH0ge1xuICAgICAgICB2YXIgZG9jID0gdGhpcy5lZGl0b3IuZ2V0U2Vzc2lvbigpLmdldERvY3VtZW50KCk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFBvc2l0aW9uKGRvYywgY2hhcnMpO1xuICAgIH1cbiAgICBnZXRDdXJyZW50UG9zaXRpb25DaGFycygpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRQb3NpdGlvbkNoYXJzKHRoaXMuZWRpdG9yLmdldEN1cnNvclBvc2l0aW9uKCkpO1xuICAgIH1cbiAgICBnZXRDdXJyZW50TGVmdENoYXIoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UG9zaXRpb25MZWZ0Q2hhcih0aGlzLmVkaXRvci5nZXRDdXJzb3JQb3NpdGlvbigpKTtcbiAgICB9XG4gICAgZ2V0VGV4dEF0Q3Vyc29yUG9zaXRpb24oY3Vyc29yOiBDdXJzb3JQb3NpdGlvbik6IHN0cmluZyB7XG4gICAgICAgIHZhciByYW5nZTogQ3Vyc29yUmFuZ2U7XG4gICAgICAgIHJhbmdlID0ge1xuICAgICAgICAgICAgc3RhcnQ6IHtcbiAgICAgICAgICAgICAgICByb3c6IGN1cnNvci5yb3csXG4gICAgICAgICAgICAgICAgY29sdW1uOiBjdXJzb3IuY29sdW1uXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW5kOiB7XG4gICAgICAgICAgICAgICAgcm93OiBjdXJzb3Iucm93LFxuICAgICAgICAgICAgICAgIGNvbHVtbjogY3Vyc29yLmNvbHVtbiArIDFcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gVGhlIGZpbmFsIGZ1bmN0aW9uIHdvdWxkIHByb2JhYmx5IGhhdmUgYmVlbiBiZXR0ZXIgbmFtZWQgJ2dldFRleHRJblJhbmdlJy5cbiAgICAgICAgcmV0dXJuIHRoaXMuZWRpdG9yLmdldFNlc3Npb24oKS5nZXREb2N1bWVudCgpLmdldFRleHRSYW5nZShyYW5nZSk7XG4gICAgfVxuICAgIGdldFBvc2l0aW9uTGVmdENoYXIoY3Vyc29yOiBDdXJzb3JQb3NpdGlvbik6IHN0cmluZyB7XG4gICAgICAgIHZhciByYW5nZTogQ3Vyc29yUmFuZ2U7XG4gICAgICAgIHJhbmdlID0ge1xuICAgICAgICAgICAgc3RhcnQ6IHtcbiAgICAgICAgICAgICAgICByb3c6IGN1cnNvci5yb3csXG4gICAgICAgICAgICAgICAgY29sdW1uOiBjdXJzb3IuY29sdW1uXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW5kOiB7XG4gICAgICAgICAgICAgICAgcm93OiBjdXJzb3Iucm93LFxuICAgICAgICAgICAgICAgIGNvbHVtbjogY3Vyc29yLmNvbHVtbiAtIDFcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5lZGl0b3IuZ2V0U2Vzc2lvbigpLmdldERvY3VtZW50KCkuZ2V0VGV4dFJhbmdlKHJhbmdlKTtcbiAgICB9XG4gICAgZ2V0TGluZXNDaGFycyhsaW5lczogc3RyaW5nW10pOiBudW1iZXIge1xuICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICBsaW5lcy5mb3JFYWNoKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgICAgIHJldHVybiBjb3VudCArPSBsaW5lLmxlbmd0aCArIDE7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gY291bnQ7XG4gICAgfVxuXG4gICAgZ2V0Q2hhcnMoZG9jOiBkY20uRG9jdW1lbnQsIHBvczogeyByb3c6IG51bWJlcjsgY29sdW1uOiBudW1iZXIgfSk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldExpbmVzQ2hhcnMoZG9jLmdldExpbmVzKDAsIHBvcy5yb3cgLSAxKSkgKyBwb3MuY29sdW1uO1xuICAgIH1cblxuICAgIGdldFBvc2l0aW9uKGRvYzogZGNtLkRvY3VtZW50LCBjaGFyczogbnVtYmVyKSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICB2YXIgbGluZTogc3RyaW5nO1xuICAgICAgICB2YXIgbGluZXMgPSBkb2MuZ2V0QWxsTGluZXMoKTtcbiAgICAgICAgdmFyIGNvdW50ID0gMDtcbiAgICAgICAgdmFyIHJvdyA9IDA7XG4gICAgICAgIC8vIEZJWE1FOiBQcm9iYWJseSBiZXR0ZXIgdG8gaW5zaXN0IHRoYXQgJ2knIGlzIGEgbnVtYmVyIGFuZCB1c2UgdGhlIGxpbmVzLmxlbmd0aFxuICAgICAgICBmb3IgKGkgaW4gbGluZXMpIHtcbiAgICAgICAgICAgIGxpbmUgPSBsaW5lc1tpXTtcbiAgICAgICAgICAgIGlmIChjaGFycyA8IChjb3VudCArIChsaW5lLmxlbmd0aCArIDEpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHJvdzogcm93LFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW46IGNoYXJzIC0gY291bnRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY291bnQgKz0gbGluZS5sZW5ndGggKyAxO1xuICAgICAgICAgICAgcm93ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJvdzogcm93LFxuICAgICAgICAgICAgY29sdW1uOiBjaGFycyAtIGNvdW50XG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0ID0gRWRpdG9yUG9zaXRpb247XG4iXX0=