import isWhitespace from './isWhitespace';
export default function CharacterBuffer(characters) {
    this.characters = characters;
    this.current = 0;
    this.end = this.characters.length;
}
CharacterBuffer.prototype.skipAtMostOneLeadingNewline = function () {
    if (this.characters[this.current] === '\n')
        this.current++;
};
CharacterBuffer.prototype.skipLeadingWhitespace = function () {
    while (isWhitespace(this.characters[this.current])) {
        if (++this.current == this.end)
            return;
    }
};
CharacterBuffer.prototype.skipLeadingNonWhitespace = function () {
    while (!isWhitespace(this.characters[this.current])) {
        if (++this.current == this.end)
            return;
    }
};
CharacterBuffer.prototype.takeRemaining = function () {
    return this.characters.substring(this.current);
};
CharacterBuffer.prototype.takeLeadingWhitespace = function () {
    var start = this.current;
    this.skipLeadingWhitespace();
    if (start === this.current)
        return "";
    return this.characters.substring(start, this.current - start);
};
Object.defineProperty(CharacterBuffer.prototype, 'length', {
    get: function () {
        return this.end - this.current;
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ2hhcmFjdGVyQnVmZmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL21vZGUvaHRtbC9DaGFyYWN0ZXJCdWZmZXIudHMiXSwibmFtZXMiOlsiQ2hhcmFjdGVyQnVmZmVyIl0sIm1hcHBpbmdzIjoiT0FBTyxZQUFZLE1BQU0sZ0JBQWdCO0FBRXpDLHdDQUF3QyxVQUFVO0lBQ2hEQSxJQUFJQSxDQUFDQSxVQUFVQSxHQUFHQSxVQUFVQSxDQUFDQTtJQUM3QkEsSUFBSUEsQ0FBQ0EsT0FBT0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7SUFDakJBLElBQUlBLENBQUNBLEdBQUdBLEdBQUdBLElBQUlBLENBQUNBLFVBQVVBLENBQUNBLE1BQU1BLENBQUNBO0FBQ3BDQSxDQUFDQTtBQUVELGVBQWUsQ0FBQyxTQUFTLENBQUMsMkJBQTJCLEdBQUc7SUFDdEQsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssSUFBSSxDQUFDO1FBQ3pDLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUNuQixDQUFDLENBQUM7QUFFRixlQUFlLENBQUMsU0FBUyxDQUFDLHFCQUFxQixHQUFHO0lBQ2hELE9BQU8sWUFBWSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUNuRCxFQUFFLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxPQUFPLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQztZQUM3QixNQUFNLENBQUM7SUFDWCxDQUFDO0FBQ0gsQ0FBQyxDQUFDO0FBRUYsZUFBZSxDQUFDLFNBQVMsQ0FBQyx3QkFBd0IsR0FBRztJQUNuRCxPQUFPLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUNwRCxFQUFFLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxPQUFPLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQztZQUM3QixNQUFNLENBQUM7SUFDWCxDQUFDO0FBQ0gsQ0FBQyxDQUFDO0FBRUYsZUFBZSxDQUFDLFNBQVMsQ0FBQyxhQUFhLEdBQUc7SUFDeEMsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUNqRCxDQUFDLENBQUM7QUFFRixlQUFlLENBQUMsU0FBUyxDQUFDLHFCQUFxQixHQUFHO0lBQ2hELElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUM7SUFDekIsSUFBSSxDQUFDLHFCQUFxQixFQUFFLENBQUM7SUFDN0IsRUFBRSxDQUFDLENBQUMsS0FBSyxLQUFLLElBQUksQ0FBQyxPQUFPLENBQUM7UUFDekIsTUFBTSxDQUFDLEVBQUUsQ0FBQztJQUNaLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUMsQ0FBQztBQUNoRSxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsY0FBYyxDQUFDLGVBQWUsQ0FBQyxTQUFTLEVBQUUsUUFBUSxFQUFFO0lBQ3pELEdBQUcsRUFBRTtRQUNILE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUM7SUFDakMsQ0FBQztDQUNGLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBpc1doaXRlc3BhY2UgZnJvbSAnLi9pc1doaXRlc3BhY2UnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDaGFyYWN0ZXJCdWZmZXIoY2hhcmFjdGVycykge1xuICB0aGlzLmNoYXJhY3RlcnMgPSBjaGFyYWN0ZXJzO1xuICB0aGlzLmN1cnJlbnQgPSAwO1xuICB0aGlzLmVuZCA9IHRoaXMuY2hhcmFjdGVycy5sZW5ndGg7XG59XG5cbkNoYXJhY3RlckJ1ZmZlci5wcm90b3R5cGUuc2tpcEF0TW9zdE9uZUxlYWRpbmdOZXdsaW5lID0gZnVuY3Rpb24oKSB7XG4gIGlmICh0aGlzLmNoYXJhY3RlcnNbdGhpcy5jdXJyZW50XSA9PT0gJ1xcbicpXG4gICAgdGhpcy5jdXJyZW50Kys7XG59O1xuXG5DaGFyYWN0ZXJCdWZmZXIucHJvdG90eXBlLnNraXBMZWFkaW5nV2hpdGVzcGFjZSA9IGZ1bmN0aW9uKCkge1xuICB3aGlsZSAoaXNXaGl0ZXNwYWNlKHRoaXMuY2hhcmFjdGVyc1t0aGlzLmN1cnJlbnRdKSkge1xuICAgIGlmICgrK3RoaXMuY3VycmVudCA9PSB0aGlzLmVuZClcbiAgICAgIHJldHVybjtcbiAgfVxufTtcblxuQ2hhcmFjdGVyQnVmZmVyLnByb3RvdHlwZS5za2lwTGVhZGluZ05vbldoaXRlc3BhY2UgPSBmdW5jdGlvbigpIHtcbiAgd2hpbGUgKCFpc1doaXRlc3BhY2UodGhpcy5jaGFyYWN0ZXJzW3RoaXMuY3VycmVudF0pKSB7XG4gICAgaWYgKCsrdGhpcy5jdXJyZW50ID09IHRoaXMuZW5kKVxuICAgICAgcmV0dXJuO1xuICB9XG59O1xuXG5DaGFyYWN0ZXJCdWZmZXIucHJvdG90eXBlLnRha2VSZW1haW5pbmcgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuY2hhcmFjdGVycy5zdWJzdHJpbmcodGhpcy5jdXJyZW50KTtcbn07XG5cbkNoYXJhY3RlckJ1ZmZlci5wcm90b3R5cGUudGFrZUxlYWRpbmdXaGl0ZXNwYWNlID0gZnVuY3Rpb24oKSB7XG4gIHZhciBzdGFydCA9IHRoaXMuY3VycmVudDtcbiAgdGhpcy5za2lwTGVhZGluZ1doaXRlc3BhY2UoKTtcbiAgaWYgKHN0YXJ0ID09PSB0aGlzLmN1cnJlbnQpXG4gICAgcmV0dXJuIFwiXCI7XG4gIHJldHVybiB0aGlzLmNoYXJhY3RlcnMuc3Vic3RyaW5nKHN0YXJ0LCB0aGlzLmN1cnJlbnQgLSBzdGFydCk7XG59O1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoQ2hhcmFjdGVyQnVmZmVyLnByb3RvdHlwZSwgJ2xlbmd0aCcsIHtcbiAgZ2V0OiBmdW5jdGlvbigpe1xuICAgIHJldHVybiB0aGlzLmVuZCAtIHRoaXMuY3VycmVudDtcbiAgfVxufSk7XG4iXX0=