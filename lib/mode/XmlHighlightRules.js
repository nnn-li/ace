import TextHighlightRules from "./TextHighlightRules";
export default class XmlHighlightRules extends TextHighlightRules {
    constructor(normalize) {
        super();
        this.$rules = {
            start: [
                { token: "string.cdata.xml", regex: "<\\!\\[CDATA\\[", next: "cdata" },
                {
                    token: ["punctuation.xml-decl.xml", "keyword.xml-decl.xml"],
                    regex: "(<\\?)(xml)(?=[\\s])", next: "xml_decl", caseInsensitive: true
                },
                {
                    token: ["punctuation.instruction.xml", "keyword.instruction.xml"],
                    regex: "(<\\?)([-_a-zA-Z0-9]+)", next: "processing_instruction",
                },
                { token: "comment.xml", regex: "<\\!--", next: "comment" },
                {
                    token: ["xml-pe.doctype.xml", "xml-pe.doctype.xml"],
                    regex: "(<\\!)(DOCTYPE)(?=[\\s])", next: "doctype", caseInsensitive: true
                },
                { include: "tag" },
                { token: "text.end-tag-open.xml", regex: "</" },
                { token: "text.tag-open.xml", regex: "<" },
                { include: "reference" },
                { defaultToken: "text.xml" }
            ],
            xml_decl: [{
                    token: "entity.other.attribute-name.decl-attribute-name.xml",
                    regex: "(?:[-_a-zA-Z0-9]+:)?[-_a-zA-Z0-9]+"
                }, {
                    token: "keyword.operator.decl-attribute-equals.xml",
                    regex: "="
                }, {
                    include: "whitespace"
                }, {
                    include: "string"
                }, {
                    token: "punctuation.xml-decl.xml",
                    regex: "\\?>",
                    next: "start"
                }],
            processing_instruction: [
                { token: "punctuation.instruction.xml", regex: "\\?>", next: "start" },
                { defaultToken: "instruction.xml" }
            ],
            doctype: [
                { include: "whitespace" },
                { include: "string" },
                { token: "xml-pe.doctype.xml", regex: ">", next: "start" },
                { token: "xml-pe.xml", regex: "[-_a-zA-Z0-9:]+" },
                { token: "punctuation.int-subset", regex: "\\[", push: "int_subset" }
            ],
            int_subset: [{
                    token: "text.xml",
                    regex: "\\s+"
                }, {
                    token: "punctuation.int-subset.xml",
                    regex: "]",
                    next: "pop"
                }, {
                    token: ["punctuation.markup-decl.xml", "keyword.markup-decl.xml"],
                    regex: "(<\\!)([-_a-zA-Z0-9]+)",
                    push: [{
                            token: "text",
                            regex: "\\s+"
                        },
                        {
                            token: "punctuation.markup-decl.xml",
                            regex: ">",
                            next: "pop"
                        },
                        { include: "string" }]
                }],
            cdata: [
                { token: "string.cdata.xml", regex: "\\]\\]>", next: "start" },
                { token: "text.xml", regex: "\\s+" },
                { token: "text.xml", regex: "(?:[^\\]]|\\](?!\\]>))+" }
            ],
            comment: [
                { token: "comment.xml", regex: "-->", next: "start" },
                { defaultToken: "comment.xml" }
            ],
            reference: [{
                    token: "constant.language.escape.reference.xml",
                    regex: "(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"
                }],
            attr_reference: [{
                    token: "constant.language.escape.reference.attribute-value.xml",
                    regex: "(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"
                }],
            tag: [{
                    token: ["meta.tag.punctuation.tag-open.xml", "meta.tag.punctuation.end-tag-open.xml", "meta.tag.tag-name.xml"],
                    regex: "(?:(<)|(</))((?:[-_a-zA-Z0-9]+:)?[-_a-zA-Z0-9]+)",
                    next: [
                        { include: "attributes" },
                        { token: "meta.tag.punctuation.tag-close.xml", regex: "/?>", next: "start" }
                    ]
                }],
            tag_whitespace: [
                { token: "text.tag-whitespace.xml", regex: "\\s+" }
            ],
            whitespace: [
                { token: "text.whitespace.xml", regex: "\\s+" }
            ],
            string: [{
                    token: "string.xml",
                    regex: "'",
                    push: [
                        { token: "string.xml", regex: "'", next: "pop" },
                        { defaultToken: "string.xml" }
                    ]
                }, {
                    token: "string.xml",
                    regex: '"',
                    push: [
                        { token: "string.xml", regex: '"', next: "pop" },
                        { defaultToken: "string.xml" }
                    ]
                }],
            attributes: [{
                    token: "entity.other.attribute-name.xml",
                    regex: "(?:[-_a-zA-Z0-9]+:)?[-_a-zA-Z0-9]+"
                }, {
                    token: "keyword.operator.attribute-equals.xml",
                    regex: "="
                }, {
                    include: "tag_whitespace"
                }, {
                    include: "attribute_value"
                }],
            attribute_value: [{
                    token: "string.attribute-value.xml",
                    regex: "'",
                    push: [
                        { token: "string.attribute-value.xml", regex: "'", next: "pop" },
                        { include: "attr_reference" },
                        { defaultToken: "string.attribute-value.xml" }
                    ]
                }, {
                    token: "string.attribute-value.xml",
                    regex: '"',
                    push: [
                        { token: "string.attribute-value.xml", regex: '"', next: "pop" },
                        { include: "attr_reference" },
                        { defaultToken: "string.attribute-value.xml" }
                    ]
                }]
        };
        if (this.constructor === XmlHighlightRules)
            this.normalizeRules();
    }
    embedTagRules(HighlightRules, prefix, tag) {
        this.$rules.tag.unshift({
            token: ["meta.tag.punctuation.tag-open.xml", "meta.tag." + tag + ".tag-name.xml"],
            regex: "(<)(" + tag + "(?=\\s|>|$))",
            next: [
                { include: "attributes" },
                { token: "meta.tag.punctuation.tag-close.xml", regex: "/?>", next: prefix + "start" }
            ]
        });
        this.$rules[tag + "-end"] = [
            { include: "attributes" },
            {
                token: "meta.tag.punctuation.tag-close.xml", regex: "/?>", next: "start",
                onMatch: function (value, currentState, stack) {
                    stack.splice(0);
                    return this.token;
                }
            }
        ];
        this.embedRules(HighlightRules, prefix, [{
                token: ["meta.tag.punctuation.end-tag-open.xml", "meta.tag." + tag + ".tag-name.xml"],
                regex: "(</)(" + tag + "(?=\\s|>|$))",
                next: tag + "-end"
            }, {
                token: "string.cdata.xml",
                regex: "<\\!\\[CDATA\\["
            }, {
                token: "string.cdata.xml",
                regex: "\\]\\]>"
            }]);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiWG1sSGlnaGxpZ2h0UnVsZXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvbW9kZS9YbWxIaWdobGlnaHRSdWxlcy50cyJdLCJuYW1lcyI6WyJYbWxIaWdobGlnaHRSdWxlcyIsIlhtbEhpZ2hsaWdodFJ1bGVzLmNvbnN0cnVjdG9yIiwiWG1sSGlnaGxpZ2h0UnVsZXMuZW1iZWRUYWdSdWxlcyJdLCJtYXBwaW5ncyI6Ik9BOEJPLGtCQUFrQixNQUFNLHNCQUFzQjtBQUVyRCwrQ0FBK0Msa0JBQWtCO0lBQzdEQSxZQUFZQSxTQUFtQkE7UUFDM0JDLE9BQU9BLENBQUNBO1FBQ1JBLElBQUlBLENBQUNBLE1BQU1BLEdBQUdBO1lBQ1ZBLEtBQUtBLEVBQUVBO2dCQUNIQSxFQUFFQSxLQUFLQSxFQUFFQSxrQkFBa0JBLEVBQUVBLEtBQUtBLEVBQUVBLGlCQUFpQkEsRUFBRUEsSUFBSUEsRUFBRUEsT0FBT0EsRUFBRUE7Z0JBQ3RFQTtvQkFDSUEsS0FBS0EsRUFBRUEsQ0FBQ0EsMEJBQTBCQSxFQUFFQSxzQkFBc0JBLENBQUNBO29CQUMzREEsS0FBS0EsRUFBRUEsc0JBQXNCQSxFQUFFQSxJQUFJQSxFQUFFQSxVQUFVQSxFQUFFQSxlQUFlQSxFQUFFQSxJQUFJQTtpQkFDekVBO2dCQUNEQTtvQkFDSUEsS0FBS0EsRUFBRUEsQ0FBQ0EsNkJBQTZCQSxFQUFFQSx5QkFBeUJBLENBQUNBO29CQUNqRUEsS0FBS0EsRUFBRUEsd0JBQXdCQSxFQUFFQSxJQUFJQSxFQUFFQSx3QkFBd0JBO2lCQUNsRUE7Z0JBQ0RBLEVBQUVBLEtBQUtBLEVBQUVBLGFBQWFBLEVBQUVBLEtBQUtBLEVBQUVBLFFBQVFBLEVBQUVBLElBQUlBLEVBQUVBLFNBQVNBLEVBQUVBO2dCQUMxREE7b0JBQ0lBLEtBQUtBLEVBQUVBLENBQUNBLG9CQUFvQkEsRUFBRUEsb0JBQW9CQSxDQUFDQTtvQkFDbkRBLEtBQUtBLEVBQUVBLDBCQUEwQkEsRUFBRUEsSUFBSUEsRUFBRUEsU0FB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WUFDekJBO2dCQUNJQSxLQUFLQSxFQUFFQSxvQ0FBb0NBLEVBQUVBLEtBQUtBLEVBQUVBLEtBQUtBLEVBQUVBLElBQUlBLEVBQUVBLE9BQU9BO2dCQUN4RUEsT0FBT0EsRUFBRUEsVUFBU0EsS0FBS0EsRUFBRUEsWUFBWUEsRUFBRUEsS0FBS0E7b0JBQ3hDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ2hCLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO2dCQUN0QixDQUFDO2FBQ0pBO1NBQ0pBLENBQUFBO1FBRURBLElBQUlBLENBQUNBLFVBQVVBLENBQUNBLGNBQWNBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBO2dCQUNyQ0EsS0FBS0EsRUFBRUEsQ0FBQ0EsdUNBQXVDQSxFQUFFQSxXQUFXQSxHQUFHQSxHQUFHQSxHQUFHQSxlQUFlQSxDQUFDQTtnQkFDckZBLEtBQUtBLEVBQUVBLE9BQU9BLEdBQUdBLEdBQUdBLEdBQUdBLGNBQWNBO2dCQUNyQ0EsSUFBSUEsRUFBRUEsR0FBR0EsR0FBR0EsTUFBTUE7YUFDckJBLEVBQUVBO2dCQUNLQSxLQUFLQSxFQUFFQSxrQkFBa0JBO2dCQUN6QkEsS0FBS0EsRUFBRUEsaUJBQWlCQTthQUMzQkEsRUFBRUE7Z0JBQ0NBLEtBQUtBLEVBQUVBLGtCQUFrQkE7Z0JBQ3pCQSxLQUFLQSxFQUFFQSxTQUFTQTthQUNuQkEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7SUFDWkEsQ0FBQ0E7QUFDTEYsQ0FBQ0E7QUFBQSIsInNvdXJjZXNDb250ZW50IjpbIi8qICoqKioqIEJFR0lOIExJQ0VOU0UgQkxPQ0sgKioqKipcbiAqIERpc3RyaWJ1dGVkIHVuZGVyIHRoZSBCU0QgbGljZW5zZTpcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTAsIEFqYXgub3JnIEIuVi5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0XG4gKiBtb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlIG1ldDpcbiAqICAgICAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0XG4gKiAgICAgICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4gKiAgICAgKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodFxuICogICAgICAgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZVxuICogICAgICAgZG9jdW1lbnRhdGlvbiBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cbiAqICAgICAqIE5laXRoZXIgdGhlIG5hbWUgb2YgQWpheC5vcmcgQi5WLiBub3IgdGhlXG4gKiAgICAgICBuYW1lcyBvZiBpdHMgY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0c1xuICogICAgICAgZGVyaXZlZCBmcm9tIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG4gKlxuICogVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCIgQU5EXG4gKiBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRFxuICogV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRVxuICogRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgQUpBWC5PUkcgQi5WLiBCRSBMSUFCTEUgRk9SIEFOWVxuICogRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVNcbiAqIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUztcbiAqIExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORFxuICogT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlRcbiAqIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTXG4gKiBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cbiAqXG4gKiAqKioqKiBFTkQgTElDRU5TRSBCTE9DSyAqKioqKiAqL1xuXG5pbXBvcnQgVGV4dEhpZ2hsaWdodFJ1bGVzIGZyb20gXCIuL1RleHRIaWdobGlnaHRSdWxlc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBYbWxIaWdobGlnaHRSdWxlcyBleHRlbmRzIFRleHRIaWdobGlnaHRSdWxlcyB7XG4gICAgY29uc3RydWN0b3Iobm9ybWFsaXplPzogYm9vbGVhbikge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLiRydWxlcyA9IHtcbiAgICAgICAgICAgIHN0YXJ0OiBbXG4gICAgICAgICAgICAgICAgeyB0b2tlbjogXCJzdHJpbmcuY2RhdGEueG1sXCIsIHJlZ2V4OiBcIjxcXFxcIVxcXFxbQ0RBVEFcXFxcW1wiLCBuZXh0OiBcImNkYXRhXCIgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRva2VuOiBbXCJwdW5jdHVhdGlvbi54bWwtZGVjbC54bWxcIiwgXCJrZXl3b3JkLnhtbC1kZWNsLnhtbFwiXSxcbiAgICAgICAgICAgICAgICAgICAgcmVnZXg6IFwiKDxcXFxcPykoeG1sKSg/PVtcXFxcc10pXCIsIG5leHQ6IFwieG1sX2RlY2xcIiwgY2FzZUluc2Vuc2l0aXZlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRva2VuOiBbXCJwdW5jdHVhdGlvbi5pbnN0cnVjdGlvbi54bWxcIiwgXCJrZXl3b3JkLmluc3RydWN0aW9uLnhtbFwiXSxcbiAgICAgICAgICAgICAgICAgICAgcmVnZXg6IFwiKDxcXFxcPykoWy1fYS16QS1aMC05XSspXCIsIG5leHQ6IFwicHJvY2Vzc2luZ19pbnN0cnVjdGlvblwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgeyB0b2tlbjogXCJjb21tZW50LnhtbFwiLCByZWdleDogXCI8XFxcXCEtLVwiLCBuZXh0OiBcImNvbW1lbnRcIiB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46IFtcInhtbC1wZS5kb2N0eXBlLnhtbFwiLCBcInhtbC1wZS5kb2N0eXBlLnhtbFwiXSxcbiAgICAgICAgICAgICAgICAgICAgcmVnZXg6IFwiKDxcXFxcISkoRE9DVFlQRSkoPz1bXFxcXHNdKVwiLCBuZXh0OiBcImRvY3R5cGVcIiwgY2FzZUluc2Vuc2l0aXZlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7IGluY2x1ZGU6IFwidGFnXCIgfSxcbiAgICAgICAgICAgICAgICB7IHRva2VuOiBcInRleHQuZW5kLXRhZy1vcGVuLnhtbFwiLCByZWdleDogXCI8L1wiIH0sXG4gICAgICAgICAgICAgICAgeyB0b2tlbjogXCJ0ZXh0LnRhZy1vcGVuLnhtbFwiLCByZWdleDogXCI8XCIgfSxcbiAgICAgICAgICAgICAgICB7IGluY2x1ZGU6IFwicmVmZXJlbmNlXCIgfSxcbiAgICAgICAgICAgICAgICB7IGRlZmF1bHRUb2tlbjogXCJ0ZXh0LnhtbFwiIH1cbiAgICAgICAgICAgIF0sXG5cbiAgICAgICAgICAgIHhtbF9kZWNsOiBbe1xuICAgICAgICAgICAgICAgIHRva2VuOiBcImVudGl0eS5vdGhlci5hdHRyaWJ1dGUtbmFtZS5kZWNsLWF0dHJpYnV0ZS1uYW1lLnhtbFwiLFxuICAgICAgICAgICAgICAgIHJlZ2V4OiBcIig/OlstX2EtekEtWjAtOV0rOik/Wy1fYS16QS1aMC05XStcIlxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICB0b2tlbjogXCJrZXl3b3JkLm9wZXJhdG9yLmRlY2wtYXR0cmlidXRlLWVxdWFscy54bWxcIixcbiAgICAgICAgICAgICAgICAgICAgcmVnZXg6IFwiPVwiXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBpbmNsdWRlOiBcIndoaXRlc3BhY2VcIlxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVkZTogXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46IFwicHVuY3R1YXRpb24ueG1sLWRlY2wueG1sXCIsXG4gICAgICAgICAgICAgICAgICAgIHJlZ2V4OiBcIlxcXFw/PlwiLFxuICAgICAgICAgICAgICAgICAgICBuZXh0OiBcInN0YXJ0XCJcbiAgICAgICAgICAgICAgICB9XSxcblxuICAgICAgICAgICAgcHJvY2Vzc2luZ19pbnN0cnVjdGlvbjogW1xuICAgICAgICAgICAgICAgIHsgdG9rZW46IFwicHVuY3R1YXRpb24uaW5zdHJ1Y3Rpb24ueG1sXCIsIHJlZ2V4OiBcIlxcXFw/PlwiLCBuZXh0OiBcInN0YXJ0XCIgfSxcbiAgICAgICAgICAgICAgICB7IGRlZmF1bHRUb2tlbjogXCJpbnN0cnVjdGlvbi54bWxcIiB9XG4gICAgICAgICAgICBdLFxuXG4gICAgICAgICAgICBkb2N0eXBlOiBbXG4gICAgICAgICAgICAgICAgeyBpbmNsdWRlOiBcIndoaXRlc3BhY2VcIiB9LFxuICAgICAgICAgICAgICAgIHsgaW5jbHVkZTogXCJzdHJpbmdcIiB9LFxuICAgICAgICAgICAgICAgIHsgdG9rZW46IFwieG1sLXBlLmRvY3R5cGUueG1sXCIsIHJlZ2V4OiBcIj5cIiwgbmV4dDogXCJzdGFydFwiIH0sXG4gICAgICAgICAgICAgICAgeyB0b2tlbjogXCJ4bWwtcGUueG1sXCIsIHJlZ2V4OiBcIlstX2EtekEtWjAtOTpdK1wiIH0sXG4gICAgICAgICAgICAgICAgeyB0b2tlbjogXCJwdW5jdHVhdGlvbi5pbnQtc3Vic2V0XCIsIHJlZ2V4OiBcIlxcXFxbXCIsIHB1c2g6IFwiaW50X3N1YnNldFwiIH1cbiAgICAgICAgICAgIF0sXG5cbiAgICAgICAgICAgIGludF9zdWJzZXQ6IFt7XG4gICAgICAgICAgICAgICAgdG9rZW46IFwidGV4dC54bWxcIixcbiAgICAgICAgICAgICAgICByZWdleDogXCJcXFxccytcIlxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICB0b2tlbjogXCJwdW5jdHVhdGlvbi5pbnQtc3Vic2V0LnhtbFwiLFxuICAgICAgICAgICAgICAgICAgICByZWdleDogXCJdXCIsXG4gICAgICAgICAgICAgICAgICAgIG5leHQ6IFwicG9wXCJcbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIHRva2VuOiBbXCJwdW5jdHVhdGlvbi5tYXJrdXAtZGVjbC54bWxcIiwgXCJrZXl3b3JkLm1hcmt1cC1kZWNsLnhtbFwiXSxcbiAgICAgICAgICAgICAgICAgICAgcmVnZXg6IFwiKDxcXFxcISkoWy1fYS16QS1aMC05XSspXCIsXG4gICAgICAgICAgICAgICAgICAgIHB1c2g6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogXCJ0ZXh0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWdleDogXCJcXFxccytcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiBcInB1bmN0dWF0aW9uLm1hcmt1cC1kZWNsLnhtbFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2V4OiBcIj5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0OiBcInBvcFwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBpbmNsdWRlOiBcInN0cmluZ1wiIH1dXG4gICAgICAgICAgICAgICAgfV0sXG5cbiAgICAgICAgICAgIGNkYXRhOiBbXG4gICAgICAgICAgICAgICAgeyB0b2tlbjogXCJzdHJpbmcuY2RhdGEueG1sXCIsIHJlZ2V4OiBcIlxcXFxdXFxcXF0+XCIsIG5leHQ6IFwic3RhcnRcIiB9LFxuICAgICAgICAgICAgICAgIHsgdG9rZW46IFwidGV4dC54bWxcIiwgcmVnZXg6IFwiXFxcXHMrXCIgfSxcbiAgICAgICAgICAgICAgICB7IHRva2VuOiBcInRleHQueG1sXCIsIHJlZ2V4OiBcIig/OlteXFxcXF1dfFxcXFxdKD8hXFxcXF0+KSkrXCIgfVxuICAgICAgICAgICAgXSxcblxuICAgICAgICAgICAgY29tbWVudDogW1xuICAgICAgICAgICAgICAgIHsgdG9rZW46IFwiY29tbWVudC54bWxcIiwgcmVnZXg6IFwiLS0+XCIsIG5leHQ6IFwic3RhcnRcIiB9LFxuICAgICAgICAgICAgICAgIHsgZGVmYXVsdFRva2VuOiBcImNvbW1lbnQueG1sXCIgfVxuICAgICAgICAgICAgXSxcblxuICAgICAgICAgICAgcmVmZXJlbmNlOiBbe1xuICAgICAgICAgICAgICAgIHRva2VuOiBcImNvbnN0YW50Lmxhbmd1YWdlLmVzY2FwZS5yZWZlcmVuY2UueG1sXCIsXG4gICAgICAgICAgICAgICAgcmVnZXg6IFwiKD86JiNbMC05XSs7KXwoPzomI3hbMC05YS1mQS1GXSs7KXwoPzomW2EtekEtWjAtOV86XFxcXC4tXSs7KVwiXG4gICAgICAgICAgICB9XSxcblxuICAgICAgICAgICAgYXR0cl9yZWZlcmVuY2U6IFt7XG4gICAgICAgICAgICAgICAgdG9rZW46IFwiY29uc3RhbnQubGFuZ3VhZ2UuZXNjYXBlLnJlZmVyZW5jZS5hdHRyaWJ1dGUtdmFsdWUueG1sXCIsXG4gICAgICAgICAgICAgICAgcmVnZXg6IFwiKD86JiNbMC05XSs7KXwoPzomI3hbMC05YS1mQS1GXSs7KXwoPzomW2EtekEtWjAtOV86XFxcXC4tXSs7KVwiXG4gICAgICAgICAgICB9XSxcblxuICAgICAgICAgICAgdGFnOiBbe1xuICAgICAgICAgICAgICAgIHRva2VuOiBbXCJtZXRhLnRhZy5wdW5jdHVhdGlvbi50YWctb3Blbi54bWxcIiwgXCJtZXRhLnRhZy5wdW5jdHVhdGlvbi5lbmQtdGFnLW9wZW4ueG1sXCIsIFwibWV0YS50YWcudGFnLW5hbWUueG1sXCJdLFxuICAgICAgICAgICAgICAgIHJlZ2V4OiBcIig/Oig8KXwoPC8pKSgoPzpbLV9hLXpBLVowLTldKzopP1stX2EtekEtWjAtOV0rKVwiLFxuICAgICAgICAgICAgICAgIG5leHQ6IFtcbiAgICAgICAgICAgICAgICAgICAgeyBpbmNsdWRlOiBcImF0dHJpYnV0ZXNcIiB9LFxuICAgICAgICAgICAgICAgICAgICB7IHRva2VuOiBcIm1ldGEudGFnLnB1bmN0dWF0aW9uLnRhZy1jbG9zZS54bWxcIiwgcmVnZXg6IFwiLz8+XCIsIG5leHQ6IFwic3RhcnRcIiB9XG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfV0sXG5cbiAgICAgICAgICAgIHRhZ193aGl0ZXNwYWNlOiBbXG4gICAgICAgICAgICAgICAgeyB0b2tlbjogXCJ0ZXh0LnRhZy13aGl0ZXNwYWNlLnhtbFwiLCByZWdleDogXCJcXFxccytcIiB9XG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgLy8gZm9yIGRvY3R5cGUgYW5kIHByb2Nlc3NpbmcgaW5zdHJ1Y3Rpb25zXG4gICAgICAgICAgICB3aGl0ZXNwYWNlOiBbXG4gICAgICAgICAgICAgICAgeyB0b2tlbjogXCJ0ZXh0LndoaXRlc3BhY2UueG1sXCIsIHJlZ2V4OiBcIlxcXFxzK1wiIH1cbiAgICAgICAgICAgIF0sXG5cbiAgICAgICAgICAgIC8vIGZvciBkb2N0eXBlIGFuZCBwcm9jZXNzaW5nIGluc3RydWN0aW9uc1xuICAgICAgICAgICAgc3RyaW5nOiBbe1xuICAgICAgICAgICAgICAgIHRva2VuOiBcInN0cmluZy54bWxcIixcbiAgICAgICAgICAgICAgICByZWdleDogXCInXCIsXG4gICAgICAgICAgICAgICAgcHVzaDogW1xuICAgICAgICAgICAgICAgICAgICB7IHRva2VuOiBcInN0cmluZy54bWxcIiwgcmVnZXg6IFwiJ1wiLCBuZXh0OiBcInBvcFwiIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgZGVmYXVsdFRva2VuOiBcInN0cmluZy54bWxcIiB9XG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICB0b2tlbjogXCJzdHJpbmcueG1sXCIsXG4gICAgICAgICAgICAgICAgICAgIHJlZ2V4OiAnXCInLFxuICAgICAgICAgICAgICAgICAgICBwdXNoOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHRva2VuOiBcInN0cmluZy54bWxcIiwgcmVnZXg6ICdcIicsIG5leHQ6IFwicG9wXCIgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVmYXVsdFRva2VuOiBcInN0cmluZy54bWxcIiB9XG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9XSxcblxuICAgICAgICAgICAgYXR0cmlidXRlczogW3tcbiAgICAgICAgICAgICAgICB0b2tlbjogXCJlbnRpdHkub3RoZXIuYXR0cmlidXRlLW5hbWUueG1sXCIsXG4gICAgICAgICAgICAgICAgcmVnZXg6IFwiKD86Wy1fYS16QS1aMC05XSs6KT9bLV9hLXpBLVowLTldK1wiXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIHRva2VuOiBcImtleXdvcmQub3BlcmF0b3IuYXR0cmlidXRlLWVxdWFscy54bWxcIixcbiAgICAgICAgICAgICAgICAgICAgcmVnZXg6IFwiPVwiXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBpbmNsdWRlOiBcInRhZ193aGl0ZXNwYWNlXCJcbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIGluY2x1ZGU6IFwiYXR0cmlidXRlX3ZhbHVlXCJcbiAgICAgICAgICAgICAgICB9XSxcblxuICAgICAgICAgICAgYXR0cmlidXRlX3ZhbHVlOiBbe1xuICAgICAgICAgICAgICAgIHRva2VuOiBcInN0cmluZy5hdHRyaWJ1dGUtdmFsdWUueG1sXCIsXG4gICAgICAgICAgICAgICAgcmVnZXg6IFwiJ1wiLFxuICAgICAgICAgICAgICAgIHB1c2g6IFtcbiAgICAgICAgICAgICAgICAgICAgeyB0b2tlbjogXCJzdHJpbmcuYXR0cmlidXRlLXZhbHVlLnhtbFwiLCByZWdleDogXCInXCIsIG5leHQ6IFwicG9wXCIgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBpbmNsdWRlOiBcImF0dHJfcmVmZXJlbmNlXCIgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBkZWZhdWx0VG9rZW46IFwic3RyaW5nLmF0dHJpYnV0ZS12YWx1ZS54bWxcIiB9XG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICB0b2tlbjogXCJzdHJpbmcuYXR0cmlidXRlLXZhbHVlLnhtbFwiLFxuICAgICAgICAgICAgICAgICAgICByZWdleDogJ1wiJyxcbiAgICAgICAgICAgICAgICAgICAgcHVzaDogW1xuICAgICAgICAgICAgICAgICAgICAgICAgeyB0b2tlbjogXCJzdHJpbmcuYXR0cmlidXRlLXZhbHVlLnhtbFwiLCByZWdleDogJ1wiJywgbmV4dDogXCJwb3BcIiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBpbmNsdWRlOiBcImF0dHJfcmVmZXJlbmNlXCIgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVmYXVsdFRva2VuOiBcInN0cmluZy5hdHRyaWJ1dGUtdmFsdWUueG1sXCIgfVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgfTtcblxuICAgICAgICBpZiAodGhpcy5jb25zdHJ1Y3RvciA9PT0gWG1sSGlnaGxpZ2h0UnVsZXMpXG4gICAgICAgICAgICB0aGlzLm5vcm1hbGl6ZVJ1bGVzKCk7XG4gICAgfVxuXG4gICAgZW1iZWRUYWdSdWxlcyhIaWdobGlnaHRSdWxlcywgcHJlZml4LCB0YWcpIHtcbiAgICAgICAgdGhpcy4kcnVsZXMudGFnLnVuc2hpZnQoe1xuICAgICAgICAgICAgdG9rZW46IFtcIm1ldGEudGFnLnB1bmN0dWF0aW9uLnRhZy1vcGVuLnhtbFwiLCBcIm1ldGEudGFnLlwiICsgdGFnICsgXCIudGFnLW5hbWUueG1sXCJdLFxuICAgICAgICAgICAgcmVnZXg6IFwiKDwpKFwiICsgdGFnICsgXCIoPz1cXFxcc3w+fCQpKVwiLFxuICAgICAgICAgICAgbmV4dDogW1xuICAgICAgICAgICAgICAgIHsgaW5jbHVkZTogXCJhdHRyaWJ1dGVzXCIgfSxcbiAgICAgICAgICAgICAgICB7IHRva2VuOiBcIm1ldGEudGFnLnB1bmN0dWF0aW9uLnRhZy1jbG9zZS54bWxcIiwgcmVnZXg6IFwiLz8+XCIsIG5leHQ6IHByZWZpeCArIFwic3RhcnRcIiB9XG4gICAgICAgICAgICBdXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuJHJ1bGVzW3RhZyArIFwiLWVuZFwiXSA9IFtcbiAgICAgICAgICAgIHsgaW5jbHVkZTogXCJhdHRyaWJ1dGVzXCIgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0b2tlbjogXCJtZXRhLnRhZy5wdW5jdHVhdGlvbi50YWctY2xvc2UueG1sXCIsIHJlZ2V4OiBcIi8/PlwiLCBuZXh0OiBcInN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgb25NYXRjaDogZnVuY3Rpb24odmFsdWUsIGN1cnJlbnRTdGF0ZSwgc3RhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhY2suc3BsaWNlKDApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50b2tlbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIF1cblxuICAgICAgICB0aGlzLmVtYmVkUnVsZXMoSGlnaGxpZ2h0UnVsZXMsIHByZWZpeCwgW3tcbiAgICAgICAgICAgIHRva2VuOiBbXCJtZXRhLnRhZy5wdW5jdHVhdGlvbi5lbmQtdGFnLW9wZW4ueG1sXCIsIFwibWV0YS50YWcuXCIgKyB0YWcgKyBcIi50YWctbmFtZS54bWxcIl0sXG4gICAgICAgICAgICByZWdleDogXCIoPC8pKFwiICsgdGFnICsgXCIoPz1cXFxcc3w+fCQpKVwiLFxuICAgICAgICAgICAgbmV4dDogdGFnICsgXCItZW5kXCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHRva2VuOiBcInN0cmluZy5jZGF0YS54bWxcIixcbiAgICAgICAgICAgICAgICByZWdleDogXCI8XFxcXCFcXFxcW0NEQVRBXFxcXFtcIlxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHRva2VuOiBcInN0cmluZy5jZGF0YS54bWxcIixcbiAgICAgICAgICAgICAgICByZWdleDogXCJcXFxcXVxcXFxdPlwiXG4gICAgICAgICAgICB9XSk7XG4gICAgfVxufVxuIl19