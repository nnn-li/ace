import { createMap } from "../lib/lang";
import CssHighlightRules from "./CssHighlightRules";
import JavaScriptHighlightRules from "./JavaScriptHighlightRules";
import XmlHighlightRules from "./XmlHighlightRules";
var tagMap = createMap({
    a: 'anchor',
    button: 'form',
    form: 'form',
    img: 'image',
    input: 'form',
    label: 'form',
    option: 'form',
    script: 'script',
    select: 'form',
    textarea: 'form',
    style: 'style',
    table: 'table',
    tbody: 'table',
    td: 'table',
    tfoot: 'table',
    th: 'table',
    tr: 'table'
});
export default class HtmlHighlightRules extends XmlHighlightRules {
    constructor() {
        super();
        this.addRules({
            attributes: [{
                    include: "tag_whitespace"
                }, {
                    token: "entity.other.attribute-name.xml",
                    regex: "[-_a-zA-Z0-9:]+"
                }, {
                    token: "keyword.operator.attribute-equals.xml",
                    regex: "=",
                    push: [{
                            include: "tag_whitespace"
                        }, {
                            token: "string.unquoted.attribute-value.html",
                            regex: "[^<>='\"`\\s]+",
                            next: "pop"
                        }, {
                            token: "empty",
                            regex: "",
                            next: "pop"
                        }]
                }, {
                    include: "attribute_value"
                }],
            tag: [{
                    token: function (start, tag) {
                        var group = tagMap[tag];
                        return ["meta.tag.punctuation." + (start == "<" ? "" : "end-") + "tag-open.xml",
                            "meta.tag" + (group ? "." + group : "") + ".tag-name.xml"];
                    },
                    regex: "(</?)([-_a-zA-Z0-9:]+)",
                    next: "tag_stuff"
                }],
            tag_stuff: [
                { include: "attributes" },
                { token: "meta.tag.punctuation.tag-close.xml", regex: "/?>", next: "start" }
            ],
        });
        this.embedTagRules(CssHighlightRules, "css-", "style");
        this.embedTagRules(JavaScriptHighlightRules, "js-", "script");
        if (this.constructor === HtmlHighlightRules)
            this.normalizeRules();
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSHRtbEhpZ2hsaWdodFJ1bGVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL21vZGUvSHRtbEhpZ2hsaWdodFJ1bGVzLnRzIl0sIm5hbWVzIjpbIkh0bWxIaWdobGlnaHRSdWxlcyIsIkh0bWxIaWdobGlnaHRSdWxlcy5jb25zdHJ1Y3RvciJdLCJtYXBwaW5ncyI6Ik9BK0JPLEVBQUMsU0FBUyxFQUFDLE1BQU0sYUFBYTtPQUM5QixpQkFBaUIsTUFBTSxxQkFBcUI7T0FDNUMsd0JBQXdCLE1BQU0sNEJBQTRCO09BQzFELGlCQUFpQixNQUFNLHFCQUFxQjtBQUVuRCxJQUFJLE1BQU0sR0FBRyxTQUFTLENBQUM7SUFDbkIsQ0FBQyxFQUFFLFFBQVE7SUFDWCxNQUFNLEVBQUUsTUFBTTtJQUNkLElBQUksRUFBRSxNQUFNO0lBQ1osR0FBRyxFQUFFLE9BQU87SUFDWixLQUFLLEVBQUUsTUFBTTtJQUNiLEtBQUssRUFBRSxNQUFNO0lBQ2IsTUFBTSxFQUFFLE1BQU07SUFDZCxNQUFNLEVBQUUsUUFBUTtJQUNoQixNQUFNLEVBQUUsTUFBTTtJQUNkLFFBQVEsRUFBRSxNQUFNO0lBQ2hCLEtBQUssRUFBRSxPQUFPO0lBQ2QsS0FBSyxFQUFFLE9BQU87SUFDZCxLQUFLLEVBQUUsT0FBTztJQUNkLEVBQUUsRUFBRSxPQUFPO0lBQ1gsS0FBSyxFQUFFLE9BQU87SUFDZCxFQUFFLEVBQUUsT0FBTztJQUNYLEVBQUUsRUFBRSxPQUFPO0NBQ2QsQ0FBQyxDQUFDO0FBRUgsZ0RBQWdELGlCQUFpQjtJQUM3REE7UUFDSUMsT0FBT0EsQ0FBQ0E7UUFFUkEsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0E7WUFDVkEsVUFBVUEsRUFBRUEsQ0FBQ0E7b0JBQ1RBLE9BQU9BLEVBQUVBLGdCQUFnQkE7aUJBQzVCQSxFQUFFQTtvQkFDS0EsS0FBS0EsRUFBRUEsaUNBQWlDQTtvQkFDeENBLEtBQUtBLEVBQUVBLGlCQUFpQkE7aUJBQzNCQSxFQUFFQTtvQkFDQ0EsS0FBS0EsRUFBRUEsdUNBQXVDQTtvQkFDOUNBLEtBQUtBLEVBQUVBLEdBQUdBO29CQUNWQSxJQUFJQSxFQUFFQSxDQUFDQTs0QkFDSEEsT0FBT0EsRUFBRUEsZ0JBQWdCQTt5QkFDNUJBLEVBQUVBOzRCQUNLQSxLQUFLQSxFQUFFQSxzQ0FBc0NBOzRCQUM3Q0EsS0FBS0EsRUFBRUEsZ0JBQWdCQTs0QkFDdkJBLElBQUlBLEVBQUVBLEtBQUtBO3lCQUNkQSxFQUFFQTs0QkFDQ0EsS0FBS0EsRUFBRUEsT0FBT0E7NEJBQ2RBLEtBQUtBLEVBQUVBLEVBQUVBOzRCQUNUQSxJQUFJQSxFQUFFQSxLQUFLQTt5QkFDZEEsQ0FBQ0E7aUJBQ1RBLEVBQUVBO29CQUNDQSxPQUFPQSxFQUFFQSxpQkFBaUJBO2lCQUM3QkEsQ0FBQ0E7WUFDTkEsR0FBR0EsRUFBRUEsQ0FBQ0E7b0JBQ0ZBLEtBQUtBLEVBQUVBLFVBQVNBLEtBQUtBLEVBQUVBLEdBQUdBO3dCQUN0QixJQUFJLEtBQUssR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7d0JBQ3hCLE1BQU0sQ0FBQyxDQUFDLHVCQUF1QixHQUFHLENBQUMsS0FBSyxJQUFJLEdBQUcsR0FBRyxFQUFFLEdBQUcsTUFBTSxDQUFDLEdBQUcsY0FBYzs0QkFDM0UsVUFBVSxHQUFHLENBQUMsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsRUFBRSxDQUFDLEdBQUcsZUFBZSxDQUFDLENBQUM7b0JBQ25FLENBQUM7b0JBQ0RBLEtBQUtBLEVBQUVBLHdCQUF3QkE7b0JBQy9CQSxJQUFJQSxFQUFFQSxXQUFXQTtpQkFDcEJBLENBQUNBO1lBQ0ZBLFNBQVNBLEVBQUVBO2dCQUNQQSxFQUFFQSxPQUFPQSxFQUFFQSxZQUFZQSxFQUFFQTtnQkFDekJBLEVBQUVBLEtBQUtBLEVBQUVBLG9DQUFvQ0EsRUFBRUEsS0FBS0EsRUFBRUEsS0FBS0EsRUFBRUEsSUFBSUEsRUFBRUEsT0FBT0EsRUFBRUE7YUFDL0VBO1NBQ0pBLENBQUNBLENBQUNBO1FBRUhBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLGlCQUFpQkEsRUFBRUEsTUFBTUEsRUFBRUEsT0FBT0EsQ0FBQ0EsQ0FBQ0E7UUFDdkRBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLHdCQUF3QkEsRUFBRUEsS0FBS0EsRUFBRUEsUUFBUUEsQ0FBQ0EsQ0FBQ0E7UUFFOURBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLFdBQVdBLEtBQUtBLGtCQUFrQkEsQ0FBQ0E7WUFDeENBLElBQUlBLENBQUNBLGNBQWNBLEVBQUVBLENBQUNBO0lBQzlCQSxDQUFDQTtBQUNMRCxDQUFDQTtBQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLyogKioqKiogQkVHSU4gTElDRU5TRSBCTE9DSyAqKioqKlxuICogRGlzdHJpYnV0ZWQgdW5kZXIgdGhlIEJTRCBsaWNlbnNlOlxuICpcbiAqIENvcHlyaWdodCAoYykgMjAxMCwgQWpheC5vcmcgQi5WLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFxuICogUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0XG4gKiBtb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlIG1ldDpcbiAqICAgICAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0XG4gKiAgICAgICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4gKiAgICAgKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodFxuICogICAgICAgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZVxuICogICAgICAgZG9jdW1lbnRhdGlvbiBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cbiAqICAgICAqIE5laXRoZXIgdGhlIG5hbWUgb2YgQWpheC5vcmcgQi5WLiBub3IgdGhlXG4gKiAgICAgICBuYW1lcyBvZiBpdHMgY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0c1xuICogICAgICAgZGVyaXZlZCBmcm9tIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG4gKiBcbiAqIFRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgXCJBUyBJU1wiIEFORFxuICogQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFIElNUExJRURcbiAqIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkVcbiAqIERJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIEFKQVguT1JHIEIuVi4gQkUgTElBQkxFIEZPUiBBTllcbiAqIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTXG4gKiAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7XG4gKiBMT1NTIE9GIFVTRSwgREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkRcbiAqIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUXG4gKiAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJU1xuICogU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuXG4gKlxuICogKioqKiogRU5EIExJQ0VOU0UgQkxPQ0sgKioqKiogKi9cblxuXG5pbXBvcnQge2NyZWF0ZU1hcH0gZnJvbSBcIi4uL2xpYi9sYW5nXCI7XG5pbXBvcnQgQ3NzSGlnaGxpZ2h0UnVsZXMgZnJvbSBcIi4vQ3NzSGlnaGxpZ2h0UnVsZXNcIjtcbmltcG9ydCBKYXZhU2NyaXB0SGlnaGxpZ2h0UnVsZXMgZnJvbSBcIi4vSmF2YVNjcmlwdEhpZ2hsaWdodFJ1bGVzXCI7XG5pbXBvcnQgWG1sSGlnaGxpZ2h0UnVsZXMgZnJvbSBcIi4vWG1sSGlnaGxpZ2h0UnVsZXNcIjtcblxudmFyIHRhZ01hcCA9IGNyZWF0ZU1hcCh7XG4gICAgYTogJ2FuY2hvcicsXG4gICAgYnV0dG9uOiAnZm9ybScsXG4gICAgZm9ybTogJ2Zvcm0nLFxuICAgIGltZzogJ2ltYWdlJyxcbiAgICBpbnB1dDogJ2Zvcm0nLFxuICAgIGxhYmVsOiAnZm9ybScsXG4gICAgb3B0aW9uOiAnZm9ybScsXG4gICAgc2NyaXB0OiAnc2NyaXB0JyxcbiAgICBzZWxlY3Q6ICdmb3JtJyxcbiAgICB0ZXh0YXJlYTogJ2Zvcm0nLFxuICAgIHN0eWxlOiAnc3R5bGUnLFxuICAgIHRhYmxlOiAndGFibGUnLFxuICAgIHRib2R5OiAndGFibGUnLFxuICAgIHRkOiAndGFibGUnLFxuICAgIHRmb290OiAndGFibGUnLFxuICAgIHRoOiAndGFibGUnLFxuICAgIHRyOiAndGFibGUnXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSHRtbEhpZ2hsaWdodFJ1bGVzIGV4dGVuZHMgWG1sSGlnaGxpZ2h0UnVsZXMge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuYWRkUnVsZXMoe1xuICAgICAgICAgICAgYXR0cmlidXRlczogW3tcbiAgICAgICAgICAgICAgICBpbmNsdWRlOiBcInRhZ193aGl0ZXNwYWNlXCJcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46IFwiZW50aXR5Lm90aGVyLmF0dHJpYnV0ZS1uYW1lLnhtbFwiLFxuICAgICAgICAgICAgICAgICAgICByZWdleDogXCJbLV9hLXpBLVowLTk6XStcIlxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46IFwia2V5d29yZC5vcGVyYXRvci5hdHRyaWJ1dGUtZXF1YWxzLnhtbFwiLFxuICAgICAgICAgICAgICAgICAgICByZWdleDogXCI9XCIsXG4gICAgICAgICAgICAgICAgICAgIHB1c2g6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlOiBcInRhZ193aGl0ZXNwYWNlXCJcbiAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiBcInN0cmluZy51bnF1b3RlZC5hdHRyaWJ1dGUtdmFsdWUuaHRtbFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2V4OiBcIltePD49J1xcXCJgXFxcXHNdK1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQ6IFwicG9wXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogXCJlbXB0eVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2V4OiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQ6IFwicG9wXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBpbmNsdWRlOiBcImF0dHJpYnV0ZV92YWx1ZVwiXG4gICAgICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICB0YWc6IFt7XG4gICAgICAgICAgICAgICAgdG9rZW46IGZ1bmN0aW9uKHN0YXJ0LCB0YWcpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdyb3VwID0gdGFnTWFwW3RhZ107XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXCJtZXRhLnRhZy5wdW5jdHVhdGlvbi5cIiArIChzdGFydCA9PSBcIjxcIiA/IFwiXCIgOiBcImVuZC1cIikgKyBcInRhZy1vcGVuLnhtbFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJtZXRhLnRhZ1wiICsgKGdyb3VwID8gXCIuXCIgKyBncm91cCA6IFwiXCIpICsgXCIudGFnLW5hbWUueG1sXCJdO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVnZXg6IFwiKDwvPykoWy1fYS16QS1aMC05Ol0rKVwiLFxuICAgICAgICAgICAgICAgIG5leHQ6IFwidGFnX3N0dWZmXCJcbiAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgdGFnX3N0dWZmOiBbXG4gICAgICAgICAgICAgICAgeyBpbmNsdWRlOiBcImF0dHJpYnV0ZXNcIiB9LFxuICAgICAgICAgICAgICAgIHsgdG9rZW46IFwibWV0YS50YWcucHVuY3R1YXRpb24udGFnLWNsb3NlLnhtbFwiLCByZWdleDogXCIvPz5cIiwgbmV4dDogXCJzdGFydFwiIH1cbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuZW1iZWRUYWdSdWxlcyhDc3NIaWdobGlnaHRSdWxlcywgXCJjc3MtXCIsIFwic3R5bGVcIik7XG4gICAgICAgIHRoaXMuZW1iZWRUYWdSdWxlcyhKYXZhU2NyaXB0SGlnaGxpZ2h0UnVsZXMsIFwianMtXCIsIFwic2NyaXB0XCIpO1xuXG4gICAgICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yID09PSBIdG1sSGlnaGxpZ2h0UnVsZXMpXG4gICAgICAgICAgICB0aGlzLm5vcm1hbGl6ZVJ1bGVzKCk7XG4gICAgfVxufVxuIl19