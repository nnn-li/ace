import TokenIterator from "../TokenIterator";
var commonAttributes = [
    "accesskey",
    "class",
    "contenteditable",
    "contextmenu",
    "dir",
    "draggable",
    "dropzone",
    "hidden",
    "id",
    "inert",
    "itemid",
    "itemprop",
    "itemref",
    "itemscope",
    "itemtype",
    "lang",
    "spellcheck",
    "style",
    "tabindex",
    "title",
    "translate"
];
var eventAttributes = [
    "onabort",
    "onblur",
    "oncancel",
    "oncanplay",
    "oncanplaythrough",
    "onchange",
    "onclick",
    "onclose",
    "oncontextmenu",
    "oncuechange",
    "ondblclick",
    "ondrag",
    "ondragend",
    "ondragenter",
    "ondragleave",
    "ondragover",
    "ondragstart",
    "ondrop",
    "ondurationchange",
    "onemptied",
    "onended",
    "onerror",
    "onfocus",
    "oninput",
    "oninvalid",
    "onkeydown",
    "onkeypress",
    "onkeyup",
    "onload",
    "onloadeddata",
    "onloadedmetadata",
    "onloadstart",
    "onmousedown",
    "onmousemove",
    "onmouseout",
    "onmouseover",
    "onmouseup",
    "onmousewheel",
    "onpause",
    "onplay",
    "onplaying",
    "onprogress",
    "onratechange",
    "onreset",
    "onscroll",
    "onseeked",
    "onseeking",
    "onselect",
    "onshow",
    "onstalled",
    "onsubmit",
    "onsuspend",
    "ontimeupdate",
    "onvolumechange",
    "onwaiting"
];
var globalAttributes = commonAttributes.concat(eventAttributes);
var attributeMap = {
    "html": ["manifest"],
    "head": [],
    "title": [],
    "base": ["href", "target"],
    "link": ["href", "hreflang", "rel", "media", "type", "sizes"],
    "meta": ["http-equiv", "name", "content", "charset"],
    "style": ["type", "media", "scoped"],
    "script": ["charset", "type", "src", "defer", "async"],
    "noscript": ["href"],
    "body": ["onafterprint", "onbeforeprint", "onbeforeunload", "onhashchange", "onmessage", "onoffline", "onpopstate", "onredo", "onresize", "onstorage", "onundo", "onunload"],
    "section": [],
    "nav": [],
    "article": ["pubdate"],
    "aside": [],
    "h1": [],
    "h2": [],
    "h3": [],
    "h4": [],
    "h5": [],
    "h6": [],
    "header": [],
    "footer": [],
    "address": [],
    "main": [],
    "p": [],
    "hr": [],
    "pre": [],
    "blockquote": ["cite"],
    "ol": ["start", "reversed"],
    "ul": [],
    "li": ["value"],
    "dl": [],
    "dt": [],
    "dd": [],
    "figure": [],
    "figcaption": [],
    "div": [],
    "a": ["href", "target", "ping", "rel", "media", "hreflang", "type"],
    "em": [],
    "strong": [],
    "small": [],
    "s": [],
    "cite": [],
    "q": ["cite"],
    "dfn": [],
    "abbr": [],
    "data": [],
    "time": ["datetime"],
    "code": [],
    "var": [],
    "samp": [],
    "kbd": [],
    "sub": [],
    "sup": [],
    "i": [],
    "b": [],
    "u": [],
    "mark": [],
    "ruby": [],
    "rt": [],
    "rp": [],
    "bdi": [],
    "bdo": [],
    "span": [],
    "br": [],
    "wbr": [],
    "ins": ["cite", "datetime"],
    "del": ["cite", "datetime"],
    "img": ["alt", "src", "height", "width", "usemap", "ismap"],
    "iframe": ["name", "src", "height", "width", "sandbox", "seamless"],
    "embed": ["src", "height", "width", "type"],
    "object": ["param", "data", "type", "height", "width", "usemap", "name", "form", "classid"],
    "param": ["name", "value"],
    "video": ["src", "autobuffer", "autoplay", "loop", "controls", "width", "height", "poster"],
    "audio": ["src", "autobuffer", "autoplay", "loop", "controls"],
    "source": ["src", "type", "media"],
    "track": ["kind", "src", "srclang", "label", "default"],
    "canvas": ["width", "height"],
    "map": ["name"],
    "area": ["shape", "coords", "href", "hreflang", "alt", "target", "media", "rel", "ping", "type"],
    "svg": [],
    "math": [],
    "table": ["summary"],
    "caption": [],
    "colgroup": ["span"],
    "col": ["span"],
    "tbody": [],
    "thead": [],
    "tfoot": [],
    "tr": [],
    "td": ["headers", "rowspan", "colspan"],
    "th": ["headers", "rowspan", "colspan", "scope"],
    "form": ["accept-charset", "action", "autocomplete", "enctype", "method", "name", "novalidate", "target"],
    "fieldset": ["disabled", "form", "name"],
    "legend": [],
    "label": ["form", "for"],
    "input": ["type", "accept", "alt", "autocomplete", "checked", "disabled", "form", "formaction", "formenctype", "formmethod", "formnovalidate", "formtarget", "height", "list", "max", "maxlength", "min", "multiple", "pattern", "placeholder", "readonly", "required", "size", "src", "step", "width", "files", "value"],
    "button": ["autofocus", "disabled", "form", "formaction", "formenctype", "formmethod", "formnovalidate", "formtarget", "name", "value", "type"],
    "select": ["autofocus", "disabled", "form", "multiple", "name", "size"],
    "datalist": [],
    "optgroup": ["disabled", "label"],
    "option": ["disabled", "selected", "label", "value"],
    "textarea": ["autofocus", "disabled", "form", "maxlength", "name", "placeholder", "readonly", "required", "rows", "cols", "wrap"],
    "keygen": ["autofocus", "challenge", "disabled", "form", "keytype", "name"],
    "output": ["for", "form", "name"],
    "progress": ["value", "max"],
    "meter": ["value", "min", "max", "low", "high", "optimum"],
    "details": ["open"],
    "summary": [],
    "command": ["type", "label", "icon", "disabled", "checked", "radiogroup", "command"],
    "menu": ["type", "label"],
    "dialog": ["open"]
};
var elements = Object.keys(attributeMap);
function is(token, type) {
    return token.type.lastIndexOf(type + ".xml") > -1;
}
function findTagName(session, pos) {
    var iterator = new TokenIterator(session, pos.row, pos.column);
    var token = iterator.getCurrentToken();
    while (token && !is(token, "tag-name")) {
        token = iterator.stepBackward();
    }
    if (token)
        return token.value;
}
export default class HtmlCompletions {
    constructor() {
    }
    getCompletions(state, session, pos, prefix) {
        var token = session.getTokenAt(pos.row, pos.column);
        if (!token)
            return [];
        if (is(token, "tag-name") || is(token, "tag-open") || is(token, "end-tag-open"))
            return this.getTagCompletions(state, session, pos, prefix);
        if (is(token, "tag-whitespace") || is(token, "attribute-name"))
            return this.getAttributeCompetions(state, session, pos, prefix);
        return [];
    }
    getTagCompletions(state, session, pos, prefix) {
        return elements.map(function (element) {
            return {
                value: element,
                meta: "tag",
                score: Number.MAX_VALUE
            };
        });
    }
    getAttributeCompetions(state, session, pos, prefix) {
        var tagName = findTagName(session, pos);
        if (!tagName)
            return [];
        var attributes = globalAttributes;
        if (tagName in attributeMap) {
            attributes = attributes.concat(attributeMap[tagName]);
        }
        return attributes.map(function (attribute) {
            return {
                caption: attribute,
                snippet: attribute + '="$0"',
                meta: "attribute",
                score: Number.MAX_VALUE
            };
        });
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSHRtbENvbXBsZXRpb25zLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL21vZGUvSHRtbENvbXBsZXRpb25zLnRzIl0sIm5hbWVzIjpbImlzIiwiZmluZFRhZ05hbWUiLCJIdG1sQ29tcGxldGlvbnMiLCJIdG1sQ29tcGxldGlvbnMuY29uc3RydWN0b3IiLCJIdG1sQ29tcGxldGlvbnMuZ2V0Q29tcGxldGlvbnMiLCJIdG1sQ29tcGxldGlvbnMuZ2V0VGFnQ29tcGxldGlvbnMiLCJIdG1sQ29tcGxldGlvbnMuZ2V0QXR0cmlidXRlQ29tcGV0aW9ucyJdLCJtYXBwaW5ncyI6Ik9BNkJPLGFBQWEsTUFBTSxrQkFBa0I7QUFFNUMsSUFBSSxnQkFBZ0IsR0FBRztJQUNuQixXQUFXO0lBQ1gsT0FBTztJQUNQLGlCQUFpQjtJQUNqQixhQUFhO0lBQ2IsS0FBSztJQUNMLFdBQVc7SUFDWCxVQUFVO0lBQ1YsUUFBUTtJQUNSLElBQUk7SUFDSixPQUFPO0lBQ1AsUUFBUTtJQUNSLFVBQVU7SUFDVixTQUFTO0lBQ1QsV0FBVztJQUNYLFVBQVU7SUFDVixNQUFNO0lBQ04sWUFBWTtJQUNaLE9BQU87SUFDUCxVQUFVO0lBQ1YsT0FBTztJQUNQLFdBQVc7Q0FDZCxDQUFDO0FBRUYsSUFBSSxlQUFlLEdBQUc7SUFDbEIsU0FBUztJQUNULFFBQVE7SUFDUixVQUFVO0lBQ1YsV0FBVztJQUNYLGtCQUFrQjtJQUNsQixVQUFVO0lBQ1YsU0FBUztJQUNULFNBQVM7SUFDVCxlQUFlO0lBQ2YsYUFBYTtJQUNiLFlBQVk7SUFDWixRQUFRO0lBQ1IsV0FBVztJQUNYLGFBQWE7SUFDYixhQUFhO0lBQ2IsWUFBWTtJQUNaLGFBQWE7SUFDYixRQUFRO0lBQ1Isa0JBQWtCO0lBQ2xCLFdBQVc7SUFDWCxTQUFTO0lBQ1QsU0FBUztJQUNULFNBQVM7SUFDVCxTQUFTO0lBQ1QsV0FBVztJQUNYLFdBQVc7SUFDWCxZQUFZO0lBQ1osU0FBUztJQUNULFFBQVE7SUFDUixjQUFj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QUFRQSxDQUFDQSxZQUFZQSxFQUFFQSxDQUFDQTtJQUNwQ0EsQ0FBQ0E7SUFDREEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsS0FBS0EsQ0FBQ0E7UUFDTkEsTUFBTUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsS0FBS0EsQ0FBQ0E7QUFDM0JBLENBQUNBO0FBRUQ7SUFDSUM7SUFFQUMsQ0FBQ0E7SUFFREQsY0FBY0EsQ0FBQ0EsS0FBS0EsRUFBRUEsT0FBT0EsRUFBRUEsR0FBR0EsRUFBRUEsTUFBTUE7UUFDdENFLElBQUlBLEtBQUtBLEdBQUdBLE9BQU9BLENBQUNBLFVBQVVBLENBQUNBLEdBQUdBLENBQUNBLEdBQUdBLEVBQUVBLEdBQUdBLENBQUNBLE1BQU1BLENBQUNBLENBQUNBO1FBRXBEQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxLQUFLQSxDQUFDQTtZQUNQQSxNQUFNQSxDQUFDQSxFQUFFQSxDQUFDQTtRQUdkQSxFQUFFQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxLQUFLQSxFQUFFQSxVQUFVQSxDQUFDQSxJQUFJQSxFQUFFQSxDQUFDQSxLQUFLQSxFQUFFQSxVQUFVQSxDQUFDQSxJQUFJQSxFQUFFQSxDQUFDQSxLQUFLQSxFQUFFQSxjQUFjQSxDQUFDQSxDQUFDQTtZQUM1RUEsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsaUJBQWlCQSxDQUFDQSxLQUFLQSxFQUFFQSxPQUFPQSxFQUFFQSxHQUFHQSxFQUFFQSxNQUFNQSxDQUFDQSxDQUFDQTtRQUcvREEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsS0FBS0EsRUFBRUEsZ0JBQWdCQSxDQUFDQSxJQUFJQSxFQUFFQSxDQUFDQSxLQUFLQSxFQUFFQSxnQkFBZ0JBLENBQUNBLENBQUNBO1lBQzNEQSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxzQkFBc0JBLENBQUNBLEtBQUtBLEVBQUVBLE9BQU9BLEVBQUVBLEdBQUdBLEVBQUVBLE1BQU1BLENBQUNBLENBQUNBO1FBRXBFQSxNQUFNQSxDQUFDQSxFQUFFQSxDQUFDQTtJQUNkQSxDQUFDQTtJQUVERixpQkFBaUJBLENBQUNBLEtBQUtBLEVBQUVBLE9BQU9BLEVBQUVBLEdBQUdBLEVBQUVBLE1BQU1BO1FBQ3pDRyxNQUFNQSxDQUFDQSxRQUFRQSxDQUFDQSxHQUFHQSxDQUFDQSxVQUFTQSxPQUFPQTtZQUNoQyxNQUFNLENBQUM7Z0JBQ0gsS0FBSyxFQUFFLE9BQU87Z0JBQ2QsSUFBSSxFQUFFLEtBQUs7Z0JBQ1gsS0FBSyxFQUFFLE1BQU0sQ0FBQyxTQUFTO2FBQzFCLENBQUM7UUFDTixDQUFDLENBQUNBLENBQUNBO0lBQ1BBLENBQUNBO0lBRURILHNCQUFzQkEsQ0FBQ0EsS0FBS0EsRUFBRUEsT0FBT0EsRUFBRUEsR0FBR0EsRUFBRUEsTUFBTUE7UUFDOUNJLElBQUlBLE9BQU9BLEdBQUdBLFdBQVdBLENBQUNBLE9BQU9BLEVBQUVBLEdBQUdBLENBQUNBLENBQUNBO1FBQ3hDQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxPQUFPQSxDQUFDQTtZQUNUQSxNQUFNQSxDQUFDQSxFQUFFQSxDQUFDQTtRQUNkQSxJQUFJQSxVQUFVQSxHQUFHQSxnQkFBZ0JBLENBQUNBO1FBQ2xDQSxFQUFFQSxDQUFDQSxDQUFDQSxPQUFPQSxJQUFJQSxZQUFZQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUMxQkEsVUFBVUEsR0FBR0EsVUFBVUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsWUFBWUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDMURBLENBQUNBO1FBQ0RBLE1BQU1BLENBQUNBLFVBQVVBLENBQUNBLEdBQUdBLENBQUNBLFVBQVNBLFNBQVNBO1lBQ3BDLE1BQU0sQ0FBQztnQkFDSCxPQUFPLEVBQUUsU0FBUztnQkFDbEIsT0FBTyxFQUFFLFNBQVMsR0FBRyxPQUFPO2dCQUM1QixJQUFJLEVBQUUsV0FBVztnQkFDakIsS0FBSyxFQUFFLE1BQU0sQ0FBQyxTQUFTO2FBQzFCLENBQUM7UUFDTixDQUFDLENBQUNBLENBQUNBO0lBQ1BBLENBQUNBO0FBQ0xKLENBQUNBO0FBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvKiAqKioqKiBCRUdJTiBMSUNFTlNFIEJMT0NLICoqKioqXG4gKiBEaXN0cmlidXRlZCB1bmRlciB0aGUgQlNEIGxpY2Vuc2U6XG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDEwLCBBamF4Lm9yZyBCLlYuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogXG4gKiBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbiAqIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuICogICAgICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHRcbiAqICAgICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbiAqICAgICAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0XG4gKiAgICAgICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlXG4gKiAgICAgICBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuICogICAgICogTmVpdGhlciB0aGUgbmFtZSBvZiBBamF4Lm9yZyBCLlYuIG5vciB0aGVcbiAqICAgICAgIG5hbWVzIG9mIGl0cyBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzXG4gKiAgICAgICBkZXJpdmVkIGZyb20gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi5cbiAqIFxuICogVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCIgQU5EXG4gKiBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRFxuICogV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRVxuICogRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgQUpBWC5PUkcgQi5WLiBCRSBMSUFCTEUgRk9SIEFOWVxuICogRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVNcbiAqIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUztcbiAqIExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORFxuICogT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlRcbiAqIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTXG4gKiBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cbiAqXG4gKiAqKioqKiBFTkQgTElDRU5TRSBCTE9DSyAqKioqKiAqL1xuaW1wb3J0IFRva2VuSXRlcmF0b3IgZnJvbSBcIi4uL1Rva2VuSXRlcmF0b3JcIjtcblxudmFyIGNvbW1vbkF0dHJpYnV0ZXMgPSBbXG4gICAgXCJhY2Nlc3NrZXlcIixcbiAgICBcImNsYXNzXCIsXG4gICAgXCJjb250ZW50ZWRpdGFibGVcIixcbiAgICBcImNvbnRleHRtZW51XCIsXG4gICAgXCJkaXJcIixcbiAgICBcImRyYWdnYWJsZVwiLFxuICAgIFwiZHJvcHpvbmVcIixcbiAgICBcImhpZGRlblwiLFxuICAgIFwiaWRcIixcbiAgICBcImluZXJ0XCIsXG4gICAgXCJpdGVtaWRcIixcbiAgICBcIml0ZW1wcm9wXCIsXG4gICAgXCJpdGVtcmVmXCIsXG4gICAgXCJpdGVtc2NvcGVcIixcbiAgICBcIml0ZW10eXBlXCIsXG4gICAgXCJsYW5nXCIsXG4gICAgXCJzcGVsbGNoZWNrXCIsXG4gICAgXCJzdHlsZVwiLFxuICAgIFwidGFiaW5kZXhcIixcbiAgICBcInRpdGxlXCIsXG4gICAgXCJ0cmFuc2xhdGVcIlxuXTtcblxudmFyIGV2ZW50QXR0cmlidXRlcyA9IFtcbiAgICBcIm9uYWJvcnRcIixcbiAgICBcIm9uYmx1clwiLFxuICAgIFwib25jYW5jZWxcIixcbiAgICBcIm9uY2FucGxheVwiLFxuICAgIFwib25jYW5wbGF5dGhyb3VnaFwiLFxuICAgIFwib25jaGFuZ2VcIixcbiAgICBcIm9uY2xpY2tcIixcbiAgICBcIm9uY2xvc2VcIixcbiAgICBcIm9uY29udGV4dG1lbnVcIixcbiAgICBcIm9uY3VlY2hhbmdlXCIsXG4gICAgXCJvbmRibGNsaWNrXCIsXG4gICAgXCJvbmRyYWdcIixcbiAgICBcIm9uZHJhZ2VuZFwiLFxuICAgIFwib25kcmFnZW50ZXJcIixcbiAgICBcIm9uZHJhZ2xlYXZlXCIsXG4gICAgXCJvbmRyYWdvdmVyXCIsXG4gICAgXCJvbmRyYWdzdGFydFwiLFxuICAgIFwib25kcm9wXCIsXG4gICAgXCJvbmR1cmF0aW9uY2hhbmdlXCIsXG4gICAgXCJvbmVtcHRpZWRcIixcbiAgICBcIm9uZW5kZWRcIixcbiAgICBcIm9uZXJyb3JcIixcbiAgICBcIm9uZm9jdXNcIixcbiAgICBcIm9uaW5wdXRcIixcbiAgICBcIm9uaW52YWxpZFwiLFxuICAgIFwib25rZXlkb3duXCIsXG4gICAgXCJvbmtleXByZXNzXCIsXG4gICAgXCJvbmtleXVwXCIsXG4gICAgXCJvbmxvYWRcIixcbiAgICBcIm9ubG9hZGVkZGF0YVwiLFxuICAgIFwib25sb2FkZWRtZXRhZGF0YVwiLFxuICAgIFwib25sb2Fkc3RhcnRcIixcbiAgICBcIm9ubW91c2Vkb3duXCIsXG4gICAgXCJvbm1vdXNlbW92ZVwiLFxuICAgIFwib25tb3VzZW91dFwiLFxuICAgIFwib25tb3VzZW92ZXJcIixcbiAgICBcIm9ubW91c2V1cFwiLFxuICAgIFwib25tb3VzZXdoZWVsXCIsXG4gICAgXCJvbnBhdXNlXCIsXG4gICAgXCJvbnBsYXlcIixcbiAgICBcIm9ucGxheWluZ1wiLFxuICAgIFwib25wcm9ncmVzc1wiLFxuICAgIFwib25yYXRlY2hhbmdlXCIsXG4gICAgXCJvbnJlc2V0XCIsXG4gICAgXCJvbnNjcm9sbFwiLFxuICAgIFwib25zZWVrZWRcIixcbiAgICBcIm9uc2Vla2luZ1wiLFxuICAgIFwib25zZWxlY3RcIixcbiAgICBcIm9uc2hvd1wiLFxuICAgIFwib25zdGFsbGVkXCIsXG4gICAgXCJvbnN1Ym1pdFwiLFxuICAgIFwib25zdXNwZW5kXCIsXG4gICAgXCJvbnRpbWV1cGRhdGVcIixcbiAgICBcIm9udm9sdW1lY2hhbmdlXCIsXG4gICAgXCJvbndhaXRpbmdcIlxuXTtcblxudmFyIGdsb2JhbEF0dHJpYnV0ZXMgPSBjb21tb25BdHRyaWJ1dGVzLmNvbmNhdChldmVudEF0dHJpYnV0ZXMpO1xuXG52YXIgYXR0cmlidXRlTWFwID0ge1xuICAgIFwiaHRtbFwiOiBbXCJtYW5pZmVzdFwiXSxcbiAgICBcImhlYWRcIjogW10sXG4gICAgXCJ0aXRsZVwiOiBbXSxcbiAgICBcImJhc2VcIjogW1wiaHJlZlwiLCBcInRhcmdldFwiXSxcbiAgICBcImxpbmtcIjogW1wiaHJlZlwiLCBcImhyZWZsYW5nXCIsIFwicmVsXCIsIFwibWVkaWFcIiwgXCJ0eXBlXCIsIFwic2l6ZXNcIl0sXG4gICAgXCJtZXRhXCI6IFtcImh0dHAtZXF1aXZcIiwgXCJuYW1lXCIsIFwiY29udGVudFwiLCBcImNoYXJzZXRcIl0sXG4gICAgXCJzdHlsZVwiOiBbXCJ0eXBlXCIsIFwibWVkaWFcIiwgXCJzY29wZWRcIl0sXG4gICAgXCJzY3JpcHRcIjogW1wiY2hhcnNldFwiLCBcInR5cGVcIiwgXCJzcmNcIiwgXCJkZWZlclwiLCBcImFzeW5jXCJdLFxuICAgIFwibm9zY3JpcHRcIjogW1wiaHJlZlwiXSxcbiAgICBcImJvZHlcIjogW1wib25hZnRlcnByaW50XCIsIFwib25iZWZvcmVwcmludFwiLCBcIm9uYmVmb3JldW5sb2FkXCIsIFwib25oYXNoY2hhbmdlXCIsIFwib25tZXNzYWdlXCIsIFwib25vZmZsaW5lXCIsIFwib25wb3BzdGF0ZVwiLCBcIm9ucmVkb1wiLCBcIm9ucmVzaXplXCIsIFwib25zdG9yYWdlXCIsIFwib251bmRvXCIsIFwib251bmxvYWRcIl0sXG4gICAgXCJzZWN0aW9uXCI6IFtdLFxuICAgIFwibmF2XCI6IFtdLFxuICAgIFwiYXJ0aWNsZVwiOiBbXCJwdWJkYXRlXCJdLFxuICAgIFwiYXNpZGVcIjogW10sXG4gICAgXCJoMVwiOiBbXSxcbiAgICBcImgyXCI6IFtdLFxuICAgIFwiaDNcIjogW10sXG4gICAgXCJoNFwiOiBbXSxcbiAgICBcImg1XCI6IFtdLFxuICAgIFwiaDZcIjogW10sXG4gICAgXCJoZWFkZXJcIjogW10sXG4gICAgXCJmb290ZXJcIjogW10sXG4gICAgXCJhZGRyZXNzXCI6IFtdLFxuICAgIFwibWFpblwiOiBbXSxcbiAgICBcInBcIjogW10sXG4gICAgXCJoclwiOiBbXSxcbiAgICBcInByZVwiOiBbXSxcbiAgICBcImJsb2NrcXVvdGVcIjogW1wiY2l0ZVwiXSxcbiAgICBcIm9sXCI6IFtcInN0YXJ0XCIsIFwicmV2ZXJzZWRcIl0sXG4gICAgXCJ1bFwiOiBbXSxcbiAgICBcImxpXCI6IFtcInZhbHVlXCJdLFxuICAgIFwiZGxcIjogW10sXG4gICAgXCJkdFwiOiBbXSxcbiAgICBcImRkXCI6IFtdLFxuICAgIFwiZmlndXJlXCI6IFtdLFxuICAgIFwiZmlnY2FwdGlvblwiOiBbXSxcbiAgICBcImRpdlwiOiBbXSxcbiAgICBcImFcIjogW1wiaHJlZlwiLCBcInRhcmdldFwiLCBcInBpbmdcIiwgXCJyZWxcIiwgXCJtZWRpYVwiLCBcImhyZWZsYW5nXCIsIFwidHlwZVwiXSxcbiAgICBcImVtXCI6IFtdLFxuICAgIFwic3Ryb25nXCI6IFtdLFxuICAgIFwic21hbGxcIjogW10sXG4gICAgXCJzXCI6IFtdLFxuICAgIFwiY2l0ZVwiOiBbXSxcbiAgICBcInFcIjogW1wiY2l0ZVwiXSxcbiAgICBcImRmblwiOiBbXSxcbiAgICBcImFiYnJcIjogW10sXG4gICAgXCJkYXRhXCI6IFtdLFxuICAgIFwidGltZVwiOiBbXCJkYXRldGltZVwiXSxcbiAgICBcImNvZGVcIjogW10sXG4gICAgXCJ2YXJcIjogW10sXG4gICAgXCJzYW1wXCI6IFtdLFxuICAgIFwia2JkXCI6IFtdLFxuICAgIFwic3ViXCI6IFtdLFxuICAgIFwic3VwXCI6IFtdLFxuICAgIFwiaVwiOiBbXSxcbiAgICBcImJcIjogW10sXG4gICAgXCJ1XCI6IFtdLFxuICAgIFwibWFya1wiOiBbXSxcbiAgICBcInJ1YnlcIjogW10sXG4gICAgXCJydFwiOiBbXSxcbiAgICBcInJwXCI6IFtdLFxuICAgIFwiYmRpXCI6IFtdLFxuICAgIFwiYmRvXCI6IFtdLFxuICAgIFwic3BhblwiOiBbXSxcbiAgICBcImJyXCI6IFtdLFxuICAgIFwid2JyXCI6IFtdLFxuICAgIFwiaW5zXCI6IFtcImNpdGVcIiwgXCJkYXRldGltZVwiXSxcbiAgICBcImRlbFwiOiBbXCJjaXRlXCIsIFwiZGF0ZXRpbWVcIl0sXG4gICAgXCJpbWdcIjogW1wiYWx0XCIsIFwic3JjXCIsIFwiaGVpZ2h0XCIsIFwid2lkdGhcIiwgXCJ1c2VtYXBcIiwgXCJpc21hcFwiXSxcbiAgICBcImlmcmFtZVwiOiBbXCJuYW1lXCIsIFwic3JjXCIsIFwiaGVpZ2h0XCIsIFwid2lkdGhcIiwgXCJzYW5kYm94XCIsIFwic2VhbWxlc3NcIl0sXG4gICAgXCJlbWJlZFwiOiBbXCJzcmNcIiwgXCJoZWlnaHRcIiwgXCJ3aWR0aFwiLCBcInR5cGVcIl0sXG4gICAgXCJvYmplY3RcIjogW1wicGFyYW1cIiwgXCJkYXRhXCIsIFwidHlwZVwiLCBcImhlaWdodFwiLCBcIndpZHRoXCIsIFwidXNlbWFwXCIsIFwibmFtZVwiLCBcImZvcm1cIiwgXCJjbGFzc2lkXCJdLFxuICAgIFwicGFyYW1cIjogW1wibmFtZVwiLCBcInZhbHVlXCJdLFxuICAgIFwidmlkZW9cIjogW1wic3JjXCIsIFwiYXV0b2J1ZmZlclwiLCBcImF1dG9wbGF5XCIsIFwibG9vcFwiLCBcImNvbnRyb2xzXCIsIFwid2lkdGhcIiwgXCJoZWlnaHRcIiwgXCJwb3N0ZXJcIl0sXG4gICAgXCJhdWRpb1wiOiBbXCJzcmNcIiwgXCJhdXRvYnVmZmVyXCIsIFwiYXV0b3BsYXlcIiwgXCJsb29wXCIsIFwiY29udHJvbHNcIl0sXG4gICAgXCJzb3VyY2VcIjogW1wic3JjXCIsIFwidHlwZVwiLCBcIm1lZGlhXCJdLFxuICAgIFwidHJhY2tcIjogW1wia2luZFwiLCBcInNyY1wiLCBcInNyY2xhbmdcIiwgXCJsYWJlbFwiLCBcImRlZmF1bHRcIl0sXG4gICAgXCJjYW52YXNcIjogW1wid2lkdGhcIiwgXCJoZWlnaHRcIl0sXG4gICAgXCJtYXBcIjogW1wibmFtZVwiXSxcbiAgICBcImFyZWFcIjogW1wic2hhcGVcIiwgXCJjb29yZHNcIiwgXCJocmVmXCIsIFwiaHJlZmxhbmdcIiwgXCJhbHRcIiwgXCJ0YXJnZXRcIiwgXCJtZWRpYVwiLCBcInJlbFwiLCBcInBpbmdcIiwgXCJ0eXBlXCJdLFxuICAgIFwic3ZnXCI6IFtdLFxuICAgIFwibWF0aFwiOiBbXSxcbiAgICBcInRhYmxlXCI6IFtcInN1bW1hcnlcIl0sXG4gICAgXCJjYXB0aW9uXCI6IFtdLFxuICAgIFwiY29sZ3JvdXBcIjogW1wic3BhblwiXSxcbiAgICBcImNvbFwiOiBbXCJzcGFuXCJdLFxuICAgIFwidGJvZHlcIjogW10sXG4gICAgXCJ0aGVhZFwiOiBbXSxcbiAgICBcInRmb290XCI6IFtdLFxuICAgIFwidHJcIjogW10sXG4gICAgXCJ0ZFwiOiBbXCJoZWFkZXJzXCIsIFwicm93c3BhblwiLCBcImNvbHNwYW5cIl0sXG4gICAgXCJ0aFwiOiBbXCJoZWFkZXJzXCIsIFwicm93c3BhblwiLCBcImNvbHNwYW5cIiwgXCJzY29wZVwiXSxcbiAgICBcImZvcm1cIjogW1wiYWNjZXB0LWNoYXJzZXRcIiwgXCJhY3Rpb25cIiwgXCJhdXRvY29tcGxldGVcIiwgXCJlbmN0eXBlXCIsIFwibWV0aG9kXCIsIFwibmFtZVwiLCBcIm5vdmFsaWRhdGVcIiwgXCJ0YXJnZXRcIl0sXG4gICAgXCJmaWVsZHNldFwiOiBbXCJkaXNhYmxlZFwiLCBcImZvcm1cIiwgXCJuYW1lXCJdLFxuICAgIFwibGVnZW5kXCI6IFtdLFxuICAgIFwibGFiZWxcIjogW1wiZm9ybVwiLCBcImZvclwiXSxcbiAgICBcImlucHV0XCI6IFtcInR5cGVcIiwgXCJhY2NlcHRcIiwgXCJhbHRcIiwgXCJhdXRvY29tcGxldGVcIiwgXCJjaGVja2VkXCIsIFwiZGlzYWJsZWRcIiwgXCJmb3JtXCIsIFwiZm9ybWFjdGlvblwiLCBcImZvcm1lbmN0eXBlXCIsIFwiZm9ybW1ldGhvZFwiLCBcImZvcm1ub3ZhbGlkYXRlXCIsIFwiZm9ybXRhcmdldFwiLCBcImhlaWdodFwiLCBcImxpc3RcIiwgXCJtYXhcIiwgXCJtYXhsZW5ndGhcIiwgXCJtaW5cIiwgXCJtdWx0aXBsZVwiLCBcInBhdHRlcm5cIiwgXCJwbGFjZWhvbGRlclwiLCBcInJlYWRvbmx5XCIsIFwicmVxdWlyZWRcIiwgXCJzaXplXCIsIFwic3JjXCIsIFwic3RlcFwiLCBcIndpZHRoXCIsIFwiZmlsZXNcIiwgXCJ2YWx1ZVwiXSxcbiAgICBcImJ1dHRvblwiOiBbXCJhdXRvZm9jdXNcIiwgXCJkaXNhYmxlZFwiLCBcImZvcm1cIiwgXCJmb3JtYWN0aW9uXCIsIFwiZm9ybWVuY3R5cGVcIiwgXCJmb3JtbWV0aG9kXCIsIFwiZm9ybW5vdmFsaWRhdGVcIiwgXCJmb3JtdGFyZ2V0XCIsIFwibmFtZVwiLCBcInZhbHVlXCIsIFwidHlwZVwiXSxcbiAgICBcInNlbGVjdFwiOiBbXCJhdXRvZm9jdXNcIiwgXCJkaXNhYmxlZFwiLCBcImZvcm1cIiwgXCJtdWx0aXBsZVwiLCBcIm5hbWVcIiwgXCJzaXplXCJdLFxuICAgIFwiZGF0YWxpc3RcIjogW10sXG4gICAgXCJvcHRncm91cFwiOiBbXCJkaXNhYmxlZFwiLCBcImxhYmVsXCJdLFxuICAgIFwib3B0aW9uXCI6IFtcImRpc2FibGVkXCIsIFwic2VsZWN0ZWRcIiwgXCJsYWJlbFwiLCBcInZhbHVlXCJdLFxuICAgIFwidGV4dGFyZWFcIjogW1wiYXV0b2ZvY3VzXCIsIFwiZGlzYWJsZWRcIiwgXCJmb3JtXCIsIFwibWF4bGVuZ3RoXCIsIFwibmFtZVwiLCBcInBsYWNlaG9sZGVyXCIsIFwicmVhZG9ubHlcIiwgXCJyZXF1aXJlZFwiLCBcInJvd3NcIiwgXCJjb2xzXCIsIFwid3JhcFwiXSxcbiAgICBcImtleWdlblwiOiBbXCJhdXRvZm9jdXNcIiwgXCJjaGFsbGVuZ2VcIiwgXCJkaXNhYmxlZFwiLCBcImZvcm1cIiwgXCJrZXl0eXBlXCIsIFwibmFtZVwiXSxcbiAgICBcIm91dHB1dFwiOiBbXCJmb3JcIiwgXCJmb3JtXCIsIFwibmFtZVwiXSxcbiAgICBcInByb2dyZXNzXCI6IFtcInZhbHVlXCIsIFwibWF4XCJdLFxuICAgIFwibWV0ZXJcIjogW1widmFsdWVcIiwgXCJtaW5cIiwgXCJtYXhcIiwgXCJsb3dcIiwgXCJoaWdoXCIsIFwib3B0aW11bVwiXSxcbiAgICBcImRldGFpbHNcIjogW1wib3BlblwiXSxcbiAgICBcInN1bW1hcnlcIjogW10sXG4gICAgXCJjb21tYW5kXCI6IFtcInR5cGVcIiwgXCJsYWJlbFwiLCBcImljb25cIiwgXCJkaXNhYmxlZFwiLCBcImNoZWNrZWRcIiwgXCJyYWRpb2dyb3VwXCIsIFwiY29tbWFuZFwiXSxcbiAgICBcIm1lbnVcIjogW1widHlwZVwiLCBcImxhYmVsXCJdLFxuICAgIFwiZGlhbG9nXCI6IFtcIm9wZW5cIl1cbn07XG5cbnZhciBlbGVtZW50cyA9IE9iamVjdC5rZXlzKGF0dHJpYnV0ZU1hcCk7XG5cbmZ1bmN0aW9uIGlzKHRva2VuLCB0eXBlKSB7XG4gICAgcmV0dXJuIHRva2VuLnR5cGUubGFzdEluZGV4T2YodHlwZSArIFwiLnhtbFwiKSA+IC0xO1xufVxuXG5mdW5jdGlvbiBmaW5kVGFnTmFtZShzZXNzaW9uLCBwb3MpIHtcbiAgICB2YXIgaXRlcmF0b3IgPSBuZXcgVG9rZW5JdGVyYXRvcihzZXNzaW9uLCBwb3Mucm93LCBwb3MuY29sdW1uKTtcbiAgICB2YXIgdG9rZW4gPSBpdGVyYXRvci5nZXRDdXJyZW50VG9rZW4oKTtcbiAgICB3aGlsZSAodG9rZW4gJiYgIWlzKHRva2VuLCBcInRhZy1uYW1lXCIpKSB7XG4gICAgICAgIHRva2VuID0gaXRlcmF0b3Iuc3RlcEJhY2t3YXJkKCk7XG4gICAgfVxuICAgIGlmICh0b2tlbilcbiAgICAgICAgcmV0dXJuIHRva2VuLnZhbHVlO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIdG1sQ29tcGxldGlvbnMge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuXG4gICAgfVxuXG4gICAgZ2V0Q29tcGxldGlvbnMoc3RhdGUsIHNlc3Npb24sIHBvcywgcHJlZml4KTogYW55IHtcbiAgICAgICAgdmFyIHRva2VuID0gc2Vzc2lvbi5nZXRUb2tlbkF0KHBvcy5yb3csIHBvcy5jb2x1bW4pO1xuXG4gICAgICAgIGlmICghdG9rZW4pXG4gICAgICAgICAgICByZXR1cm4gW107XG5cbiAgICAgICAgLy8gdGFnIG5hbWVcbiAgICAgICAgaWYgKGlzKHRva2VuLCBcInRhZy1uYW1lXCIpIHx8IGlzKHRva2VuLCBcInRhZy1vcGVuXCIpIHx8IGlzKHRva2VuLCBcImVuZC10YWctb3BlblwiKSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRhZ0NvbXBsZXRpb25zKHN0YXRlLCBzZXNzaW9uLCBwb3MsIHByZWZpeCk7XG5cbiAgICAgICAgLy8gdGFnIGF0dHJpYnV0ZVxuICAgICAgICBpZiAoaXModG9rZW4sIFwidGFnLXdoaXRlc3BhY2VcIikgfHwgaXModG9rZW4sIFwiYXR0cmlidXRlLW5hbWVcIikpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGVDb21wZXRpb25zKHN0YXRlLCBzZXNzaW9uLCBwb3MsIHByZWZpeCk7XG5cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGdldFRhZ0NvbXBsZXRpb25zKHN0YXRlLCBzZXNzaW9uLCBwb3MsIHByZWZpeCkge1xuICAgICAgICByZXR1cm4gZWxlbWVudHMubWFwKGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGVsZW1lbnQsXG4gICAgICAgICAgICAgICAgbWV0YTogXCJ0YWdcIixcbiAgICAgICAgICAgICAgICBzY29yZTogTnVtYmVyLk1BWF9WQUxVRVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0QXR0cmlidXRlQ29tcGV0aW9ucyhzdGF0ZSwgc2Vzc2lvbiwgcG9zLCBwcmVmaXgpIHtcbiAgICAgICAgdmFyIHRhZ05hbWUgPSBmaW5kVGFnTmFtZShzZXNzaW9uLCBwb3MpO1xuICAgICAgICBpZiAoIXRhZ05hbWUpXG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIHZhciBhdHRyaWJ1dGVzID0gZ2xvYmFsQXR0cmlidXRlcztcbiAgICAgICAgaWYgKHRhZ05hbWUgaW4gYXR0cmlidXRlTWFwKSB7XG4gICAgICAgICAgICBhdHRyaWJ1dGVzID0gYXR0cmlidXRlcy5jb25jYXQoYXR0cmlidXRlTWFwW3RhZ05hbWVdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXR0cmlidXRlcy5tYXAoZnVuY3Rpb24oYXR0cmlidXRlKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGNhcHRpb246IGF0dHJpYnV0ZSxcbiAgICAgICAgICAgICAgICBzbmlwcGV0OiBhdHRyaWJ1dGUgKyAnPVwiJDBcIicsXG4gICAgICAgICAgICAgICAgbWV0YTogXCJhdHRyaWJ1dGVcIixcbiAgICAgICAgICAgICAgICBzY29yZTogTnVtYmVyLk1BWF9WQUxVRVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIl19