var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var attribute = require('./attribute');
var hammer = require('../hammer');
var PanRecognizer = (function (_super) {
    __extends(PanRecognizer, _super);
    function PanRecognizer(eventName, enabled) {
        _super.call(this, eventName, enabled, 1);
        this.direction = hammer.DIRECTION_ALL;
        this.threshold = 10;
    }
    PanRecognizer.prototype.setDirection = function (direction) {
        this.direction = direction;
        return this;
    };
    PanRecognizer.prototype.setThreshold = function (threshold) {
        this.threshold = threshold;
        return this;
    };
    PanRecognizer.prototype.getTouchAction = function () {
        var actions = [];
        if (this.direction & hammer.DIRECTION_HORIZONTAL) {
            actions.push(hammer.TOUCH_ACTION_PAN_Y);
        }
        if (this.direction & hammer.DIRECTION_VERTICAL) {
            actions.push(hammer.TOUCH_ACTION_PAN_X);
        }
        return actions;
    };
    PanRecognizer.prototype.directionTest = function (input) {
        var hasMoved = true;
        var distance = input.distance;
        var direction = input.direction;
        var x = input.movement.x;
        var y = input.movement.y;
        if (!(direction & this.direction)) {
            if (this.direction & hammer.DIRECTION_HORIZONTAL) {
                direction = (x === 0) ? hammer.DIRECTION_UNDEFINED : (x < 0) ? hammer.DIRECTION_LEFT : hammer.DIRECTION_RIGHT;
                hasMoved = x != this.pX;
                distance = Math.abs(input.movement.x);
            }
            else {
                direction = (y === 0) ? hammer.DIRECTION_UNDEFINED : (y < 0) ? hammer.DIRECTION_UP : hammer.DIRECTION_DOWN;
                hasMoved = y != this.pY;
                distance = Math.abs(input.movement.y);
            }
        }
        var directionAllowed = (direction & this.direction) > 0;
        return hasMoved && distance > this.threshold && directionAllowed;
    };
    PanRecognizer.prototype.attributeTest = function (input) {
        this.movement = input.movement;
        if (input.movement) {
            var directionOK = this.directionTest(input);
            var began = (this.state & hammer.STATE_BEGAN) > 0;
            return _super.prototype.attributeTest.call(this, input) && (began || (!began && directionOK));
        }
        else {
            return true;
        }
    };
    PanRecognizer.prototype.emit = function () {
        if (this.movement) {
            this.manager.emit(this.eventName, this.movement);
        }
    };
    return PanRecognizer;
})(attribute.ContinuousRecognizer);
exports.PanRecognizer = PanRecognizer;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFuLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2hhbW1lci9yZWNvZ25pemVycy9wYW4udHMiXSwibmFtZXMiOlsiUGFuUmVjb2duaXplciIsIlBhblJlY29nbml6ZXIuY29uc3RydWN0b3IiLCJQYW5SZWNvZ25pemVyLnNldERpcmVjdGlvbiIsIlBhblJlY29nbml6ZXIuc2V0VGhyZXNob2xkIiwiUGFuUmVjb2duaXplci5nZXRUb3VjaEFjdGlvbiIsIlBhblJlY29nbml6ZXIuZGlyZWN0aW9uVGVzdCIsIlBhblJlY29nbml6ZXIuYXR0cmlidXRlVGVzdCIsIlBhblJlY29nbml6ZXIuZW1pdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxJQUFPLFNBQVMsV0FBVyxhQUFhLENBQUMsQ0FBQztBQUMxQyxJQUFPLE1BQU0sV0FBVyxXQUFXLENBQUMsQ0FBQztBQUtyQztJQUFtQ0EsaUNBQThCQTtJQU0vREEsdUJBQVlBLFNBQWlCQSxFQUFFQSxPQUFnQkE7UUFDN0NDLGtCQUFNQSxTQUFTQSxFQUFFQSxPQUFPQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUp2QkEsY0FBU0EsR0FBV0EsTUFBTUEsQ0FBQ0EsYUFBYUEsQ0FBQ0E7UUFDekNBLGNBQVNBLEdBQUdBLEVBQUVBLENBQUNBO0lBSXZCQSxDQUFDQTtJQUNERCxvQ0FBWUEsR0FBWkEsVUFBYUEsU0FBaUJBO1FBQzVCRSxJQUFJQSxDQUFDQSxTQUFTQSxHQUFHQSxTQUFTQSxDQUFDQTtRQUMzQkEsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0E7SUFDZEEsQ0FBQ0E7SUFDREYsb0NBQVlBLEdBQVpBLFVBQWFBLFNBQWlCQTtRQUM1QkcsSUFBSUEsQ0FBQ0EsU0FBU0EsR0FBR0EsU0FBU0EsQ0FBQ0E7UUFDM0JBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBO0lBQ2RBLENBQUNBO0lBQ0RILHNDQUFjQSxHQUFkQTtRQUNFSSxJQUFJQSxPQUFPQSxHQUFhQSxFQUFFQSxDQUFDQTtR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Q0EsS0FBS0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDbkJBLElBQUlBLFdBQVdBLEdBQVlBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBO1lBQ3JEQSxJQUFJQSxLQUFLQSxHQUFZQSxDQUFDQSxJQUFJQSxDQUFDQSxLQUFLQSxHQUFHQSxNQUFNQSxDQUFDQSxXQUFXQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtZQUMzREEsTUFBTUEsQ0FBQ0EsZ0JBQUtBLENBQUNBLGFBQWFBLFlBQUNBLEtBQUtBLENBQUNBLElBQUlBLENBQUNBLEtBQUtBLElBQUlBLENBQUNBLENBQUNBLEtBQUtBLElBQUlBLFdBQVdBLENBQUNBLENBQUNBLENBQUNBO1FBQzFFQSxDQUFDQTtRQUNEQSxJQUFJQSxDQUFDQSxDQUFDQTtZQUNKQSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQTtRQUNkQSxDQUFDQTtJQUNIQSxDQUFDQTtJQUVETiw0QkFBSUEsR0FBSkE7UUFDRU8sRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDbEJBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLFNBQVNBLEVBQUVBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLENBQUNBO1FBQ25EQSxDQUFDQTtJQUNIQSxDQUFDQTtJQUNIUCxvQkFBQ0E7QUFBREEsQ0FBQ0EsQUF2RUQsRUFBbUMsU0FBUyxDQUFDLG9CQUFvQixFQXVFaEU7QUF2RVkscUJBQWEsZ0JBdUV6QixDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF0dHJpYnV0ZSA9IHJlcXVpcmUoJy4vYXR0cmlidXRlJyk7XG5pbXBvcnQgaGFtbWVyID0gcmVxdWlyZSgnLi4vaGFtbWVyJyk7XG5pbXBvcnQgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xuLyoqXG4gKlxuICovXG5leHBvcnQgY2xhc3MgUGFuUmVjb2duaXplciBleHRlbmRzIGF0dHJpYnV0ZS5Db250aW51b3VzUmVjb2duaXplciB7XG4gIHByaXZhdGUgcFg6IG51bWJlcjtcbiAgcHJpdmF0ZSBwWTogbnVtYmVyO1xuICBwcml2YXRlIGRpcmVjdGlvbjogbnVtYmVyID0gaGFtbWVyLkRJUkVDVElPTl9BTEw7XG4gIHByaXZhdGUgdGhyZXNob2xkID0gMTA7XG4gIHByaXZhdGUgbW92ZW1lbnQ6IGhhbW1lci5WZWN0b3JFMjtcbiAgY29uc3RydWN0b3IoZXZlbnROYW1lOiBzdHJpbmcsIGVuYWJsZWQ6IGJvb2xlYW4pIHtcbiAgICBzdXBlcihldmVudE5hbWUsIGVuYWJsZWQsIDEpO1xuICB9XG4gIHNldERpcmVjdGlvbihkaXJlY3Rpb246IG51bWJlcik6IFBhblJlY29nbml6ZXIge1xuICAgIHRoaXMuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHNldFRocmVzaG9sZCh0aHJlc2hvbGQ6IG51bWJlcik6IFBhblJlY29nbml6ZXIge1xuICAgIHRoaXMudGhyZXNob2xkID0gdGhyZXNob2xkO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGdldFRvdWNoQWN0aW9uKCk6IHN0cmluZ1tdIHtcbiAgICB2YXIgYWN0aW9uczogc3RyaW5nW10gPSBbXTtcbiAgICBpZiAodGhpcy5kaXJlY3Rpb24gJiBoYW1tZXIuRElSRUNUSU9OX0hPUklaT05UQUwpIHtcbiAgICAgIGFjdGlvbnMucHVzaChoYW1tZXIuVE9VQ0hfQUNUSU9OX1BBTl9ZKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuZGlyZWN0aW9uICYgaGFtbWVyLkRJUkVDVElPTl9WRVJUSUNBTCkge1xuICAgICAgYWN0aW9ucy5wdXNoKGhhbW1lci5UT1VDSF9BQ1RJT05fUEFOX1gpO1xuICAgIH1cbiAgICByZXR1cm4gYWN0aW9ucztcbiAgfVxuXG4gIGRpcmVjdGlvblRlc3QoaW5wdXQ6IGhhbW1lci5JQ29tcHV0ZWRFdmVudCk6IGJvb2xlYW4ge1xuICAgIHZhciBoYXNNb3ZlZCA9IHRydWU7XG4gICAgdmFyIGRpc3RhbmNlID0gaW5wdXQuZGlzdGFuY2U7XG4gICAgdmFyIGRpcmVjdGlvbiA9IGlucHV0LmRpcmVjdGlvbjtcbiAgICB2YXIgeCA9IGlucHV0Lm1vdmVtZW50Lng7XG4gICAgdmFyIHkgPSBpbnB1dC5tb3ZlbWVudC55O1xuXG4gICAgLy8gbG9jayB0byBheGlzP1xuICAgIGlmICghKGRpcmVjdGlvbiAmIHRoaXMuZGlyZWN0aW9uKSkge1xuICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gJiBoYW1tZXIuRElSRUNUSU9OX0hPUklaT05UQUwpIHtcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9ICh4ID09PSAwKSA/IGhhbW1lci5ESVJFQ1RJT05fVU5ERUZJTkVEIDogKHggPCAwKSA/IGhhbW1lci5ESVJFQ1RJT05fTEVGVCA6IGhhbW1lci5ESVJFQ1RJT05fUklHSFQ7XG4gICAgICAgICAgICBoYXNNb3ZlZCA9IHggIT0gdGhpcy5wWDtcbiAgICAgICAgICAgIGRpc3RhbmNlID0gTWF0aC5hYnMoaW5wdXQubW92ZW1lbnQueCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkaXJlY3Rpb24gPSAoeSA9PT0gMCkgPyBoYW1tZXIuRElSRUNUSU9OX1VOREVGSU5FRCA6ICh5IDwgMCkgPyBoYW1tZXIuRElSRUNUSU9OX1VQIDogaGFtbWVyLkRJUkVDVElPTl9ET1dOO1xuICAgICAgICAgICAgaGFzTW92ZWQgPSB5ICE9IHRoaXMucFk7XG4gICAgICAgICAgICBkaXN0YW5jZSA9IE1hdGguYWJzKGlucHV0Lm1vdmVtZW50LnkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciBkaXJlY3Rpb25BbGxvd2VkOiBib29sZWFuID0gKGRpcmVjdGlvbiAmIHRoaXMuZGlyZWN0aW9uKSA+IDA7XG4gICAgcmV0dXJuIGhhc01vdmVkICYmIGRpc3RhbmNlID4gdGhpcy50aHJlc2hvbGQgJiYgZGlyZWN0aW9uQWxsb3dlZDtcbiAgfVxuXG4gIGF0dHJpYnV0ZVRlc3QoaW5wdXQ6IGhhbW1lci5JQ29tcHV0ZWRFdmVudCk6IGJvb2xlYW4ge1xuICAgIHRoaXMubW92ZW1lbnQgPSBpbnB1dC5tb3ZlbWVudDtcbiAgICAvLyBUaGUgZmlyc3QgYW5kIGxhc3QgZXZlbnRzIHdpbGwgbm90IGhhdmUgbW92ZW1lbnQgZGVmaW5lZC5cbiAgICAvLyBUaGUgZGlyZWN0aW9uIHRlc3QgcmVxdWlyZXMgbW92ZW1lbnQhXG4gICAgaWYgKGlucHV0Lm1vdmVtZW50KSB7XG4gICAgICB2YXIgZGlyZWN0aW9uT0s6IGJvb2xlYW4gPSB0aGlzLmRpcmVjdGlvblRlc3QoaW5wdXQpO1xuICAgICAgdmFyIGJlZ2FuOiBib29sZWFuID0gKHRoaXMuc3RhdGUgJiBoYW1tZXIuU1RBVEVfQkVHQU4pID4gMDtcbiAgICAgIHJldHVybiBzdXBlci5hdHRyaWJ1dGVUZXN0KGlucHV0KSAmJiAoYmVnYW4gfHwgKCFiZWdhbiAmJiBkaXJlY3Rpb25PSykpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGVtaXQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubW92ZW1lbnQpIHtcbiAgICAgIHRoaXMubWFuYWdlci5lbWl0KHRoaXMuZXZlbnROYW1lLCB0aGlzLm1vdmVtZW50KTtcbiAgICB9XG4gIH1cbn1cbiJdfQ==