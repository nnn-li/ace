import { ContinuousRecognizer } from './attribute';
import { STATE_BEGAN, TOUCH_ACTION_NONE } from '../hammer';
export class PinchRecognizer extends ContinuousRecognizer {
    constructor(eventName, enabled) {
        super(eventName, enabled, 2);
        this.threshold = 2;
        this.scale = 1;
    }
    getTouchAction() {
        return [TOUCH_ACTION_NONE];
    }
    attributeTest(input) {
        var isBegan = (this.state & STATE_BEGAN) > 0;
        this.scale = input.scale;
        return super.attributeTest(input) && (Math.abs(this.scale - 1) > this.threshold || isBegan);
    }
    emit() {
        if (this.scale !== 1) {
            var inOut = this.scale < 1 ? 'in' : 'out';
            var event = new Event('pinch');
            this.manager.emit(this.eventName + inOut, event);
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGluY2guanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvaGFtbWVyL3JlY29nbml6ZXJzL3BpbmNoLnRzIl0sIm5hbWVzIjpbIlBpbmNoUmVjb2duaXplciIsIlBpbmNoUmVjb2duaXplci5jb25zdHJ1Y3RvciIsIlBpbmNoUmVjb2duaXplci5nZXRUb3VjaEFjdGlvbiIsIlBpbmNoUmVjb2duaXplci5hdHRyaWJ1dGVUZXN0IiwiUGluY2hSZWNvZ25pemVyLmVtaXQiXSwibWFwcGluZ3MiOiJPQUFPLEVBQUMsb0JBQW9CLEVBQUMsTUFBTSxhQUFhO09BQ3pDLEVBQWlCLFdBQVcsRUFBRSxpQkFBaUIsRUFBQyxNQUFNLFdBQVc7QUFReEUscUNBQXFDLG9CQUFvQjtJQUdyREEsWUFBWUEsU0FBaUJBLEVBQUVBLE9BQWdCQTtRQUMzQ0MsTUFBTUEsU0FBU0EsRUFBRUEsT0FBT0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFIekJBLGNBQVNBLEdBQUdBLENBQUNBLENBQUNBO1FBQ2RBLFVBQUtBLEdBQUdBLENBQUNBLENBQUNBO0lBR2xCQSxDQUFDQTtJQUNERCxjQUFjQTtRQUNWRSxNQUFNQSxDQUFDQSxDQUFDQSxpQkFBaUJBLENBQUNBLENBQUNBO0lBQy9CQSxDQUFDQTtJQUNERixhQUFhQSxDQUFDQSxLQUFxQkE7UUFDL0JHLElBQUlBLE9BQU9BLEdBQVlBLENBQUNBLElBQUlBLENBQUNBLEtBQUtBLEdBQUdBLFdBQVdBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBO1FBQ3REQSxJQUFJQSxDQUFDQSxLQUFLQSxHQUFHQSxLQUFLQSxDQUFDQSxLQUFLQSxDQUFDQTtRQUN6QkEsTUFBTUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsYUFBYUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsS0FBS0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsU0FBU0EsSUFBSUEsT0FBT0EsQ0FBQ0EsQ0FBQ0E7SUFDaEdBLENBQUNBO0lBQ0RILElBQUlBO1FBQ0FJLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLEtBQUtBLEtBQUtBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1lBQ25CQSxJQUFJQSxLQUFLQSxHQUFHQSxJQUFJQSxDQUFDQSxLQUFLQSxHQUFHQSxDQUFDQSxHQUFHQSxJQUFJQSxHQUFHQSxLQUFLQSxDQUFDQTtZQUMxQ0EsSUFBSUEsS0FBS0EsR0FBR0EsSUFBSUEsS0FBS0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsQ0FBQ0E7WUFDL0JBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLFNBQVNBLEdBQUdBLEtBQUtBLEVBQUVBLEtBQUtBLENBQUNBLENBQUNBO1FBQ3JEQSxDQUFDQTtJQUNMQSxDQUFDQTtBQUNMSixDQUFDQTtBQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtDb250aW51b3VzUmVjb2duaXplcn0gZnJvbSAnLi9hdHRyaWJ1dGUnO1xuaW1wb3J0IHtJQ29tcHV0ZWRFdmVudCwgU1RBVEVfQkVHQU4sIFRPVUNIX0FDVElPTl9OT05FfSBmcm9tICcuLi9oYW1tZXInO1xuXG4vKipcbiAqIFBpbmNoXG4gKiBSZWNvZ25pemVkIHdoZW4gdHdvIG9yIG1vcmUgcG9pbnRlcnMgYXJlIG1vdmluZyB0b3dhcmQgKHpvb20taW4pIG9yIGF3YXkgZnJvbSBlYWNoIG90aGVyICh6b29tLW91dCkuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIENvbnRpbnVvdXNSZWNvZ25pemVyXG4gKi9cbmV4cG9ydCBjbGFzcyBQaW5jaFJlY29nbml6ZXIgZXh0ZW5kcyBDb250aW51b3VzUmVjb2duaXplciB7XG4gICAgcHJpdmF0ZSB0aHJlc2hvbGQgPSAyO1xuICAgIHByaXZhdGUgc2NhbGUgPSAxO1xuICAgIGNvbnN0cnVjdG9yKGV2ZW50TmFtZTogc3RyaW5nLCBlbmFibGVkOiBib29sZWFuKSB7XG4gICAgICAgIHN1cGVyKGV2ZW50TmFtZSwgZW5hYmxlZCwgMik7XG4gICAgfVxuICAgIGdldFRvdWNoQWN0aW9uKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgcmV0dXJuIFtUT1VDSF9BQ1RJT05fTk9ORV07XG4gICAgfVxuICAgIGF0dHJpYnV0ZVRlc3QoaW5wdXQ6IElDb21wdXRlZEV2ZW50KTogYm9vbGVhbiB7XG4gICAgICAgIHZhciBpc0JlZ2FuOiBib29sZWFuID0gKHRoaXMuc3RhdGUgJiBTVEFURV9CRUdBTikgPiAwO1xuICAgICAgICB0aGlzLnNjYWxlID0gaW5wdXQuc2NhbGU7XG4gICAgICAgIHJldHVybiBzdXBlci5hdHRyaWJ1dGVUZXN0KGlucHV0KSAmJiAoTWF0aC5hYnModGhpcy5zY2FsZSAtIDEpID4gdGhpcy50aHJlc2hvbGQgfHwgaXNCZWdhbik7XG4gICAgfVxuICAgIGVtaXQoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLnNjYWxlICE9PSAxKSB7XG4gICAgICAgICAgICB2YXIgaW5PdXQgPSB0aGlzLnNjYWxlIDwgMSA/ICdpbicgOiAnb3V0JztcbiAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgncGluY2gnKTtcbiAgICAgICAgICAgIHRoaXMubWFuYWdlci5lbWl0KHRoaXMuZXZlbnROYW1lICsgaW5PdXQsIGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiJdfQ==