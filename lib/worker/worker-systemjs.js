"no use strict";
;
(function (window) {
    if (typeof window.window !== 'undefined' && window.document) {
        return;
    }
    window.console = function () {
        var msgs = Array.prototype.slice.call(arguments, 0);
        window.postMessage({ type: "log", data: msgs });
    };
    window.console.error =
        window.console.warn =
            window.console.log =
                window.console.trace = window.console;
    importScripts('../../jspm_packages/system.js', '../../config.js');
    window.window = window;
    window.onerror = function (message, file, line, col, err) {
        console.error("Worker " + (err ? err.stack : message));
    };
    window.normalizeModule = function (parentId, moduleName) {
        if (moduleName.indexOf("!") !== -1) {
            var chunks = moduleName.split("!");
            return window.normalizeModule(parentId, chunks[0]) + "!" + window.normalizeModule(parentId, chunks[1]);
        }
        if (moduleName.charAt(0) == ".") {
            var base = parentId ? parentId.split("/").slice(0, -1).join("/") : void 0;
            moduleName = (base ? base + "/" : "") + moduleName;
            while (moduleName.indexOf(".") !== -1 && previous != moduleName) {
                var previous = moduleName;
                moduleName = moduleName.replace(/^\.\//, "").replace(/\/\.\//, "/").replace(/[^\/]+\/\.\.\//, "");
            }
        }
        return moduleName;
    };
    function initDelegate(name) {
        System.import('lib/lib/Sender')
            .then(function (s) {
            sender = new s.default(window);
            System.import(name)
                .then(function (m) {
                main = window.main = new m.default(sender);
            })
                .catch(function (error) {
                console.error(error);
            });
        })
            .catch(function (error) {
            console.error(error);
        });
    }
    ;
    var main = window.main = null;
    var sender = null;
    window.onmessage = function (event) {
        var data = event.data;
        var msg = data;
        var origin = event.origin;
        var source = event.source;
        if (msg.command) {
            if (main) {
                if (main[msg.command]) {
                    main[msg.command].apply(main, msg.args);
                }
                else {
                    throw new Error("Unknown command:" + msg.command + "(" + JSON.stringify(msg.args) + ")");
                }
            }
            else {
                console.warn("Not initialized. Unable to process command " + msg.command + "(" + JSON.stringify(msg.args) + ")");
            }
        }
        else if (msg.init) {
            initDelegate(msg.module);
        }
        else if (msg.event && sender) {
            sender._signal(msg.event, msg.data);
        }
        else {
            console.warn('worker-system.onMessage() DROPPED ' + JSON.stringify(msg));
        }
    };
})(this);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid29ya2VyLXN5c3RlbWpzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3dvcmtlci93b3JrZXItc3lzdGVtanMudHMiXSwibmFtZXMiOlsiaW5pdERlbGVnYXRlIl0sIm1hcHBpbmdzIjoiQUFDQSxlQUFlLENBQUM7QUFDaEIsQ0FBQztBQUNELENBQUMsVUFBUyxNQUFNO0lBQ2QsRUFBRSxDQUFDLENBQUMsT0FBTyxNQUFNLENBQUMsTUFBTSxLQUFLLFdBQVcsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztRQUM1RCxNQUFNLENBQUM7SUFDVCxDQUFDO0lBRUQsTUFBTSxDQUFDLE9BQU8sR0FBRztRQUNmLElBQUksSUFBSSxHQUFHLEtBQUssQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDcEQsTUFBTSxDQUFDLFdBQVcsQ0FBQyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7SUFDbEQsQ0FBQyxDQUFDO0lBQ0YsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLO1FBQ2xCLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSTtZQUNuQixNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUc7Z0JBQ2xCLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUM7SUFHeEMsYUFBYSxDQUFDLCtCQUErQixFQUFFLGlCQUFpQixDQUFDLENBQUM7SUFFbEUsTUFBTSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7SUFHdkIsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFTLE9BQU8sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxHQUFHO1FBQ3JELE9BQU8sQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFHLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxLQUFLLEdBQUcsT0FBTyxDQUFDLENBQUMs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QVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzNFLENBQUM7SUFDSCxDQUFDLENBQUM7QUFDSixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL3N5c3RlbWpzLmQudHNcIiAvPlxuXCJubyB1c2Ugc3RyaWN0XCI7XG47XG4oZnVuY3Rpb24od2luZG93Lyo6IFdpbmRvdyovKSB7XG4gIGlmICh0eXBlb2Ygd2luZG93LndpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmRvY3VtZW50KSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgd2luZG93LmNvbnNvbGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbXNncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XG4gICAgd2luZG93LnBvc3RNZXNzYWdlKHsgdHlwZTogXCJsb2dcIiwgZGF0YTogbXNncyB9KTsgIC8vIEZJWE1FOiB0YXJnZXRPcmlnaW5cbiAgfTtcbiAgd2luZG93LmNvbnNvbGUuZXJyb3IgPVxuICAgIHdpbmRvdy5jb25zb2xlLndhcm4gPVxuICAgIHdpbmRvdy5jb25zb2xlLmxvZyA9XG4gICAgd2luZG93LmNvbnNvbGUudHJhY2UgPSB3aW5kb3cuY29uc29sZTtcblxuICAvLyAgaW1wb3J0U2NyaXB0cygnL2pzcG1fcGFja2FnZXMvc3lzdGVtLmpzJywgJy9jb25maWcuanMnKTtcbiAgaW1wb3J0U2NyaXB0cygnLi4vLi4vanNwbV9wYWNrYWdlcy9zeXN0ZW0uanMnLCAnLi4vLi4vY29uZmlnLmpzJyk7XG5cbiAgd2luZG93LndpbmRvdyA9IHdpbmRvdztcblxuICAvLyBDYWxsZWQgd2hlbiBhIHJ1bnRpbWUgZXJyb3Igb2NjdXJzIGluIGEgd29ya2VyLlxuICB3aW5kb3cub25lcnJvciA9IGZ1bmN0aW9uKG1lc3NhZ2UsIGZpbGUsIGxpbmUsIGNvbCwgZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihcIldvcmtlciBcIiArIChlcnIgPyBlcnIuc3RhY2sgOiBtZXNzYWdlKSk7XG4gIH07XG5cbiAgLy8gRklYTUU6IFdlIGhhdmUgYW4gaXNzdWUgd2l0aCByZWxhdGl2ZSBkZXBlbmRlbmNpZXM7IHRoZSBwYXJlbnRJZCBpcyBudWxsLlxuICB3aW5kb3cubm9ybWFsaXplTW9kdWxlID0gZnVuY3Rpb24ocGFyZW50SWQ6IHN0cmluZywgbW9kdWxlTmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyBub3JtYWxpemUgcGx1Z2luIGRlcGVuZGVuY2llcy5cbiAgICBpZiAobW9kdWxlTmFtZS5pbmRleE9mKFwiIVwiKSAhPT0gLTEpIHtcbiAgICAgIHZhciBjaHVua3MgPSBtb2R1bGVOYW1lLnNwbGl0KFwiIVwiKTtcbiAgICAgIHJldHVybiB3aW5kb3cubm9ybWFsaXplTW9kdWxlKHBhcmVudElkLCBjaHVua3NbMF0pICsgXCIhXCIgKyB3aW5kb3cubm9ybWFsaXplTW9kdWxlKHBhcmVudElkLCBjaHVua3NbMV0pO1xuICAgIH1cbiAgICAvLyBub3JtYWxpemUgcmVsYXRpdmUgZGVwZW5kZW5jaWVzLlxuICAgIGlmIChtb2R1bGVOYW1lLmNoYXJBdCgwKSA9PSBcIi5cIikge1xuICAgICAgdmFyIGJhc2UgPSBwYXJlbnRJZCA/IHBhcmVudElkLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIikgOiB2b2lkIDA7XG4gICAgICBtb2R1bGVOYW1lID0gKGJhc2UgPyBiYXNlICsgXCIvXCIgOiBcIlwiKSArIG1vZHVsZU5hbWU7XG5cbiAgICAgIHdoaWxlIChtb2R1bGVOYW1lLmluZGV4T2YoXCIuXCIpICE9PSAtMSAmJiBwcmV2aW91cyAhPSBtb2R1bGVOYW1lKSB7XG4gICAgICAgIHZhciBwcmV2aW91cyA9IG1vZHVsZU5hbWU7XG4gICAgICAgIG1vZHVsZU5hbWUgPSBtb2R1bGVOYW1lLnJlcGxhY2UoL15cXC5cXC8vLCBcIlwiKS5yZXBsYWNlKC9cXC9cXC5cXC8vLCBcIi9cIikucmVwbGFjZSgvW15cXC9dK1xcL1xcLlxcLlxcLy8sIFwiXCIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBtb2R1bGVOYW1lO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGluaXREZWxlZ2F0ZShuYW1lOiBzdHJpbmcpOiB2b2lkIHtcblxuICAgIFN5c3RlbS5pbXBvcnQoJ2xpYi9saWIvU2VuZGVyJylcbiAgICAgIC50aGVuKGZ1bmN0aW9uKHMpIHtcbiAgICAgICAgc2VuZGVyID0gbmV3IHMuZGVmYXVsdCh3aW5kb3cpXG4gICAgICAgIFN5c3RlbS5pbXBvcnQobmFtZSlcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihtKSB7XG4gICAgICAgICAgICBtYWluID0gd2luZG93Lm1haW4gPSBuZXcgbS5kZWZhdWx0KHNlbmRlcilcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgfSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIG1haW4gaXMgdGhlIGluc3RhbmNlIHRoYXQgd2UgYXJlIGNyZWF0aW5nP1xuICAgKi9cbiAgdmFyIG1haW4gPSB3aW5kb3cubWFpbiA9IG51bGw7XG4gIC8qKlxuICAgKiBzZW5kZXIgYWxsb3dzIHVzIHRvIGNvbW11bmljYXRlIGJhY2sgdG8gdGhlIFdvcmtlckNsaWVudD9cbiAgICovXG4gIHZhciBzZW5kZXIgPSBudWxsO1xuXG4gIHdpbmRvdy5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudDogTWVzc2FnZUV2ZW50KSB7XG4gICAgLy8gVGhlIHR5cGUgaGVyZSBpcyBwcm9iYWJseSBhIHVuaW9uIG9mIGFsbCBwb3NzaWJsZSBtZXNzYWdlIHR5cGVzIVxuICAgIHZhciBkYXRhID0gZXZlbnQuZGF0YTsgIC8vIFRoZSBvYmplY3QgcGFzc2VkIGZyb20gdGhlIG90aGVyIHdpbmRvdy5cbiAgICB2YXIgbXNnOiB7IGFyZ3M7IGNsYXNzbmFtZTogc3RyaW5nOyBjb21tYW5kPzsgZGF0YTsgZXZlbnQ7IGluaXQ/OiBib29sZWFuOyBtb2R1bGU6IHN0cmluZzsgdGxuczogeyBbbnM6IHN0cmluZ106IHN0cmluZyB9IH0gPSBkYXRhO1xuICAgIHZhciBvcmlnaW46IHN0cmluZyA9IGV2ZW50Lm9yaWdpbjsgIC8vIFRoZSBvcmlnaW4gb2YgdGhlIHdpbmRvdyB0aGF0IHNlbnQgdGhlIG1lc3NhZ2UuXG4gICAgLy8gV2UgY2FuIGRvIHNvbWUgc2VjdXJpdHkgY2hlY2tzIGJ5IGNoZWNraW5nIHRoZSBvcmlnaW4gYW5kIHNvdXJjZSBoZXJlLlxuICAgIC8vIEZhaWx1cmUgdG8gZG8gc28gZW5hYmxlcyBjcm9zcy1zaXRlIHNjcmlwdGluZyBhdHRhY2tzLlxuICAgIC8vIFNlZSBNb3ppbGxhIFdpbmRvdy5wb3N0TWVzc2FnZSgpIGFydGljbGUuXG4gICAgdmFyIHNvdXJjZTogV2luZG93ID0gZXZlbnQuc291cmNlOyAvLyBBIHJlZmVyZW5jZSB0byB0aGUgd2luZG93IG9iamVjdCB0aGF0IHNlbnQgdGhlIG1lc3NhZ2UuXG4gICAgaWYgKG1zZy5jb21tYW5kKSB7XG4gICAgICBpZiAobWFpbikge1xuICAgICAgICBpZiAobWFpblttc2cuY29tbWFuZF0pIHtcbiAgICAgICAgICBtYWluW21zZy5jb21tYW5kXS5hcHBseShtYWluLCBtc2cuYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBjb21tYW5kOlwiICsgbXNnLmNvbW1hbmQgKyBcIihcIiArIEpTT04uc3RyaW5naWZ5KG1zZy5hcmdzKSArIFwiKVwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIC8vIEluaXRpYWxpemF0aW9uIG11c3QgaGF2ZSBmYWlsZWQuXG4gICAgICAgIGNvbnNvbGUud2FybihcIk5vdCBpbml0aWFsaXplZC4gVW5hYmxlIHRvIHByb2Nlc3MgY29tbWFuZCBcIiArIG1zZy5jb21tYW5kICsgXCIoXCIgKyBKU09OLnN0cmluZ2lmeShtc2cuYXJncykgKyBcIilcIik7XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKG1zZy5pbml0KSB7XG4gICAgICBpbml0RGVsZWdhdGUobXNnLm1vZHVsZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKG1zZy5ldmVudCAmJiBzZW5kZXIpIHtcbiAgICAgIC8vIEV4cGVjdCBcImNoYW5nZVwiIGV2ZW50cyBhcyB0aGUgdXNlciBlZGl0cyB0aGUgZG9jdW1lbnQuXG4gICAgICBzZW5kZXIuX3NpZ25hbChtc2cuZXZlbnQsIG1zZy5kYXRhKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBjb25zb2xlLndhcm4oJ3dvcmtlci1zeXN0ZW0ub25NZXNzYWdlKCkgRFJPUFBFRCAnICsgSlNPTi5zdHJpbmdpZnkobXNnKSk7XG4gICAgfVxuICB9O1xufSkodGhpcyk7Il19