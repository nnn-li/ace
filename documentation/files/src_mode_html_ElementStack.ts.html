<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/mode/html/ElementStack.ts - deuce</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../../assets/logo.png" title="deuce"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.1.17</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/parserlib.css.Combinator.html">parserlib.css.Combinator</a></li>
                                <li><a href="../classes/parserlib.css.MediaFeature.html">parserlib.css.MediaFeature</a></li>
                                <li><a href="../classes/parserlib.css.MediaQuery.html">parserlib.css.MediaQuery</a></li>
                                <li><a href="../classes/parserlib.css.Parser.html">parserlib.css.Parser</a></li>
                                <li><a href="../classes/parserlib.css.PropertyName.html">parserlib.css.PropertyName</a></li>
                                <li><a href="../classes/parserlib.css.PropertyValue.html">parserlib.css.PropertyValue</a></li>
                                <li><a href="../classes/parserlib.css.PropertyValueIterator.html">parserlib.css.PropertyValueIterator</a></li>
                                <li><a href="../classes/parserlib.css.PropertyValuePart.html">parserlib.css.PropertyValuePart</a></li>
                                <li><a href="../classes/parserlib.css.Selector.html">parserlib.css.Selector</a></li>
                                <li><a href="../classes/parserlib.css.SelectorPart.html">parserlib.css.SelectorPart</a></li>
                                <li><a href="../classes/parserlib.css.SelectorSubPart.html">parserlib.css.SelectorSubPart</a></li>
                                <li><a href="../classes/parserlib.css.Specificity.html">parserlib.css.Specificity</a></li>
                                <li><a href="../classes/parserlib.css.TokenStream.html">parserlib.css.TokenStream</a></li>
                                <li><a href="../classes/parserlib.css.TokenStreamBase.html">parserlib.css.TokenStreamBase</a></li>
                                <li><a href="../classes/parserlib.util.Anchor.html">parserlib.util.Anchor</a></li>
                                <li><a href="../classes/parserlib.util.BackgroundTokenizer.html">parserlib.util.BackgroundTokenizer</a></li>
                                <li><a href="../classes/parserlib.util.CSSLint.html">parserlib.util.CSSLint</a></li>
                                <li><a href="../classes/parserlib.util.Editor.html">parserlib.util.Editor</a></li>
                                <li><a href="../classes/parserlib.util.EditorDocument.html">parserlib.util.EditorDocument</a></li>
                                <li><a href="../classes/parserlib.util.EditSession.html">parserlib.util.EditSession</a></li>
                                <li><a href="../classes/parserlib.util.EventTarget.html">parserlib.util.EventTarget</a></li>
                                <li><a href="../classes/parserlib.util.Fold.html">parserlib.util.Fold</a></li>
                                <li><a href="../classes/parserlib.util.FoldLine.html">parserlib.util.FoldLine</a></li>
                                <li><a href="../classes/parserlib.util.GutterTooltip.html">parserlib.util.GutterTooltip</a></li>
                                <li><a href="../classes/parserlib.util.HScrollBar.html">parserlib.util.HScrollBar</a></li>
                                <li><a href="../classes/parserlib.util.HtmlMode.html">parserlib.util.HtmlMode</a></li>
                                <li><a href="../classes/parserlib.util.Mode.html">parserlib.util.Mode</a></li>
                                <li><a href="../classes/.html"></a></li>
                                <li><a href="../classes/parserlib.util.Position.html">parserlib.util.Position</a></li>
                                <li><a href="../classes/parserlib.util.Range.html">parserlib.util.Range</a></li>
                                <li><a href="../classes/parserlib.util.Reporter.html">parserlib.util.Reporter</a></li>
                                <li><a href="../classes/parserlib.util.ScrollBar.html">parserlib.util.ScrollBar</a></li>
                                <li><a href="../classes/parserlib.util.Search.html">parserlib.util.Search</a></li>
                                <li><a href="../classes/parserlib.util.Selection.html">parserlib.util.Selection</a></li>
                                <li><a href="../classes/parserlib.util.StringReader.html">parserlib.util.StringReader</a></li>
                                <li><a href="../classes/parserlib.util.SyntaxError.html">parserlib.util.SyntaxError</a></li>
                                <li><a href="../classes/parserlib.util.SyntaxUnit.html">parserlib.util.SyntaxUnit</a></li>
                                <li><a href="../classes/parserlib.util.TokenIterator.html">parserlib.util.TokenIterator</a></li>
                                <li><a href="../classes/parserlib.util.Tokenizer.html">parserlib.util.Tokenizer</a></li>
                                <li><a href="../classes/parserlib.util.Tooltip.html">parserlib.util.Tooltip</a></li>
                                <li><a href="../classes/parserlib.util.TypeScriptWorker.html">parserlib.util.TypeScriptWorker</a></li>
                                <li><a href="../classes/parserlib.util.UndoManager.html">parserlib.util.UndoManager</a></li>
                                <li><a href="../classes/parserlib.util.ValidationError.html">parserlib.util.ValidationError</a></li>
                                <li><a href="../classes/parserlib.util.VirtualRenderer.html">parserlib.util.VirtualRenderer</a></li>
                                <li><a href="../classes/parserlib.util.VScrollBar.html">parserlib.util.VScrollBar</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: src/mode/html/ElementStack.ts</h1>

<div class="file">
    <pre class="code prettyprint linenums">
function isScopeMarker(node) {
  if (node.namespaceURI === &quot;http://www.w3.org/1999/xhtml&quot;) {
    return node.localName === &quot;applet&quot;
      || node.localName === &quot;caption&quot;
      || node.localName === &quot;marquee&quot;
      || node.localName === &quot;object&quot;
      || node.localName === &quot;table&quot;
      || node.localName === &quot;td&quot;
      || node.localName === &quot;th&quot;;
  }
  if (node.namespaceURI === &quot;http://www.w3.org/1998/Math/MathML&quot;) {
    return node.localName === &quot;mi&quot;
      || node.localName === &quot;mo&quot;
      || node.localName === &quot;mn&quot;
      || node.localName === &quot;ms&quot;
      || node.localName === &quot;mtext&quot;
      || node.localName === &quot;annotation-xml&quot;;
  }
  if (node.namespaceURI === &quot;http://www.w3.org/2000/svg&quot;) {
    return node.localName === &quot;foreignObject&quot;
      || node.localName === &quot;desc&quot;
      || node.localName === &quot;title&quot;;
  }
}

function isListItemScopeMarker(node) {
  return isScopeMarker(node)
    || (node.namespaceURI === &quot;http://www.w3.org/1999/xhtml&quot; &amp;&amp; node.localName === &#x27;ol&#x27;)
    || (node.namespaceURI === &quot;http://www.w3.org/1999/xhtml&quot; &amp;&amp; node.localName === &#x27;ul&#x27;);
}

function isTableScopeMarker(node) {
  return (node.namespaceURI === &quot;http://www.w3.org/1999/xhtml&quot; &amp;&amp; node.localName === &#x27;table&#x27;)
    || (node.namespaceURI === &quot;http://www.w3.org/1999/xhtml&quot; &amp;&amp; node.localName === &#x27;html&#x27;);
}

function isTableBodyScopeMarker(node) {
  return (node.namespaceURI === &quot;http://www.w3.org/1999/xhtml&quot; &amp;&amp; node.localName === &#x27;tbody&#x27;)
    || (node.namespaceURI === &quot;http://www.w3.org/1999/xhtml&quot; &amp;&amp; node.localName === &#x27;tfoot&#x27;)
    || (node.namespaceURI === &quot;http://www.w3.org/1999/xhtml&quot; &amp;&amp; node.localName === &#x27;thead&#x27;)
    || (node.namespaceURI === &quot;http://www.w3.org/1999/xhtml&quot; &amp;&amp; node.localName === &#x27;html&#x27;);
}

function isTableRowScopeMarker(node) {
  return (node.namespaceURI === &quot;http://www.w3.org/1999/xhtml&quot; &amp;&amp; node.localName === &#x27;tr&#x27;)
    || (node.namespaceURI === &quot;http://www.w3.org/1999/xhtml&quot; &amp;&amp; node.localName === &#x27;html&#x27;);
}

function isButtonScopeMarker(node) {
  return isScopeMarker(node)
    || (node.namespaceURI === &quot;http://www.w3.org/1999/xhtml&quot; &amp;&amp; node.localName === &#x27;button&#x27;);
}

function isSelectScopeMarker(node) {
  return !(node.namespaceURI === &quot;http://www.w3.org/1999/xhtml&quot; &amp;&amp; node.localName === &#x27;optgroup&#x27;)
    &amp;&amp; !(node.namespaceURI === &quot;http://www.w3.org/1999/xhtml&quot; &amp;&amp; node.localName === &#x27;option&#x27;);
}
/**
 * Represents a stack of open elements
 * @constructor
 */
export default function ElementStack() {
  this.elements = [];
  this.rootNode = null;
  this.headElement = null;
  this.bodyElement = null;
}

/**
 *
 * @param {String} localName
 * @param {Function} isMarker
 * @return {Boolean}
 * @private
 */
ElementStack.prototype._inScope = function(localName, isMarker) {
  for (var i = this.elements.length - 1; i &gt;= 0; i--) {
    var node = this.elements[i];
    if (node.localName === localName)
      return true;
    if (isMarker(node))
      return false;
  }
};

/**
 * Pushes the item on the stack top
 * @param {StackItem} item
 */
ElementStack.prototype.push = function(item) {
  this.elements.push(item);
};

/**
 * Pushes the item on the stack top
 * @param {StackItem} item HTML element stack item
 */
ElementStack.prototype.pushHtmlElement = function(item) {
  this.rootNode = item.node;
  this.push(item);
};

/**
 * Pushes the item on the stack top
 * @param {StackItem} item HEAD element stack item
 */
ElementStack.prototype.pushHeadElement = function(item) {
  this.headElement = item.node;
  this.push(item);
};

/**
 * Pushes the item on the stack top
 * @param {StackItem} item BODY element stack item
 */
ElementStack.prototype.pushBodyElement = function(item) {
  this.bodyElement = item.node;
  this.push(item);
};

/**
 * Pops the topmost item
 * @return {StackItem}
 */
ElementStack.prototype.pop = function() {
  return this.elements.pop();
};

/**
 * Removes the item from the element stack
 * @param {StackItem} item The item to remove
 */
ElementStack.prototype.remove = function(item) {
  this.elements.splice(this.elements.indexOf(item), 1);
};

/**
 * Pops until an element with a given localName is popped
 * @param {String} localName
 */
ElementStack.prototype.popUntilPopped = function(localName) {
  var element;
  do {
    element = this.pop();
  } while (element.localName != localName);
};

ElementStack.prototype.popUntilTableScopeMarker = function() {
  while (!isTableScopeMarker(this.top))
    this.pop();
};

ElementStack.prototype.popUntilTableBodyScopeMarker = function() {
  while (!isTableBodyScopeMarker(this.top))
    this.pop();
};

ElementStack.prototype.popUntilTableRowScopeMarker = function() {
  while (!isTableRowScopeMarker(this.top))
    this.pop();
};

/**
 *
 * @param {Number} index
 * @return {StackItem}
 */
ElementStack.prototype.item = function(index) {
  return this.elements[index];
};

/**
 *
 * @param {StackItem} element
 * @return {Boolean}
 */
ElementStack.prototype.contains = function(element) {
  return this.elements.indexOf(element) !== -1;
};

/**
 *
 * @param {String} localName
 * @return {Boolean}
 */
ElementStack.prototype.inScope = function(localName) {
  return this._inScope(localName, isScopeMarker);
};

/**
 *
 * @param {String} localName
 * @return {Boolean}
 */
ElementStack.prototype.inListItemScope = function(localName) {
  return this._inScope(localName, isListItemScopeMarker);
};

/**
 *
 * @param {String} localName
 * @return {Boolean}
 */
ElementStack.prototype.inTableScope = function(localName) {
  return this._inScope(localName, isTableScopeMarker);
};

/**
 *
 * @param {String} localName
 * @return {Boolean}
 */
ElementStack.prototype.inButtonScope = function(localName) {
  return this._inScope(localName, isButtonScopeMarker);
};

/**
 *
 * @param {String} localName
 * @return {Boolean}
 */
ElementStack.prototype.inSelectScope = function(localName) {
  return this._inScope(localName, isSelectScopeMarker);
};

/**
 *
 * @return {Boolean}
 */
ElementStack.prototype.hasNumberedHeaderElementInScope = function() {
  for (var i = this.elements.length - 1; i &gt;= 0; i--) {
    var node = this.elements[i];
    if (node.isNumberedHeader())
      return true;
    if (isScopeMarker(node))
      return false;
  }
};

/**
 *
 * @param {Object} element
 * @return {StackItem}
 */
ElementStack.prototype.furthestBlockForFormattingElement = function(element) {
  var furthestBlock = null;
  for (var i = this.elements.length - 1; i &gt;= 0; i--) {
    var node = this.elements[i];
    if (node.node === element)
      break;
    if (node.isSpecial())
      furthestBlock = node;
  }
    return furthestBlock;
};

/**
 *
 * @param {String} localName
 * @return {Number}
 */
ElementStack.prototype.findIndex = function(localName) {
  for (var i = this.elements.length - 1; i &gt;= 0; i--) {
    if (this.elements[i].localName == localName)
      return i;
  }
    return -1;
};

ElementStack.prototype.remove_openElements_until = function(callback) {
  var finished = false;
  var element;
  while (!finished) {
    element = this.elements.pop();
    finished = callback(element);
  }
  return element;
};

Object.defineProperty(ElementStack.prototype, &#x27;top&#x27;, {
  get: function() {
    return this.elements[this.elements.length - 1];
  }
});

Object.defineProperty(ElementStack.prototype, &#x27;length&#x27;, {
  get: function() {
    return this.elements.length;
  }
});

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
